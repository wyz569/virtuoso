
<html><head><title>Area Estimation Function Definition</title><meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="Approver" content="Technical Publications" />
<meta name="Author" content="spriya" />
<meta name="CreateDate" content="2023-10-26" />
<meta name="CreateTime" content="1698333586" />
<meta name="DataType" content="Manuals" />
<meta name="Description" content="Describes Virtuoso Floorplanner that includes automatic and interactive floorplanning tools that let you specify the rough topology of a physical chip." />
<meta name="DocTitle" content="Virtuoso Floorplanner User Guide" />
<meta name="DocType" content="User Guide" />
<meta name="FileTitle" content="Area Estimation Function Definition" />
<meta name="FileType" content="Chapter" />
<meta name="FMWikiRelease" content="FM-Wiki-4.0.0" />
<meta name="Keyword" content="fphelp" />
<meta name="Language" content="English" />
<meta name="ModifiedDate" content="2023-10-26" />
<meta name="ModifiedTime" content="1698333586" />
<meta name="NextFile" content="areaEstimation_re_Area_Estimation_Function_Registration.html" />
<meta name="Group" content="" />
<meta name="Platform" content="Custom IC Design" />
<meta name="PrevFile" content="areaEstimation.html" />
<meta name="c_product" content="Virtuoso Layout Suite" />
<meta name="Product" content="Virtuoso Layout Suite" />
<meta name="ProductFamily" content="Virtuoso Layout Suite" />
<meta name="ProductVersion" content="IC23.1" />
<meta name="RightsManagement" content="Copyright 2023 Cadence Design Systems Inc." />
<meta name="Title" content="Virtuoso Floorplanner User Guide -- Area Estimation Function Definition" />
<meta name="Keywords" content="" />
<meta name="topic_type" content="concept" />
<meta name="reference_type" content="Virtuoso Layout Suite::Floorplanning::Area Estimation" />
<meta name="prod_feature" content="Floorplanning" />
<meta name="prod_subfeature" content="Area Estimation" />
<meta name="new_topic" content="No" />
<meta name="spotlight_topic" content="0" />
<meta name="Version" content="IC23.1" />
<meta name="SpaceKey" content="fphelpIC231" />
<meta name="webflare-version" content="2.5" />
<link rel="stylesheet" href="styles/webflare.css" type="text/css" />


  <script>/*<![CDATA[*/
 document.addEventListener("DOMContentLoaded", function(event) {  document.querySelectorAll("img").forEach((img, index) => {
if (img.hasAttribute("usemap")){return;}else{img.classList.add("cursorclass");} img.addEventListener("click", (e) => {if(img.hasAttribute("usemap")){            img.setAttribute("style","cursor:none;");return;};document.querySelector("#cad_image_modal").classList.add("opac");document.querySelector("#cad_image_modal_center").innerHTML = `<img style="position:absolute;top:0;bottom:0;left:0;right:0;margin: auto;max-height:95%;"  src="${e.target.src}">`;});});});
/*]]>*/</script> 




 <style>/*<![CDATA[*/
.cursorclass{cursor:pointer;}#cad_image_modal{position:fixed;left:0;top:0;width:100%;background:#00000099;overflow:hidden;height:0;opacity:0;transition: height 0ms 1s, opacity 1s 0ms;}#cad_image_modal.opac{height: 100%;opacity: 1;transition: height 0ms 0ms, opacity 1s 0ms;}#cad_image_modal span{position:fixed;right:10px;top:10px;cursor:pointer;color:#fff;}
/*]]>*/</style> 
</head><body style="background-color: #FFFFFF;"><a name="pagetop"></a>
<!-- Begin Buttons -->
<header><div class="docHeadr">Product Documentation<img src="icons/Cadence-Logo.jpg" /></div><nav class="blueHead"><ul><li><a class="content" href="fphelpTOC.html">Contents</a></li><li><a class="prev" href="areaEstimation.html" title="Area Estimation Framework in Floorplanner">Area Estimation Framework in F ...</a></li><li style="float: right;"><a class="viewPrint" href="fphelp.pdf">View/Print PDF</a></li><li style="float: right;margin-right: 25px;"><a class="nextd" href="areaEstimation_re_Area_Estimation_Function_Registration.html" title="Area Estimation Function Registration">Area Estimation Function Regis ...</a></li></ul></nav></header>
<!-- End Buttons -->
<h5><center>Virtuoso Floorplanner User Guide<br />Product Version IC23.1, November 2023</center></h5><div id="main-content" style="min-height: 50vh; margin-left: 5%; margin-right: 2%;"><a name="#firstpage"></a>

<a id="Filename:ct_Area_Estimation_Function_Definition" title="Area Estimation Function Definition"></a><h2>
<a id="pgfId-1048151"></a><a id="RTF39313130363a206831742068"></a>Area Estimation Function Definition</h2>

<p>
<a id="pgfId-1048152"></a>You can define your own area estimation function for calculating the area of a cellview or a virtual hierarchy. You can directly type the area estimation functions in the CIW or define them in the .cdsinit file. </p>

<h4>
<a id="pgfId-1048153"></a>Syntax</h4>
<a id="pgfId-1048154"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
<code><em>areaEstimatorName(
d_objectId
@optional (param1 defVal1) (param2 defVal2)
) </em></code></pre>
<a id="pgfId-1048155"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
<code><em>=&gt; areaVal/ nil</em></code></pre>
<h4>
<a id="pgfId-1048156"></a>Description</h4>

<p>
<a id="pgfId-1048157"></a>Defines an area estimator function to calculate the size of a rectangular area boundary for a cellview or virtual hierarchy.</p>
<p>
<a id="pgfId-1048158"></a>The return value of the function is either a float or integer. The value returned by the function is the area of the boundary of the cellview or virtual hierarchy to be drawn. This value is divided by the utilization factor. The height and width of the boundary is then determined by using the aspect ratio defined. If the value returned by the function is negative, its absolute value is taken.</p>

<h4>
<a id="pgfId-1048159"></a>Arguments</h4>
<table class="webflareTable" id="#id1048160">
<tbody><tr>
<td class="webflareTd" colspan="1" rowspan="1">
<a id="pgfId-1048162"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
<code><em>d_objectId</em></code></pre>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1048164"></a>Database ID of the cellview or virtual figGroup for which area is to be calculated.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="2" rowspan="1">
<a id="pgfId-1048166"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
<code><em>@optional (param1 defVal1)</em></code></pre>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<headingrunin id="#id1048170">
<a id="pgfId-1048170"></a>
</headingrunin></td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1048172"></a>An optional list of name value pairs, where param1 is the parameter name and defVal1 is the default value, such as int, float, text, list, and boolean. The parameter name is considered for area estimation and its value is the corresponding value of the parameter.</p>
<p>
<a id="pgfId-1048173"></a>You can also manually specify the list of parameters using the Area Estimation form.</p>
</td>
</tr>
</tbody></table>
<h4>
<a id="pgfId-1048177"></a>Value Returned</h4>
<table class="webflareTable" id="#id1048178">
<tbody><tr>
<td class="webflareTd" colspan="1" rowspan="1">
<a id="pgfId-1048180"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
<code><em>areaVal</em></code></pre>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1048182"></a>Returns the area value in the area estimation function.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<a id="pgfId-1048184"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
<code><em>nil</em></code></pre>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1048186"></a>The function was not run successfully.</p>
</td>
</tr>
</tbody></table>
<h4>
<a id="pgfId-1048190"></a>Examples</h4>

<p>
<a id="pgfId-1048191"></a>In the example below, you can define your own function myFunc. The function traverses all the instances defined in the cvId cellview, and calculates sum of areas of bBox of each instance and returns the area value. When you run the Generate All From Source command for area calculation, write the name of the function in the myFunc field as it is not required to specify the cellview Id. The cellview Id is automatically picked up from the open cellview.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1048192"></a>procedure(myFunc(cvId)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1048193"></a> let( (area inst)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1048194"></a>   area = 0.0</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1048195"></a>   foreach( inst cvId~&gt;instances</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1048196"></a>    x1 = caar(inst~&gt;bBox)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1048197"></a>    x2 = caadr(inst~&gt;bBox)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1048198"></a>    y1 = cadar(inst~&gt;bBox)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1048199"></a>    y2 = cadadr(inst~&gt;bBox)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1048200"></a>    area = area + abs(x1-x2)*abs(y1-y2)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1048201"></a>   )</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1048202"></a>   area</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1048203"></a> )</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1048204"></a>) </pre>

<p>
<a id="pgfId-1048206"></a>In the example below, the area estimation function has no parameters.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1048207"></a>procedure(myFunction(clusterId)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1048208"></a>prog((area)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1048209"></a>// Function body to calculate area involving instances of ClusterId</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1048210"></a>foreach(ins clusterId~&gt;instances</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1048211"></a>area = area + ins~&gt;master~&gt;prBoundary~&gt;area</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1048212"></a>)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1048213"></a>return(area)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1048214"></a>)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1048215"></a>)</pre>

<p>
<a id="pgfId-1048217"></a>In the example below, the function has one parameter with some default value.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1048218"></a>procedure(myFunction(clusterId @optional (contactArea 1.0)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1048219"></a>prog((area)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1048220"></a>// Function body to calculate area involving instances of ClusterId</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1048221"></a>foreach(ins clusterId~&gt;instances</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1048222"></a>area = area + ins~&gt;master~&gt;prBoundary~&gt;area * contactArea</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1048223"></a>)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1048224"></a>return(area)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1048225"></a>)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1048226"></a>)</pre>

<p>
<a id="pgfId-1048227"></a>In the example below, you can define an area estimator function to adjust the PR boundary of a soft block in a layout.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1048228"></a>procedure(areaEstUsingLayoutPRBoundary(</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1048229"></a>     cv </pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1048230"></a>    @optional (multFactor 10.0) (pinArea 0.14) (numPins 10))</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1048231"></a>   &#160;&#160;&#160;&#160;   let( ((area 0.0) ele master)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1048232"></a>     foreach( ele cv~&gt;instances</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1048233"></a>    master = ele~&gt;master</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1048234"></a>    if(master~&gt;prBoundary then</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1048235"></a>     area = area + master~&gt;prBoundary~&gt;area</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1048236"></a> &#160;&#160;  &#160;&#160;&#160;&#160;  else</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1048237"></a>    area = area + abs((caadr(master~&gt;bBox) - caar(master~&gt;bBox))</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1048238"></a>    * (cadadr(master~&gt;bBox) - cadar(master~&gt;bBox)))</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1048239"></a>     )</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1048240"></a>    )</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1048241"></a>     area = area * abs(multFactor) + numPins * pinArea</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1048242"></a>    )</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1048243"></a>   )</pre>

<p>
<a id="pgfId-1048244"></a>In the example below, you can define the function to adjust the area boundary of all bounding boxes of instances and shapes in a design.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1048245"></a>procedure(areaEstUsingLayoutBBox(cv)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1048246"></a>    &#160;&#160;&#160;&#160;  let( ((area 0.0) ele master)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1048247"></a>   foreach( ele cv~&gt;instances</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1048248"></a> &#160;&#160;  &#160;&#160;&#160;&#160; master = ele~&gt;master</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1048249"></a>    area = area + abs((caadr(master~&gt;bBox) - caar(master~&gt;bBox))</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1048250"></a>   * (cadadr(master~&gt;bBox) - cadar(master~&gt;bBox)))</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1048251"></a>   )</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1048252"></a></pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1048253"></a>   area</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1048254"></a>    &#160;&#160;&#160;&#160;  )</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1048255"></a>   )</pre>

<p>
<a id="pgfId-1048256"></a>You can also write an area estimator function as follows.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1048257"></a>procedure(myFunc(maskLayoutId @optional (contactArea  1.0)<br />&#160;&#160;prog((area)<br />&#160;&#160;&#160;&#160;// Function body to calculate area involving layout instances<br />&#160;&#160;&#160;&#160;foreach(ins maskLayoutId~&gt;instances<br />&#160;&#160;&#160;&#160;&#160;&#160;area = area + ins~&gt;master~&gt;prBoundary~&gt;area * contactArea<br />&#160;&#160;&#160;&#160;)<br />&#160;&#160;&#160;&#160;return(area)<br />&#160;&#160;)<br />)</pre>
<h4><em>
<a id="pgfId-1048258"></a>Related Topics</em></h4>

<p>
<a id="pgfId-1048262"></a><a href="areaEstimation_re_Area_Estimation_Function_Registration.html#RTF34333835313a206832206865">Area Estimation Function Registration</a></p>
<p>
<a id="pgfId-1048266"></a><a href="areaEstimation_tk_Registering_an_Area_Estimation_Function_to_Adjust_a_Virtual_Hierarchy_Area_Boundary.html#RTF34373635343a206832742068">Registering an Area Estimation Function to Adjust a Virtual Hierarchy Area Boundary</a></p>
<p>
<a id="pgfId-1048270"></a><a href="areaEstimation_tk_Registering_an_Area_Estimation_Function_to_Adjust_a_Soft_Block_PR_Boundary.html#RTF38373435343a206832742068">Registering an Area Estimation Function to Adjust a Soft Block PR Boundary</a></p>
<p>
<a id="pgfId-1050094"></a><a href="areaEstimation_tk_Adding_an_Area_Estimator_Function_for_Layout_Generation.html#RTF39373439313a206832742068">Adding an Area Estimator Function for Layout Generation</a></p>

<br /><a href="#pagetop">Return to top</a><br /></div>
<!-- Begin Buttons --><!-- End Buttons -->
<footer><nav class="navigation"><b><em><a href="areaEstimation.html" id="prev" title="Area Estimation Framework in Floorplanner">Area Estimation Framework in F ...</a></em></b><b><em><a href="areaEstimation_re_Area_Estimation_Function_Registration.html" id="nex" title="Area Estimation Function Registration">Area Estimation Function Regis ...</a></em></b></nav><div>
            For further assistance, contact <a href="https://support.cadence.com">Cadence Online Support</a>. Copyright &#169; 2023, <a href="https://www.cadence.com">Cadence Design Systems, Inc.</a> All rights reserved. 
          </div></footer>
 

 <div id="cad_image_modal" style="background-color: rgba(0, 0, 0, 0.6);"><center id="cad_image_modal_center">&#160;⠀ </center><span style="margin-right:50px;margin-top:100px;font-weight:bold;font-size:20px;background:#e5e5e5;border:1px solid #e5e5e5;border-radius:25px;height:30px;width:20px;padding-left:6px;padding-top:2px;color: black;" onclick="document.querySelector('#cad_image_modal').classList.remove('opac');">X</span></div> 

</body></html>