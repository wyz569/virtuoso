
<html><head><title>Setting up Hierarchical Dracula</title><meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="Approver" content="Technical Publications" />
<meta name="Author" content="sarita" />
<meta name="CreateDate" content="2023-09-14" />
<meta name="CreateTime" content="1694753573" />
<meta name="DataType" content="Manuals" />
<meta name="Description" content="The Dracula product offers a complete set of integrated applications for verifying IC layout design.  This book contains task-related information about the Dracula standalone verification product." />
<meta name="DocTitle" content="Dracula User Guide" />
<meta name="DocType" content="User Guide" />
<meta name="FileTitle" content="Setting up Hierarchical Dracula" />
<meta name="FileType" content="Chapter" />
<meta name="FMWikiRelease" content="FM-Wiki-4.0.0" />
<meta name="Keyword" content="draculauser" />
<meta name="Language" content="English" />
<meta name="ModifiedDate" content="2023-09-14" />
<meta name="ModifiedTime" content="1694753573" />
<meta name="NextFile" content="draculauserIX.html" />
<meta name="Group" content="" />
<meta name="Platform" content="Physical Verification  Analysis" />
<meta name="PrevFile" content="chap5.html" />
<meta name="c_product" content="Dracula" />
<meta name="Product" content="Dracula" />
<meta name="ProductFamily" content="Dracula" />
<meta name="ProductVersion" content="IC23.1" />
<meta name="RightsManagement" content="Copyright 2023 Cadence Design Systems Inc." />
<meta name="Title" content="Dracula User Guide -- Setting up Hierarchical Dracula" />
<meta name="Keywords" content="" />
<meta name="topic_type" content="" />
<meta name="reference_type" content="" />
<meta name="prod_feature" content="" />
<meta name="prod_subfeature" content="" />
<meta name="new_topic" content="No" />
<meta name="spotlight_topic" content="0" />
<meta name="Version" content="IC23.1" />
<meta name="SpaceKey" content="draculauserIC231" />
<meta name="webflare-version" content="2.5" />
<link rel="stylesheet" href="styles/webflare.css" type="text/css" />


  <script>/*<![CDATA[*/
 document.addEventListener("DOMContentLoaded", function(event) {  document.querySelectorAll("img").forEach((img, index) => {
if (img.hasAttribute("usemap")){return;}else{img.classList.add("cursorclass");} img.addEventListener("click", (e) => {if(img.hasAttribute("usemap")){            img.setAttribute("style","cursor:none;");return;};document.querySelector("#cad_image_modal").classList.add("opac");document.querySelector("#cad_image_modal_center").innerHTML = `<img style="position:absolute;top:0;bottom:0;left:0;right:0;margin: auto;max-height:95%;"  src="${e.target.src}">`;});});});
/*]]>*/</script> 




 <style>/*<![CDATA[*/
.cursorclass{cursor:pointer;}#cad_image_modal{position:fixed;left:0;top:0;width:100%;background:#00000099;overflow:hidden;height:0;opacity:0;transition: height 0ms 1s, opacity 1s 0ms;}#cad_image_modal.opac{height: 100%;opacity: 1;transition: height 0ms 0ms, opacity 1s 0ms;}#cad_image_modal span{position:fixed;right:10px;top:10px;cursor:pointer;color:#fff;}
/*]]>*/</style> 
</head><body style="background-color: #FFFFFF;"><a name="pagetop"></a>
<!-- Begin Buttons -->
<header><div class="docHeadr">Product Documentation<img src="icons/Cadence-Logo.jpg" /></div><nav class="blueHead"><ul><li><a class="content" href="draculauserTOC.html">Contents</a></li><li><a class="prev" href="chap5.html" title="Extracting RC Parasitics">Extracting RC Parasitics</a></li><li style="float: right;"><a class="viewPrint" href="draculauser.pdf">View/Print PDF</a></li><li style="float: right;margin-right: 25px;"><a class="nextd" href="draculauserIX.html" title="Index">Index</a></li></ul></nav></header>
<!-- End Buttons -->
<h5><center>Dracula User Guide<br />Product Version IC23.1, September 2023</center></h5><div id="main-content" style="min-height: 50vh; margin-left: 5%; margin-right: 2%;"><a name="#firstpage"></a>

<h1>6
<a id="pgfId-1008781"></a></h1>
<h1>
<a id="pgfId-1011663"></a><hr />
Setting up Hierarchical Dracula<hr />
</h1>

<p>
<a id="pgfId-1014231"></a>In this chapter, you&#8217;ll learn about the following:</p>
<ul><li>
<a id="pgfId-1014235"></a><a href="chap6.html#79552">About Hierarchical Dracula</a></li><li>
<a id="pgfId-1014240"></a><a href="chap6.html#85929">Running a Hierarchical Design Rule Check</a></li><li>
<a id="pgfId-1014245"></a><a href="chap6.html#60107">Selecting Hcells</a></li><li>
<a id="pgfId-1014249"></a><a href="chap6.html#16890">Running a Multilevel Design Rule Check</a></li><li>
<a id="pgfId-1014253"></a><a href="chap6.html#17810">Running a Hierarchical Electrical Rules Check</a></li><li>
<a id="pgfId-1014257"></a><a href="chap6.html#65090">Running a Hierarchical Network Comparison</a></li><li>
<a id="pgfId-1014261"></a><a href="chap6.html#13894">Running Hierarchical Parameter Extractions</a></li><li>
<a id="pgfId-1014266"></a><a href="chap6.html#48318">Making Hierarchical Dracula Run Faster</a></li></ul>








<h2>
<a id="pgfId-1014269"></a><a id="79552"></a>About Hier<a id="marker-1014268"></a>archical Dracula</h2>

<p>
<a id="pgfId-1014271"></a>Y<a id="marker-1014270"></a>ou can use the Dracula hierarchical tools (HDRC, HERC, HLVS, HLPE, and HPRE) on hierarchical designs in the same way you use the corresponding tools on flat designs. The basic differences are as follows:</p>
<ul><li>
<a id="pgfId-1014272"></a>You must include hierarchical functions in your rules file. </li><li>
<a id="pgfId-1014273"></a>Dracula organizes your output differently, depending on which check mode you select.</li></ul>

<p>
<a id="pgfId-1014274"></a>In the sections that follow, you will learn </p>
<ul><li>
<a id="pgfId-1014275"></a>Which Dracula functions you need in your rules file to run a hierarchical job</li><li>
<a id="pgfId-1014276"></a>How you can interpret the output from a hierarchical job</li></ul>

<p>
<a id="pgfId-1014279"></a>For more information about when to use hierarchical Dracula, see <a href="chap4.html#23622">Chapter 4, &#8220;Selecting a Run Mode.&#8221;</a></p>

<h3>
<a id="pgfId-1014282"></a><a id="72351"></a>Prerequisites</h3>

<p>
<a id="pgfId-1014283"></a>To run hierarchical Dracula, you must know how to run the Dracula verification tools in flat mode.</p>
<p>
<a id="pgfId-1014284"></a>Also, you need to be familiar with how Dracula forms a two-level hierarchy consisting of the composite and Hcell planes. For a complete description of how Dracula constructs its hierarchy, see <h-hot><a actuate="user" class="URL" href="../dracularef/chap1.html#hier_structure" show="replace" xml:link="simple">&#8220;Hierarchical Structure&#8221; in the &#8220;Overview&#8221; chapter</a></h-hot> of the <em>Dracula Reference.</em></p>

<h3>
<a id="pgfId-1014287"></a><a id="77246"></a>Hierarchical Products and Modes</h3>

<p>
<a id="pgfId-1014289"></a>T<a id="marker-1014288"></a>his table shows the products you can run in hierarchical Dracula and the modes you can use to run them. For more information about these modes, see <a href="chap4.html#23622">Chapter 4, &#8220;Selecting a Run Mode.&#8221;</a></p>
<table class="webflareTable" id="#id1014293">
<tbody><tr>
<th class="webflareTh" colspan="1" rowspan="1">
<span class="tbl-head" id="#id1014295">
<a id="pgfId-1014295"></a>CHECK-MODE=</span>
</th>
<th class="webflareTh" colspan="1" rowspan="1">
<span class="tbl-head" id="#id1014297">
<a id="pgfId-1014297"></a>HDRC</span>
</th>
<th class="webflareTh" colspan="1" rowspan="1">
<span class="tbl-head" id="#id1014299">
<a id="pgfId-1014299"></a>HERC</span>
</th>
<th class="webflareTh" colspan="1" rowspan="1">
<span class="tbl-head" id="#id1014301">
<a id="pgfId-1014301"></a>HLVS</span>
</th>
<th class="webflareTh" colspan="1" rowspan="1">
<span class="tbl-head" id="#id1014303">
<a id="pgfId-1014303"></a>HLPE</span>
</th>
<th class="webflareTh" colspan="1" rowspan="1">
<span class="tbl-head" id="#id1014305">
<a id="pgfId-1014305"></a>HPRE</span>
</th>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1014308"></a>H<a id="marker-1014307"></a>IER</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1014310"></a><strong>x</strong></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1014312"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1014314"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1014316"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1014318"></a></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1014321"></a>C<a id="marker-1014320"></a>ELL</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1014323"></a><strong>x</strong>*</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1014325"></a><strong>x</strong></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1014327"></a><strong>x</strong></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1014329"></a><strong>x</strong></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1014331"></a></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1014334"></a>C<a id="marker-1014333"></a>OMP</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1014336"></a><strong>x</strong>*</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1014338"></a><strong>x</strong></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1014340"></a><strong>x</strong></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1014342"></a><strong>x</strong></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1014344"></a><strong>x</strong></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1014346"></a>MULTI</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1014348"></a><strong>x</strong></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1014350"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1014352"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1014354"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1014356"></a></p>
</td>
</tr>
</tbody></table>
<p>
<a id="pgfId-1014358"></a>Running only cell and composite mode H<a id="marker-1014357"></a>DRC is not recommended because these modes do not provide Hcell-to-Hcell or Hcell-to-composite checks. Use hierarchical mode instead.</p>

<h2>
<a id="pgfId-1014363"></a><a id="85929"></a>Ru<a id="run_hdrc"></a>nn<a id="hier_drc"></a>ing a Hierarchical <a id="marker-1014362"></a>Design Rule Check</h2>

<p>
<a id="pgfId-1014365"></a>Y<a id="marker-1014364"></a>ou use hierarchical Dracula in the same way you use flat Dracula to check your design rules. When you run a hierarchical design rule check (HDRC) job, Dracula verifies your database completely. Hierarchical Dracula checks cells with highly repetitive placements only once, and then checks them against the surrounding geometries. The hierarchical output is easier to debug than flat output because errors are reported only once for all placements of a given cell.</p>
<p>
<a id="pgfId-1014369"></a>You might need to use some or all of the hierarchical functions listed in <a href="chap6.html#56986"></a>the following table. To find more information about using the function, look in the Description column of the table.</p>

<h3>
<a id="pgfId-1014371"></a><a id="11289"></a>Writing Hierarchical Design Rules</h3>

<p>
<a id="pgfId-1014373"></a>The r<a id="marker-1014372"></a>ules file you use for a hierarchical DRC run is essentially the same as a rules file for a flat run, with the addition of several hierarchy-related functions. The following table lists the hierarchical functions that you might want to include. For more information about these functions, see the <em>Dracula Reference </em>manual.</p>
<p>
<a id="pgfId-1014379"></a>Y<a id="marker-1014374"></a>ou cannot use the <code>LENGTH</code><a id="marker-1014375"></a><a id="marker-1014376"></a>, <code>EXT[G]</code><a id="marker-1014377"></a>, and <code>RELOCATE</code><a id="marker-1014378"></a> functions in hierarchical rules files. Also, you must use flat layers for nodal functions, as described in the &#8220;<a href="chap6.html#10300">Using Flat Layers for Nodal Information</a>&#8221; section</p>

<p>
<a id="pgfId-1018941"></a>.</p>
<table class="webflareTable" id="#id1014383">
<caption style="text-align:left;"><p>
</p><div class="ft-figtabl-title">
<a id="pgfId-1014389"></a><a id="56986"></a>Hierarchical Functions for HDRC </div></caption>
<tbody><tr>
<th class="webflareTh" colspan="1" rowspan="1">
<span class="tbl-head" id="#id1014395">
<a id="pgfId-1014395"></a>Function</span>
</th>
<th class="webflareTh" colspan="1" rowspan="1">
<span class="tbl-head" id="#id1014397">
<a id="pgfId-1014397"></a>Description</span>
</th>
<th class="webflareTh" colspan="1" rowspan="1">
<span class="tbl-head" id="#id1014399">
<a id="pgfId-1014399"></a>Rules file block</span>
</th>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1014402"></a><code>CELL-ERROR-REP</code><a id="marker-1014401"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1014405"></a>S<a id="marker-1014404"></a>pecifies the format of cell-based error segments generated by HDRC; <code>ONCE</code>, <code>HIER</code>, <code>ALL</code>, <code>ORIG-ALL</code>, <code>ORIG-DRC</code>, or <code>cellname</code>. See <a href="chap6.html#77336">Using HDRC Output</a>.</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1014410"></a><code>*DESCRIPTION</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1014412"></a><code>CELLBOX-LAYER</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1014415"></a>C<a id="marker-1014414"></a>reates cell boundaries for each Hcell on the layer you specify. See <a href="chap6.html#31470">Using Cell Boundaries</a>.</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1014420"></a></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1014423"></a><code>CHECK-MODE</code><a id="marker-1014422"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1014426"></a>S<a id="marker-1014425"></a>et to <code>HIER</code> for HDRC.</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1014428"></a><code>*DESCRIPTION</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1014431"></a><code>ENVIRONMENT-MAX</code><a id="marker-1014430"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1014434"></a>S<a id="marker-1014433"></a>pecifies the upper limit for the width of the Hcell environment. See <a href="chap6.html#56761">Specifying a Maximum Environment Value</a>.</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1014439"></a></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1014442"></a><code>EXCEPTION-ON</code><a id="marker-1014441"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1014445"></a>S<a id="marker-1014444"></a>et to <code>[HSP-OUTPUT]</code> and use with <code>SIZE</code> to output <code>SIZE</code> results hierarchically. This option also disallows overlapping Hcells during automatic Hcell selection. See <a href="chap6.html#85032">Preventing Hcell Overlap</a>.</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1014450"></a></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1014452"></a><code>HCELL</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1014455"></a>S<a id="marker-1014454"></a>pecifies which cells are Hcells. See <a href="chap6.html#94094">Altering the Hcell Selection Criteria</a>.</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1014460"></a></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1014462"></a><code>HCELL-FILE</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1014466"></a>S<a id="marker-1014464"></a>pe<a id="marker-1014465"></a>cifies a file containing a set of <code>HCELL</code> statements. See <a href="chap6.html#86432">Using a Cross-Reference File for Hcell Names</a>.</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1014471"></a></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1014473"></a><code>HCELL-HEIGHT-LIM</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1014476"></a><code>YES</code><a id="marker-1014475"></a> sets a limit of 1000 microns for the maximum Hcell height. <code>NO</code> specifies that there is no height limit.</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1014478"></a></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1014481"></a><code>HCELL-MAX-SEGMENTS</code><a id="marker-1014480"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1014484"></a>S<a id="marker-1014483"></a>pecifies the maximum number of line segments for a cell to be an Hcell candidate, to avoid selecting large cells.</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1014486"></a><code>*DESCRIPTION</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1014488"></a><code>HCELL-MAX-PLACEMENTS</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1014491"></a>S<a id="marker-1014490"></a>pecifies the maximum number of placements for a cell to be an Hcell candidate, to avoid selecting small cells with a large number of placements.</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1014493"></a></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1014495"></a><code>HCELL-RULE</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1014498"></a>S<a id="marker-1014497"></a>pecifies the minimum number of placements and segments for a cell to be an Hcell candidate.</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1014500"></a></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1014503"></a><code>NOT-HCELL</code><a id="marker-1014502"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1014506"></a>S<a id="marker-1014505"></a>pecifies cells that cannot be Hcell candidates.</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1014508"></a></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1014510"></a><code>CELLBNDY</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1014512"></a>Specifies the digitized layer that contains rectilinear cell boundaries. See <a href="chap6.html#31470">Using Cell Boundaries</a>.</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1014517"></a><code>*INPUT-LAYER</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1014520"></a><code>FLATTEN</code><a id="marker-1014519"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1014523"></a>C<a id="marker-1014522"></a>reates a flat layer from a hierarchical layer. See <a href="chap6.html#83379">Flattening Layers</a>.</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1014528"></a><code>*OPERATION</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1014531"></a><code>HIERARCHEN</code><a id="marker-1014530"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1014534"></a>C<a id="marker-1014533"></a>reates a hierarchical layer from a flat layer.</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1014536"></a></p>
</td>
</tr>
</tbody></table>
<h4>
<a id="pgfId-1014540"></a><a id="56761"></a>Sp<a id="environment"></a>ecifying a Maximum Environment Value</h4>

<p>
<a id="pgfId-1014543"></a>W<a id="marker-1014541"></a>hen you run HDRC in hierarchical m<a id="marker-1014542"></a>ode, Dracula surrounds every Hcell with a box that extends beyond the Hcell for a given distance. This distance is called the &#8220;environment value.&#8221; Dracula automatically sets the environment value to be equal to the largest value used in any spacing check in the Operation block on data that has not been flattened.</p>
<p>
<a id="pgfId-1014544"></a>Composite geometries that fall within the environment area are checked as part of the Hcell, as shown:</p>

<p>
<a id="pgfId-1016629"></a></p>
<div class="webflare-div-image">
<img src="images/HcellBoundary.gif" /></div>

<p>
<a id="pgfId-1014574"></a>T<a id="marker-1014573"></a>he larger the environment value, the larger the amount of composite data that is checked for each Hcell instance.</p>
<ul><li>
<a id="pgfId-1014575"></a>To have PDRACULA warn you if the environment value exceeds the value you specify, include the <code>ENVIRONMENT-MAX</code><a id="marker-1014576"></a> function in the Description block. </li></ul>
<p>
<a id="pgfId-1014577"></a>For example:</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1014578"></a>ENVIRONMENT-MAX = 10 MIC<br />;<br />; &lt;functions omitted&gt;<br />;<br />EXT      METAL           LT  5.0      OUT      METERR55<br />ENC      CONT    METAL   LT  1.5      OUT      CONERR56<br />EXT      POLY    DIFF    LT  3.0      OUT      PLYERR57<br />EXT&#160;&#160;    PAD     METAL   LT  30.0     OUT      PADERR58</pre>

<p>
<a id="pgfId-1014579"></a>The default environment value for this job is 30 microns. In this case, Pdracula warns you that the 30 micron spacing check exceeds the maximum environment value of 10 microns. </p>
<p>
<a id="pgfId-1014580"></a>In response to the warning, you can do one of the following:</p>
<ul><li>
<a id="pgfId-1014581"></a>Leave the environment set to the default largest size. Dracula will take extra time mapping additional data to the Hcells.</li><li>
<a id="pgfId-1014582"></a>Flatten the layers used in the 30 micron check. For more information, see the &#8220;<a href="chap6.html#83379">Flattening Layers</a>&#8221; section.</li></ul>

<p>
<a id="pgfId-1014586"></a>If the <code>ENVIRONMENT-MAX</code> value you set is larger than the largest spacing check value, Dracula reduces the environment value to the lower spacing check value.</p>
<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1014588"></a>The <code>ENVIRONMENT-MAX</code> function works with HDRC hierarchical mode only.<a id="marker-1014587"></a></div>

<div class="webflare-information-macro webflare-macro-warning">
<a id="pgfId-1014590"></a>
If you set <strong>ENVIRONMENT-MAX</strong><a id="marker-1014589"></a> to 1 micron and you do a 3-micron spacing check, Dracula can miss errors. An error that is 2 microns out is not included in the environment.</div>
<h4>
<a id="pgfId-1014593"></a><a id="85032"></a>Pr<a id="no_overlap"></a>eventing Hcell Overlap</h4>

<p>
<a id="pgfId-1014595"></a>W<a id="marker-1014594"></a>hile selecting Hcells automatically, Dracula might choose overlapping cells. If the amount that two Hcells overlap is greater than half the area of either of the Hcells, Dracula chooses only one of the cells as an Hcell. Generally, Dracula chooses the cell with the least amount of overlapped data.</p>

<p>
<a id="pgfId-1016699"></a></p>
<div class="webflare-div-image">
<img src="images/JKFF_INV.gif" /></div>

<p>
<a id="pgfId-1014611"></a>Dracula expands cells that do not qualify as Hcells and brings them up to the composite level. If the cells are nested in an Hcell, Dracula brings them up to the Hcell level and maps them to that instance of the Hcell.</p>
<p>
<a id="pgfId-1014612"></a>Some designs run more efficiently in hierarchical mode if the Hcells Dracula uses do not overlap. </p>
<ul><li>
<a id="pgfId-1014613"></a>To prevent Dracula from selecting a large number of overlapping Hcells in your design using the default criteria, put the following function in the Description block of your rules file:</li></ul>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1014615"></a> E<a id="marker-1014614"></a>XCEPTION-ON = [HSP-OUTPUT]</pre>

<p>
<a id="pgfId-1014616"></a>This function prevents Dracula from choosing as an Hcell any cell that overlaps another cell.</p>
<p>
<a id="pgfId-1014617"></a>You can also include <code>EXCEPTION-ON = [HSP-OUTPUT]</code> when you use the hierarchical <code>SIZE</code><a id="marker-1014618"></a> function, so the results will be clean and correct.</p>

<h4>
<a id="pgfId-1014621"></a><a id="83379"></a>Fl<a id="flat_layers"></a>attening Layers</h4>

<p>
<a id="pgfId-1014622"></a>The <code>FLATTEN</code> function creates a new flat layer at the top level from a hierarchical layer. It is useful only in hierarchical mode. In flat mode, the <code>FLATTEN</code><a id="marker-1014623"></a> function uses the UNIX <code>cp</code> command to copy data from one file to another file with a different name.</p>
<p>
<a id="pgfId-1014624"></a>You might need to use <code>FLATTEN</code> in your HDRC rules to do</p>
<ul><li>
<a id="pgfId-1014625"></a>Large spacing checks</li><li>
<a id="pgfId-1014626"></a>Checks that require nodal information</li></ul>

<p>
<a id="pgfId-1014627"></a>You can also use <code>FLATTEN</code> in HLPE to extract capacitors between an internal cell node and a parent cell. See the &#8220;<a href="chap6.html#71639">Flattening Layers To Extract Capacitance</a>&#8221; section.</p>
<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1014631"></a>You can use both hierarchical and flat layers in the Operation block of an H<a id="marker-1014632"></a>DRC rules file, but you cannot combine hierarchical and flat layers in a single check.</div>

<h4><em>
<a id="pgfId-1014633"></a>Avoiding Flat Processing</em></h4>

<p>
<a id="pgfId-1014634"></a>If you want to take full advantage of the hierarchy of your circuit when running HDRC, y<a id="marker-1014635"></a>ou can merge any operations that require flat layers into an E<a id="marker-1014636"></a>RC job rather than including them in an HDRC job.</p>

<h4><em>
<a id="pgfId-1014637"></a>Large Spacing Checks</em></h4>

<p>
<a id="pgfId-1014638"></a>Dracula uses the spacing value for hierarchical checks to determine the environment value, as described in the section about <a href="chap6.html#56761">Specifying a Maximum Environment Value</a>. However, D<a id="marker-1014642"></a>racula does not include checks on flat layers when determining this value. </p>
<ul><li>
<a id="pgfId-1014643"></a>To do checks with large spacing values without affecting the environment value, use the <code>FLATTEN</code> function.</li></ul>
<p>
<a id="pgfId-1014645"></a>P<a id="marker-1014644"></a>ad-to-metal checks normally use large spacing values and involve many geometries. To avoid affecting the environment value, use the <code>FLATTEN</code> function on the pad and metal layers. To reduce the amount of data that you must process, which in turn reduces the processing time, use logical operations. </p>
<p>
<a id="pgfId-1014646"></a>The following example creates a layer, <em>PMET</em>, consisting of metal geometries no farther than 30 microns from the pad geometries. Then <em>PAD</em> and <em>PMET</em> are flattened and used in the 30 micron spacing check. </p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1014649"></a>; The N<a id="marker-1014647"></a>EIGHB<a id="marker-1014648"></a>OR function does these two operations:<br />; S<a id="marker-1014650"></a>IZ<a id="marker-1014651"></a>E PAD BY 30 SPAD<br />; AND SPAD METAL PMET<br />;<br />NEIGHBOR METAL PAD 30 PMET<br />;<br />; &lt;functions omitted&gt;<br />;</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1014652"></a>F<a id="marker-1014653"></a>LATTEN PAD FPAD<br />FLATTEN PMET FMET<br />E<a id="marker-1014654"></a>XT[V] FPAD FMET LT 30 OUT PADERR 58</pre>

<p>
<a id="pgfId-1014655"></a>With these functions, you can perform relatively few large dimensional checks without affecting the performance of the entire HDRC run.</p>

<p>
<a id="pgfId-1014680"></a></p>
<div class="webflare-div-image">
<img src="images/PadOversizedAndANDed.gif" /></div>
<h4><em>
<a id="pgfId-1014683"></a><a id="10300"></a>Us<a id="node_info"></a>ing Flat Layers for Nodal Information</em></h4>

<p>
<a id="pgfId-1014686"></a>Y<a id="marker-1014684"></a>ou must use flat layers for the following H<a id="marker-1014685"></a>DRC checks and operations that require nodal i<a id="marker-1014687"></a>nformation:</p>
<ul><li>
<a id="pgfId-1014689"></a><code>EXT[N]</code><a id="marker-1014688"></a></li><li>
<a id="pgfId-1014691"></a><code>ENC[N]</code><a id="marker-1014690"></a></li><li>
<a id="pgfId-1014693"></a><code>INT[N]</code><a id="marker-1014692"></a></li><li>
<a id="pgfId-1014695"></a><code>CONNECT</code><a id="marker-1014694"></a></li><li>
<a id="pgfId-1014699"></a><code>SELECT</code><a id="marker-1014696"></a><a id="marker-1014697"></a> <em>layer</em> <code>LABEL</code><a id="marker-1014698"></a></li><li>
<a id="pgfId-1014701"></a><code>STAMP</code><a id="marker-1014700"></a></li><li>
<a id="pgfId-1014704"></a><code>LINK</code><a id="marker-1014702"></a><a id="marker-1014703"></a></li></ul>






<p>
<a id="pgfId-1014705"></a>For information on different flattening requirements for HDRC and HERC, see &#8220;<a href="chap6.html#19382">Connecting the Network</a>&#8221; section.</p>

<h3>
<a id="pgfId-1014710"></a><a id="27500"></a>Checking Memories and Arrays</h3>

<p>
<a id="pgfId-1014711"></a>To process large arrays and memories, you can use the following HDRC features:</p>
<ul><li>
<a id="pgfId-1014712"></a>Multilevel mode<br />
<a id="pgfId-1014713"></a>If your designs have repetitive structures with many levels of hierarchy, such as large D<a id="marker-1014714"></a>RAMs, you can use m<a id="marker-1014715"></a>ultilevel mode for HDRC runs. For more information about using this mode, see <a href="chap4.html#46519">Using Multilevel Mode</a> in Chapter 4 of this manual.</li><li>
<a id="pgfId-1014720"></a><code>RAM-CEL</code>L function<a id="marker-1014719"></a><br />
<a id="pgfId-1014722"></a>To reduce redundant checking, y<a id="marker-1014721"></a>ou can use the <code>RAM-CELL</code> function in the Description block of your rules file. When Dracula sets up a database for HDRC, it creates an environment area for each cell, as described in <a href="chap6.html#56761">Specifying a Maximum Environment Value</a>. In an array of cells, the environment areas of the cells around the border of an array are different because they interact with the composite plane. The environment areas of the core cells, however, are all the same. The following figure illustrates an array of cells.<a id="marker-1014726"></a><br />
<a id="pgfId-1016756"></a><div class="webflare-div-image">
<img src="images/CoreCellsEnvironmentArea.gif" /></div></li></ul>







<p>
<a id="pgfId-1014806"></a>The Hcell you specify for the <code>RAM-CELL</code> function must be a repetitive cell with simple, nonrotated placements. Composite geometries cannot overlap the core Hcells in the array.<a id="marker-1014807"></a></p>

<h3>
<a id="pgfId-1014811"></a><a id="77336"></a><a id="42992"></a>Us<a id="hdrc_out"></a>ing HDRC Output</h3>

<p>
<a id="pgfId-1014814"></a>Y<a id="marker-1014812"></a>ou vi<a id="marker-1014813"></a>ew and correct errors from an HDRC run the same way you do for a flat run. The error cells can contain Hcell and composite geometries. Dracula organizes the content of the cells according to the option you specify with the <code>CELL-ERROR-REP</code> function. These options are described later in this section.</p>

<h4>
<a id="pgfId-1014815"></a>Viewing Hcell Error Cells</h4>

<p>
<a id="pgfId-1014817"></a>H<a id="marker-1014816"></a>cell error cells contain errors associated with Hcells and any pseudolayers created by l<a id="marker-1014818"></a>ogical, <code>SIZE</code><a id="marker-1014819"></a>, or <code>SELECT</code><a id="marker-1014820"></a> operations that occur for all placements of the Hcells. </p>
<p>
<a id="pgfId-1014822"></a>Dracula generates Hcell error cells when you run an H<a id="marker-1014821"></a>DRC in either of the following modes:</p>
<ul><li>
<a id="pgfId-1014825"></a>Cell m<a id="marker-1014823"></a>ode (<code>CHECK-MODE = CELL</code><a id="marker-1014824"></a>)</li><li>
<a id="pgfId-1014829"></a>Hierarchical m<a id="marker-1014826"></a>ode (<code>CHECK-MODE = HIER</code><a id="marker-1014827"></a>) with <code>CELL-ERROR-REP = HIER</code><a id="marker-1014828"></a></li></ul>

<p>
<a id="pgfId-1014830"></a>The following sample circuit contains two Hcells, INV and JKFF. There are two HDRC checks in the r<a id="marker-1014831"></a>ules file:</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1014832"></a> EXT  METAL LT  5  OUT METERR 61<br /> SIZE POLY&#160;&#160;BY .25 OUT SPOLY&#160;&#160;22</pre>

<p>
<a id="pgfId-1014870"></a>Hcell error cells from these checks appear as shown:</p>

<p>
<a id="pgfId-1016852"></a></p>
<div class="webflare-div-image">
<img width="668" height="211" src="images/chap6-7.gif" /></div>

<p>
<a id="pgfId-1014871"></a>Dracula uses the layer numbers you give for output error layers to isolate the error within the Hcell output. Each output cell contains error flags on layer<em> 61</em> and sized data on layer <em>22</em>, if applicable. The origin of these error cells is in relation to the origin of the corresponding layout cell.</p>

<h4>
<a id="pgfId-1014872"></a>Using Error Reporting Options</h4>

<p>
<a id="pgfId-1014873"></a>You can use the <code>CELL-ERROR-REP</code> options to report errors using two different hierarchy structures:</p>
<ul><li>
<a id="pgfId-1014874"></a>Original design hierarchy<br />
<a id="pgfId-1014875"></a>The <code>ORIG-ALL</code>, <code>ORIG-DRC</code>, and <em>cellname</em> options report errors using the original hierarchy of your design.</li><li>
<a id="pgfId-1014876"></a>Two-level hierarchy<br />
<a id="pgfId-1014877"></a>The <code>ONCE</code>, <code>HIER</code>, and <code>ALL</code> options report errors using the two-level hierarchy (composite plane, Hcell plane) that Dracula constructs. These options are described in the sections that follow.</li></ul>



<p>
<a id="pgfId-1014879"></a>For more information about these options, see the section about <h-hot><a actuate="user" class="URL" href="../dracularef/chap11.html#cell-error-rep" show="replace" xml:link="simple">&#8220;CELL-ERROR-REP&#8221; in the &#8220;Description Block Commands&#8221; chapter</a></h-hot> of the <em>Dracula Reference.</em></p>

<h4>
<a id="pgfId-1014880"></a>Viewing a CELL-ERROR-REP = ONCE Error Cell</h4>

<p>
<a id="pgfId-1014883"></a>W<a id="marker-1014881"></a>hen you use <code>CHECK-MODE=HIER</code><a id="marker-1014882"></a> with <code>CELL-ERROR-REP = ONCE</code> in your rules file, you get an error cell for each check. These cells contain errors that occur</p>
<ul><li>
<a id="pgfId-1014884"></a>Between two Hcells</li><li>
<a id="pgfId-1014885"></a>Between an Hcell and its environment</li><li>
<a id="pgfId-1014886"></a>Between composite-level geometries that are not Hcell-related</li><li>
<a id="pgfId-1014887"></a>At every placement of an Hcell<br />
<a id="pgfId-1016988"></a>These errors are shown in one Hcell. This Hcell is the one closest to the minimum x/y coordinate of the primary cell.<br />
<a id="pgfId-1017059"></a><div class="webflare-div-image">
<img width="635" height="342" src="images/chap6-8.gif" /></div></li></ul>







<h4>
<a id="pgfId-1014923"></a>Viewing a CELL-ERROR-REP = ALL Error Cell</h4>

<p>
<a id="pgfId-1014925"></a>T<a id="marker-1014924"></a>he error cells produced when you set <code>CELL-ERROR-REP=ALL</code> in your rules file are the same as the cells produced by a flat Dracula run.</p>

<h4>
<a id="pgfId-1014926"></a>Viewing a CELL-ERROR-REP = HIER Error Cell </h4>

<p>
<a id="pgfId-1014928"></a>When you use <code>CHECK-MODE=HIER</code><a id="marker-1014927"></a> with <code>CELL-ERROR-REP = HIER</code> in your rules file, you get</p>
<ul><li>
<a id="pgfId-1014930"></a>C<a id="marker-1014929"></a>heck error cells<br />
<a id="pgfId-1014931"></a>Dracula produces an error cell for each check. Each check error cell contains errors that occur between two Hcells or between an Hcell and its environment, but do not occur at each placement of the Hcell. Each cell also contains errors that occur between composite-level geometries that are not Hcell-related. These errors are reported flat and relative to the primary cell.</li><li>
<a id="pgfId-1014933"></a>H<a id="marker-1014932"></a>cell error cells<br />
<a id="pgfId-1014934"></a>Dracula produces an Hcell error cell for each Hcell. Each Hcell error cell contains errors that occur at every single placement of the Hcell. To see these errors at each placement of the Hcell, overlay the primary e<a id="marker-1014935"></a>rror cell, <code>OUT</code><em>primarycellname</em>, on the original database. To see a single instance, overlay the Hcell error cell on the original Hcell database cell.</li></ul>



<p>
<a id="pgfId-1014936"></a>Here is an example of checks in a rules file:</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1014937"></a>EXT METAL      LT 5 OUT METERR 61<br />EXT POLY       LT 3 OUT POLERR 62<br />ENC CONT METAL LT 2 OUT CONERR 63</pre>

<p>
<a id="pgfId-1014939"></a>T<a id="marker-1014938"></a>hese rules produce the following HDRC error cells, which you can overlay on both the Hcell and the top-level design:</p>

<p>
<a id="pgfId-1017167"></a></p>
<div class="webflare-div-image">
<img width="668" height="431" src="images/chap6-9.gif" /></div>
<h4>
<a id="pgfId-1015010"></a>Listing HDRC Text Output Files</h4>

<p>
<a id="pgfId-1015011"></a>HDRC text output includes the following files:</p>
<ul><li>
<a id="pgfId-1015014"></a><em>printfile</em><a id="marker-1015012"></a><a id="marker-1015013"></a><code>.sum</code>, the error cell summary</li><li>
<a id="pgfId-1015016"></a><em>printfile</em><a id="marker-1015015"></a><code>.log</code>, the job tracking log</li><li>
<a id="pgfId-1015019"></a><em>printfile</em><a id="marker-1015017"></a><a id="marker-1015018"></a><code>.mlg</code>, the mini-log file with CPU statistics and fatal errors</li><li>
<a id="pgfId-1015022"></a><em>printfile</em><a id="marker-1015020"></a><a id="marker-1015021"></a><code>.msm</code>, the mini-summary file with nonfatal errors and warnings</li><li>
<a id="pgfId-1015025"></a><em>printfile</em><a id="marker-1015023"></a><a id="marker-1015024"></a><code>.inp</code>, a listing of the input rules file</li></ul>




<p>
<a id="pgfId-1015029"></a>where <em>printfile</em> is the name you specify with the <code>PRINTFILE</code><a id="marker-1015026"></a><a id="marker-1015027"></a><a id="marker-1015028"></a> function in the Description block of your rules file.</p>
<p>
<a id="pgfId-1015031"></a>For a complete description and examples of HDRC output, see <h-hot><a actuate="user" class="URL" href="../dracularef/chap3.html#hdrc_errors" show="replace" xml:link="simple">&#8220;HDRC Error Reports&#8221; in the &#8220;Checking Design Rules (DRC)&#8221; chapter</a></h-hot> of the <em>Dracula Reference.</em></p>

<h2>
<a id="pgfId-1015033"></a><a id="60107"></a>Selecting Hcells</h2>

<p>
<a id="pgfId-1015034"></a>You usually let Dracula select Hcells automatically by running HDRC in hierarchical m<a id="marker-1015035"></a>ode first. If the results are not satisfactory, you might want to choose your own Hcells.</p>
<p>
<a id="pgfId-1015036"></a>To select the Hcells to use in hierarchical Dracula jobs, you need to be familiar with how Dracula forms its two-level hierarchy by creating the composite and Hcell planes. For a complete description of how Dracula chooses Hcells, see <h-hot><a actuate="user" class="URL" href="../dracularef/chap1.html#hier_structure" show="replace" xml:link="simple">&#8220;Hierarchical Structure&#8221; in the &#8220;Overview&#8221; chapter</a></h-hot> of the <em>Dracula Reference.</em></p>

<h3>
<a id="pgfId-1015039"></a><a id="57790"></a>Selecting Hcells Automatically</h3>

<p>
<a id="pgfId-1015041"></a>For hierarchical and multilevel H<a id="marker-1015040"></a>DRC, Dracula uses default selection criteria to select Hcells automatically. There is one set of criteria for hierarchical HDRC and a different set for multilevel HDRC. You can find a description of these c<a id="marker-1015042"></a>riteria, along with instructions for changing or overriding them, in the <h-hot><a actuate="user" class="URL" href="../dracularef/chap3.html#select_hcells" show="replace" xml:link="simple">&#8220;Selecting HDRC Hcells&#8221; in the &#8220;Checking Design Rules (DRC)&#8221; chapter</a></h-hot> of the <em>Dracula Reference.</em></p>
<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1015045"></a>If you are running HDRC, but you did not include an <code>HCELL</code><a id="marker-1015044"></a> function in your rules file and Dracula cannot identify any Hcells, Dracula automatically switches to flat mode.<a id="marker-1015046"></a></div>
<p>
<a id="pgfId-1015047"></a>Run HDRC with the default Hcell selection first, particularly if you are not familiar with the layout hierarchy. You can look at the following files to determine which cells Dracula chose to be Hcells:</p>
<ul><li>
<a id="pgfId-1015049"></a>The <code>CANDIDAT.DAT</code><a id="marker-1015048"></a> file lists the Hcells that Dracula chose:<br /><pre class="webflare-pre-block webflare-courier-new" id="#id1015050">
<a id="pgfId-1015050"></a>1  INV       2          1         5 0         20xxxxxxx</pre><pre class="webflare-pre-block webflare-courier-new" id="#id1015051">
<a id="pgfId-1015051"></a>2  JKFF1     8          6         9 0     xxxxxxxxxxxxxx</pre></li><li>
<a id="pgfId-1015053"></a>The EXPAND stage of the <code>.log</code><a id="marker-1015052"></a> file lists Hcell selection statistics:<br /><pre class="webflare-pre-block webflare-courier-new" id="#id1015054">
<a id="pgfId-1015054"></a>*******************************************************
*/N*    EXPAND   ( REV. 4.3        /      SUN-4 
GENDATE: 12-APR-95/13 )
*** ( Copyright 1995, Cadence ) ***
*/N*     EXEC TIME =15:37:49       DATE = 2-MAY-95 
HOSTNAME = xxxxxx
*******************************************************</pre><pre class="webflare-pre-block webflare-courier-new" id="#id1018495">
<a id="pgfId-1018495"></a>RUN-MODE   =     3
TREE-FILE  = TREEGRAY</pre><pre class="webflare-pre-block webflare-courier-new" id="#id1018496">
<a id="pgfId-1018496"></a>5.2500    0    0    0    1    0    0    0    0</pre><pre class="webflare-pre-block webflare-courier-new" id="#id1018497">
<a id="pgfId-1018497"></a>****    ENVIRONMENT =     5.2500   *****</pre><pre class="webflare-pre-block webflare-courier-new" id="#id1018486">
<a id="pgfId-1018486"></a>

*****  HCELL-SELECT-CONDITION  *****</pre><pre class="webflare-pre-block webflare-courier-new" id="#id1018487">
<a id="pgfId-1018487"></a># OF PLMTS        # OF LINE-SEGMENTS 
       2             44</pre><pre class="webflare-pre-block webflare-courier-new" id="#id1018488">
<a id="pgfId-1018488"></a># OF CELLS        :         8
# OF PLACEMENTS   :        29</pre><pre class="webflare-pre-block webflare-courier-new" id="#id1018489">
<a id="pgfId-1018489"></a>PRIMARY CELL    : GRAYCODE5 </pre><pre class="webflare-pre-block webflare-courier-new" id="#id1018490">
<a id="pgfId-1018490"></a>NUMBER OF H-CELLS =          2
:
UPDATED NUMBER OF HCELLS =          2</pre><pre class="webflare-pre-block webflare-courier-new" id="#id1018491">
<a id="pgfId-1018491"></a>NUMBER OF BOXES       =         13
NUMBER OF CELL PLMTS =         13</pre><pre class="webflare-pre-block webflare-courier-new" id="#id1018492">
<a id="pgfId-1018492"></a>NO CELL PLACEMENT WITH MAGNITUDE &lt; &gt; 1 
:
*******   CHECK BOX OVERLAP   *******</pre><pre class="webflare-pre-block webflare-courier-new" id="#id1018493">
<a id="pgfId-1018493"></a>INDIVIDUAL CELL STATISTICS         8         8</pre><pre class="webflare-pre-block webflare-courier-new" id="#id1018494">
<a id="pgfId-1018494"></a>          # OF       # OF ORIGINAL
            PLACEMENTS PLACEMENTS   LEVEL KIDS HCELL
1 GRAYCODE5 0          1            2     28   0
2 INV       5          9            1     0    1
3 NO2       0          1            1     0    0
4 PAD       0          11           1     0    0
5 ND4       0          1            1     0    0
6 ND3       0          1            1     0    0
7 ND2       0          1            1     0    0
8 JKFF1     4           4            1     0    2</pre><pre class="webflare-pre-block webflare-courier-new" id="#id1015058">
<a id="pgfId-1015058"></a></pre><pre class="webflare-pre-block webflare-courier-new" id="#id1015059">
<a id="pgfId-1015059"></a></pre><pre class="webflare-pre-block webflare-courier-new" id="#id1015060">
<a id="pgfId-1015060"></a>        # OF     # OF
      LINE-SEGSTEXTS ******** CELL BOUNDARY ********</pre><pre class="webflare-pre-block webflare-courier-new" id="#id1018566">
<a id="pgfId-1018566"></a>1 GRAYCODE57765 0         0     -1890     20060     12235
2 INV       142 0         0         0      2200       840
3 NO2       214 0         0         0      2200      1120
4 PAD        12 0         0         0      1200      1540
5 ND4       274 0         0         0      2200      1680
6 ND3       214 0         0         0      2200      1120
7 ND2       175 0         0         0      2200       840
8 JKFF1    1180 0         0         0      2940      7260</pre><pre class="webflare-pre-block webflare-courier-new" id="#id1018567">
<a id="pgfId-1018567"></a>*/M** TOTAL NUMBER OF EDGES IF FLATTENED =      7765
      NUMBER OF EDGES IN H-CELLS         =      5430
      H-CELL COVERAGE RATE               =     69.93%
      FULL HIERARCHICAL EDGES            =      2969
      2-LEVEL HIERARCHICAL EDGES         =      3657</pre><pre class="webflare-pre-block webflare-courier-new" id="#id1018568">
<a id="pgfId-1018568"></a># OF CELLS        :         8
# OF PLACEMENTS   :        29
ORIGINAL # OF PLMTS BRANCHES =         29
NEW      # OF PLMTS BRANCHES =         33
:
----------------------- HCELL CANDIDATES ---------------</pre><pre class="webflare-pre-block webflare-courier-new" id="#id1018569">
<a id="pgfId-1018569"></a>1  INV                       2             1           5
2  JKFF1                     8             6           9</pre><pre class="webflare-pre-block webflare-courier-new" id="#id1018570">
<a id="pgfId-1018570"></a>--------------------------------------------------------</pre></li></ul>

























<h3>
<a id="pgfId-1015063"></a><a id="25090"></a>Sel<a id="manual_hcells"></a>ecting Hcells Manually To Improve Performance</h3>

<p>
<a id="pgfId-1015068"></a>I<a id="marker-1015064"></a>f y<a id="marker-1015065"></a>our circuit p<a id="marker-1015066"></a>erforms poorly in hierarchic<a id="marker-1015067"></a>al mode, you might be able to improve performance by choosing different Hcells. </p>

<h4>
<a id="pgfId-1015069"></a>General Guidelines</h4>

<p>
<a id="pgfId-1015070"></a>Look for Hcells that have all of these qualities:</p>
<ul><li>
<a id="pgfId-1015071"></a>Repetitive<br />
<a id="pgfId-1015072"></a>The Hcell should be placed at least four times (more is better).</li><li>
<a id="pgfId-1015073"></a>Complex<br />
<a id="pgfId-1015074"></a>The best candidate for an Hcell contains about 5% of the total design. </li><li>
<a id="pgfId-1015075"></a>Nonoverlapping<br />
<a id="pgfId-1015076"></a>The Hcell must not overlap with other cells or noncell geometries. </li></ul>





<p>
<a id="pgfId-1015077"></a>The challenge is to find Hcells that are both complex and repetitive. If the Hcell is too simple, most of the processing time is spent on bookkeeping. A contac<a id="marker-1015078"></a>t cell is an example of a poor choice for an Hcell. The cell is repeated many times, but is too simple to improve the processing time for a hierarchical check.</p>
<p>
<a id="pgfId-1015080"></a>Try to pick Hcells that are near the middle of the h<a id="marker-1015079"></a>ierarchy tree. The cells at the bottom of the hierarchy might have many instances, but they are very simple. Cells near the top of the hierarchy are complex, but may only be placed a few times.</p>
<p>
<a id="pgfId-1015082"></a>Choose few Hcells rather than many. For m<a id="marker-1015081"></a>emory-based designs, for example, a single Hcell is the best choice.</p>

<h4>
<a id="pgfId-1015083"></a>Getting Started</h4>
<ol><li>
<a id="pgfId-1015084"></a>Start with the basic <code>HCELL-RULE</code> function.<br />
<a id="pgfId-1015085"></a>If you have never selected your own Hcells, the following is a good rule to start with. The rule specifies that, to qualify as an Hcell, a cell must be placed more than 5 times if it contains more than 1000 segments, or more than 10 times if it contains more than 500 segments.<pre class="webflare-pre-block webflare-courier-new" id="#id1015086">
<a id="pgfId-1015086"></a>HCELL-RULE 5,1000 10,500</pre></li><li>
<a id="pgfId-1015087"></a>Check the log file for the Hcell area coverage rate.<br />
<a id="pgfId-1018571"></a>After you run Dracula using these criteria, look at the <code>EXPAND</code> stage of the <code>.log</code> file. This part of the file tells you how much of the total area of your design is covered by Hcells that were selected using your criteria. In the following example, the coverage rate is 86.08%.<pre class="webflare-pre-block webflare-courier-new" id="#id1018572">
<a id="pgfId-1018572"></a>*/M** TOTAL NUMBER OF EDGES IF FLATTENED =      7673
      NUMBER OF EDGES IN H-CELLS         =      6605
      H-CELL COVERAGE RATE               =      86.08%
      FULL HIERARCHICAL EDGES            =      2959
      2-LEVEL HIERARCHICAL EDGES          =      3039</pre>
<a id="pgfId-1015090"></a>Try to pick Hcells to increase the coverage rate and decrease the number of Hcells listed in the <code>CANDIDAT.DAT</code> file. You want the number of Hcells listed to be less than 200.</li></ol>










<h2>
<a id="pgfId-1015093"></a><a id="16890"></a>Ru<a id="multi_drc"></a>nning a Multilevel Design Rule Check</h2>

<p>
<a id="pgfId-1015095"></a>For designs on which the standard two-level HDR<a id="marker-1015094"></a>C does not run as efficiently as you want, you can use multilevel HDRC. Memory chips where overlap is minimal are the best candidates for multilevel HDRC, as described in <a href="chap4.html#46519">&#8220;Using Multilevel Mode&#8221;</a>.</p>

<h3>
<a id="pgfId-1015100"></a><a id="92097"></a>Understanding Multilevel Processing</h3>

<p>
<a id="pgfId-1015101"></a>To process a multilevel design, Dracula creates multiple two-level hierarchies, starting at the top level. The following figure shows the first level of a multilevel design. Dracula creates the composite layer on the top level. It creates frames for the Hcells and checks the composite layer and its connections to the Hcell frames.</p>

<p>
<a id="pgfId-1017433"></a></p>
<div class="webflare-div-image">
<img width="668" height="260" src="images/chap6-10.gif" /></div>

<p>
<a id="pgfId-1015121"></a>The size of the Hcell environment area is the largest spacing value in a hierarchical DRC check (see <a href="chap6.html#56761">Specifying a Maximum Environment Value</a>). However, if there are intrusions into the Hcell, the spacing value is increased.</p>
<p>
<a id="pgfId-1015125"></a>When Dracula has checked the top level, it goes to the next level, which is the <em>cellA</em> Hcell in the previous example. Treating <em>cellA</em> as the top level, Dracula again creates a composite plane with frames around the Hcells that <em>cellA</em> contains. Dracula continues down the hierarchy in this fashion.</p>

<p>
<a id="pgfId-1017474"></a></p>
<div class="webflare-div-image">
<img width="668" height="198" src="images/chap6-11.gif" /></div>
<h3>
<a id="pgfId-1015152"></a><a id="63245"></a>Running a Multilevel Hierarchical DRC</h3>

<p>
<a id="pgfId-1015155"></a>You can use an HDRC rules file for multilevel HDRC. See <a href="chap6.html#85929">Running a Hierarchical Design Rule Check</a>.</p>
<p>
<a id="pgfId-1015158"></a>To run a multilevel HDRC, see <h-hot><a actuate="user" class="URL" href="../dracularef/chap3.html#multilevel" show="replace" xml:link="simple">&#8220;Multilevel Mode&#8221; in the &#8220;Checking Design Rules (DRC)&#8221; chapter</a></h-hot> of the <em>Dracula Reference.</em></p>

<h2>
<a id="pgfId-1015162"></a><a id="17810"></a>Run<a id="hier_erc"></a>ning a Hierarchical <a id="marker-1015161"></a>Electrical Rules Check</h2>

<p>
<a id="pgfId-1015163"></a>To check the electrical parameters of a circuit, you use hierarchical Dracula in the same way you use flat Dracula. You verify your cells prior to verifying the top-level design. Then, when you verify the top-level design, Dracula treats cells as blocks with pin names only, and checks only the external connections to other blocks.</p>

<h3>
<a id="pgfId-1015165"></a><a id="45003"></a>Writing Hierarchical Electrical Rules</h3>

<p>
<a id="pgfId-1015167"></a>The r<a id="marker-1015166"></a>ules file you use for an HERC run is the same as the rules file for a flat run, with the addition of several hierarchy-related functions. The following table lists the Dracula hierarchical functions that you might want to include. For more information about these functions, see the <em>Dracula Reference Manual</em>.</p>
<p>
<a id="pgfId-1015170"></a>In cell or composite m<a id="marker-1015168"></a>odes, H<a id="marker-1015169"></a>ERC functions can be run with HLVS and HLPE functions in the same rules file, because they use the same mechanism for defining Hcell and cell text</p>

<p>
<a id="pgfId-1018943"></a>.</p>
<table class="webflareTable" id="#id1015171">
<caption style="text-align:left;"><p>
</p><div class="ft-figtabl-title">
<a id="pgfId-1015176"></a>Hierarchical Functions for HERC </div></caption>
<tbody><tr>
<th class="webflareTh" colspan="1" rowspan="1">
<span class="tbl-head" id="#id1015182">
<a id="pgfId-1015182"></a>Function</span>
</th>
<th class="webflareTh" colspan="1" rowspan="1">
<span class="tbl-head" id="#id1015184">
<a id="pgfId-1015184"></a>Description</span>
</th>
<th class="webflareTh" colspan="1" rowspan="1">
<span class="tbl-head" id="#id1015186">
<a id="pgfId-1015186"></a>Rules file block</span>
</th>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1015188"></a><code>CELL-CHILD-TEXT</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1015191"></a>C<a id="marker-1015190"></a>ell mode only. For a description of this function, see <a href="chap4.html#25591">Bringing Text Up to the Hcell Level</a>. (Not recommended &#8212; causes HERC errors.)</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1015196"></a><code>*DESCRIPTION</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1015198"></a><code>CELLBOX-LAYER</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1015202"></a>C<a id="marker-1015200"></a>reates cell b<a id="marker-1015201"></a>oundaries for each Hcell in the <code>OUTDISK</code> file. See the section about <a href="chap6.html#31470">Using Cell Boundaries</a>.</p>
<p>
<a id="pgfId-1015206"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1015208"></a></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1015210"></a><code>CHECK-MODE</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1015213"></a>S<a id="marker-1015212"></a>et to <code>CELL</code> or <code>COMPOSITE</code> for HERC.</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1015215"></a><code>*DESCRIPTION</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1015218"></a><code>FLATTEN-PWRGND</code><a id="marker-1015217"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1015221"></a>C<a id="marker-1015220"></a>omposite mode only. For a description of this function, see <a href="chap6.html#26901">Flattening Power and Ground Text</a>.</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1015226"></a></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1015228"></a><code>HCELL</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1015231"></a>S<a id="marker-1015230"></a>pecifies which cells are Hcells. Mandatory for HERC. (<code>FRAME BY</code> option not recommended &#8212; causes HERC errors.) See <a href="chap6.html#94094">Altering the Hcell Selection Criteria</a>.</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1015236"></a></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1015238"></a><code>HCELL-FILE</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1015241"></a>S<a id="marker-1015240"></a>pecifies a file containing a set of <code>HCELL</code> statements. See <a href="chap6.html#12545">Using a Cross-Reference File for Hcell Names</a>.</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1015246"></a></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1015249"></a><code>BASE-LAYER</code><a id="marker-1015248"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1015252"></a>S<a id="marker-1015251"></a>pecifies layers containing composite-level geometries that must be mapped into Hcells. See <a href="chap6.html#32674">Using Composite Plane Geometries in Hcells</a>.</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1015257"></a><code>*INPUT-LAYER</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1015259"></a><code>CELLBNDY</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1015261"></a>Specifies the digitized layer that contains rectilinear cell boundaries. See <a href="chap6.html#31470">Using Cell Boundaries</a>.</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1015266"></a><code>*INPUT-LAYER</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1015268"></a><code>CTEXT</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1015271"></a>S<a id="marker-1015270"></a>pecifies the input layer number of Hcell text.</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1015273"></a></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1015275"></a><code>HEDTEXT</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1015277"></a>Specifies the file containing Hcell text.</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1015279"></a><code>*OPERATION</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1015281"></a><code>FLATTEN</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1015284"></a>C<a id="marker-1015283"></a>reates a flat layer from a hierarchical layer.</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1015286"></a></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1015288"></a><code>XBOX</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1015290"></a>Checks for composite geometries on the specified layer that touch or overlap Hcell bounding boxes.</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1015292"></a></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1015294"></a><code>XCELL</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1015296"></a>Checks for geometries from the layer1 composite plane that overlap Hcell layer2 geometries. Checks for geometries from the layer2 composite plane that overlap Hcell layer1 geometries.</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1015298"></a></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1015300"></a><code>XDEVICE</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1015302"></a>Outputs composite-to-cell and cell-to-cell devices that are not present in the schematics. Composite mode only.</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1015304"></a></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1015306"></a><code>XVIA</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1015308"></a>Checks for contacts that are not covered by a related conductor layer in either the composite plane or Hcells.</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1015310"></a><code>*OPERATION</code></p>
</td>
</tr>
</tbody></table>
<h3>
<a id="pgfId-1015312"></a><a id="52252"></a>Deciding What To Check</h3>

<p>
<a id="pgfId-1015314"></a>When you run H<a id="marker-1015313"></a>ERC in cell mode, Dracula verifies only the Hcells in your database.</p>
<p>
<a id="pgfId-1015315"></a>When you run HERC in composite mode, Dracula does the following:</p>
<ul><li>
<a id="pgfId-1015316"></a>Checks the interconnect between Hcells</li><li>
<a id="pgfId-1015317"></a>Checks cells that are not defined as Hcells</li><li>
<a id="pgfId-1015322"></a>Runs <code>SAMELAB</code>, <code>MULTILAB</code>, <code>SOFTCHK</code><a id="marker-1015318"></a><a id="marker-1015319"></a>, <code>ELCOUNT</code><a id="marker-1015320"></a>, and <code>PATHCHK</code><a id="marker-1015321"></a> checks on the Hcell contents</li></ul>


<p>
<a id="pgfId-1015323"></a>For a complete verification, you must run both cell mode and composite mode HERC. All checks that you run in composite mode must be the same checks you ran in cell mode.</p>

<h3>
<a id="pgfId-1015326"></a><a id="19382"></a>Co<a id="connect_net"></a>nnecting the Network</h3>

<p>
<a id="pgfId-1015328"></a>A<a id="marker-1015327"></a>lthough you need to flatten layers to do nodal checks in HDRC, you do not need to flatten the layers you use in <code>CONNECT</code><a id="marker-1015329"></a> functions for HERC and HLVS.</p>
<p>
<a id="pgfId-1015331"></a>HDR<a id="marker-1015330"></a>C doesn&#8217;t use Hcell text labels. In the following figure, <em>A</em>, <em>B</em>, and <em>C</em> are all on the same node. The B geometry in the Hcell has text labels on both sides of the Hcell boundary. In a composite mode HDRC, however, Dracula ignores the boundary text and treats <em>A</em> and <em>C</em> as two different nodes, unless you flatten the layers.</p>

<p>
<a id="pgfId-1017543"></a></p>
<div class="webflare-div-image">
<img src="images/flattenTheLayers.gif" /></div>

<p>
<a id="pgfId-1015343"></a>H<a id="marker-1015342"></a>ERC and HLVS require and work with labelled Hcell boundaries. For HERC and HLVS, Dracula makes the connection from the text on the Hcell boundary. HERC/HLVS treat <em>A</em>, <em>B</em>, and <em>C</em> as one node, without requiring flat layers.</p>

<h3>
<a id="pgfId-1015346"></a><a id="26901"></a>Fl<a id="flat_pwr_gnd"></a>attening Power and Ground Text</h3>

<p>
<a id="pgfId-1015348"></a>You can flatten the p<a id="marker-1015347"></a>ower and ground text from the Hcell level to the composite level. This feature is useful in the following cases:</p>
<ul><li>
<a id="pgfId-1015349"></a>You are running a composite mode HERC and you have not texted the top-level structure</li><li>
<a id="pgfId-1015350"></a>You want additional text on the composite plane</li><li>
<a id="pgfId-1015352"></a>To flatten power and ground text to the composite level, incl<a id="marker-1015351"></a>ude this function in the Description block of your Dracula rules file:</li></ul>



<pre class="webflare-courier-new codeContent">
<a id="pgfId-1015353"></a>    FLATTEN-PWRGND = YES</pre>

<p>
<a id="pgfId-1015354"></a>In the following example, <em>VDD</em> and <em>VSS</em> from both Hcells are expanded up to the composite level for use with composite mode HERC. If there is a power or ground short from the <code>MULTILAB</code> function, the output error cell, which lists the shortest distance between two texted points, might be shorter because you have more text. See <a href="chap6.html#91711">Viewing the SHORTBOX Cell</a>.</p>

<p>
<a id="pgfId-1017585"></a></p>
<div class="webflare-div-image">
<img width="668" height="247" src="images/chap6-13.gif" /></div>
<h3>
<a id="pgfId-1015394"></a><a id="71549"></a>Excluding Hce<a id="marker-1015393"></a>ll Geometries in HERC</h3>

<p>
<a id="pgfId-1015396"></a>Although you can use the <code>FRAME BY</code><a id="marker-1015395"></a> option with the <code>HCELL</code> function to remove Hcell geometries from processing, there are reasons to avoid this option in HERC:</p>
<ul><li>
<a id="pgfId-1015398"></a>If c<a id="marker-1015397"></a>ell text is placed within the area of the Hcell that is excluded from processing, the text is also excluded, so nodal information is not available.</li><li>
<a id="pgfId-1015399"></a>If you have routing over your Hcells, shorts between composite nodes and nodes inside the core of the Hcell are not flagged because the core is excluded from processing.</li></ul>

<p>
<a id="pgfId-1015400"></a>The <code>FRAME BY</code> option causes false HERC errors and is not recommended for an HERC run.</p>

<h3>
<a id="pgfId-1015403"></a><a id="32674"></a>Us<a id="comp_hcell"></a>ing Composite Plane Geometries in Hcells</h3>

<p>
<a id="pgfId-1015405"></a>I<a id="marker-1015404"></a>n hierarchical Dracula, you can form devices solely within Hcells or solely on the composite plane, but not between the composite plane and Hcells. However, you can use the <code>BASE-LAYER</code> function to include portions of composite geometries in your Hcells to form devices.</p>
<p>
<a id="pgfId-1015406"></a>You might want to create a flat layer on an otherwise hierarchical circuit. For example, you can create cells in a pwell CMOS process that have no pwell layer. Then, after you create the entire circuit, you can create the pwell layer as a flat layer where needed. You need to map the flat or composite pwell geometries to the Hcell so that the Hcell is complete and n-channel devices can be formed in the Hcells.</p>
<ul><li>
<a id="pgfId-1015408"></a>To correctly m<a id="marker-1015407"></a>ap composite-plane geometries on a layer to Hcells, use the <code>BASE-LAYER</code> function. </li></ul>
<p>
<a id="pgfId-1015409"></a>For example:</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1015410"></a>*INPUT-LAYER<br />ACTIVE = 1<br />POLY   = 2 TEXT = 61 ATTACH = METAL<br />METAL  = 3<br />PWELL  = 6<br />BASE-LAYER = PWELL<br />CONNECT-LAYERS = NSUB PWELL PSD NSD POLY METAL<br />* END<br />*OPERATION<br />;<br />; &lt;functions omitted&gt;<br />;<br />ELEMENT MOS[N] NGATE POLY NSD PWELL<br />*END</pre>

<p>
<a id="pgfId-1015411"></a>You need the pwell layer to form the body of n-channel devices in the Hcells. Dracula includes overlapping portions of the pwell layer from the composite plane in the Hcells, as shown in the following figure.</p>

<p>
<a id="pgfId-1015467"></a></p>
<div class="webflare-div-image">
<img src="images/PwellRemainingOnComposite.gif" /></div>

<p>
<a id="pgfId-1015470"></a>If you use the <code>BASE-LAYER</code><a id="marker-1015468"></a> function in cell mode, you must also use it in the subsequent composite mode run to ensure proper verification.<a id="marker-1015469"></a></p>
<p>
<a id="pgfId-1015472"></a>For a complete description of this function, see the section about the <h-hot><a actuate="user" class="URL" href="../dracularef/chap12.html#base-layer" show="replace" xml:link="simple">&#8220;BASE-LAYER&#8221; function in the &#8220;Input-Layer Block Commands&#8221; chapter </a></h-hot>of the <em>Dracula Reference.</em></p>

<h3>
<a id="pgfId-1015474"></a><a id="64022"></a>Using HERC Output</h3>

<p>
<a id="pgfId-1015477"></a>Y<a id="marker-1015475"></a>ou v<a id="marker-1015476"></a>iew and correct errors from an HERC run the same way you do for a flat run. The error cells can contain Hcell and composite geometries.</p>

<h4>
<a id="pgfId-1015478"></a>Viewing Cell Mode Error Cells</h4>

<p>
<a id="pgfId-1015480"></a>A s<a id="marker-1015479"></a>ample circuit contains two Hcells, <em>INV</em> and <em>JKFF</em>. The rules file contains this HERC check:</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1015483"></a>M<a id="marker-1015481"></a>ULTIL<a id="marker-1015482"></a>AB OUTPUT MULLAB 52</pre>

<p>
<a id="pgfId-1015485"></a>When you include checks that have n<a id="marker-1015484"></a>odal-type output, such as <code>MULTILAB</code>, Dracula produces multiple layers for that check. For example, if your design has 7 connect layers and 4 contact layers, Dracula outputs 11 different layers to carry the nodal information. The <em>INV_CEL</em> and <em>JKFF_CEL</em> output cells in the following figure contain layers <em>52</em><a id="marker-1015486"></a> to <em>62</em>, which all have geometries from the <em>MULTILAB</em> check.</p>

<p>
<a id="pgfId-1017645"></a></p>
<div class="webflare-div-image">
<img width="668" height="210" src="images/chap6-15.gif" /></div>

<p>
<a id="pgfId-1015585"></a>To find out what the output layers are, look in your <em>printfile</em><code>.erc</code> file <code>MULTILAB</code> summary. The layer numbers start at the layer number you specify for the <code>MULTILAB</code> output cell, and increment by one. In the following example, the output layer number the user specified was 40. There were 3 contact layers specified in <code>CONNECT</code> functions and 6 connection layers specified in the <code>CONNECT-LAYER</code> function. The last layer is the <code>SHORTBOX</code> cell, described in <a href="chap6.html#91711">Viewing the SHORTBOX Cell</a>.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1015589"></a>***** MULTILAB SUMMARY *****</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1015590"></a></pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1015591"></a>0 TRAPEZOIDS ARE SELECTED FROM 3METAL&#160;&#160; TO SHORTS40 AT LAYER&#160;&#160; 40</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1015592"></a>0 TRAPEZOIDS ARE SELECTED FROM 3POLY&#160;&#160;  TO SHORTS40 AT LAYER   41</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1015593"></a>0 TRAPEZOIDS ARE SELECTED FROM 3PSD&#160;&#160;   TO SHORTS40 AT LAYER   42</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1015594"></a>0 TRAPEZOIDS ARE SELECTED FROM 3NSD&#160;&#160;   TO SHORTS40 AT LAYER   43</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1015595"></a>0 TRAPEZOIDS ARE SELECTED FROM 3PWELL&#160;&#160; TO SHORTS40 AT LAYER&#160;&#160; 44</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1015596"></a>0 TRAPEZOIDS ARE SELECTED FROM 3NSUB&#160;&#160;  TO SHORTS40 AT LAYER   45</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1015597"></a>0 TRAPEZOIDS ARE SELECTED FROM 030CONT&#160;&#160;TO SHORTS40 AT LAYER&#160;&#160; 46</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1015598"></a>0 TRAPEZOIDS ARE SELECTED FROM 030NTAP&#160;&#160;TO SHORTS40 AT LAYER&#160;&#160; 47</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1015599"></a>0 TRAPEZOIDS ARE SELECTED FROM 030PTAP&#160;&#160;TO SHORTS40 AT LAYER&#160;&#160; 48</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1015600"></a>0 TRAPEZOIDS ARE SELECTED FROM SHORTBOX TO SHORTS40 AT LAYER&#160;&#160; 49</pre>
<h4>
<a id="pgfId-1015601"></a>Viewing Composite Mode Error Cells</h4>

<p>
<a id="pgfId-1015602"></a>For the following HERC rules</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1015603"></a>MULTILAB OUTPUT SHORTS 52 1<br />SAMELAB&#160;&#160;OUTPUT OPENS&#160;&#160;41 2</pre>

<p>
<a id="pgfId-1015623"></a>the c<a id="marker-1015604"></a>omposite error cells for HERC are organized as follows.</p>

<p>
<a id="pgfId-1017786"></a></p>
<div class="webflare-div-image">
<img width="668" height="169" src="images/chap6-16.gif" /></div>

<p>
<a id="pgfId-1015626"></a>The results of <code>ELCOUNT</code><a id="marker-1015624"></a> and <code>PATHCHK</code><a id="marker-1015625"></a> on the Hcell plane are passed to the pins of the Hcells. Any composite node connecting to those Hcell pins combines the pin information with the composite node.</p>

<h4>
<a id="pgfId-1015629"></a><a id="91711"></a>Vie<a id="shortbox"></a>wing the SHORTBOX Cell</h4>

<p>
<a id="pgfId-1017889"></a>The <code>MULTILAB</code><a id="marker-1017887"></a> error output shows the composite geometries that represent the shortest path between two texted points where a short occurred. When you include a <code>MULTILAB</code><a id="marker-1017888"></a> check in your H<a id="marker-1017890"></a>ERC rules file, Dracula creates a cell called <code>SHORTBOX</code><a id="marker-1017891"></a>. The <code>SHORTBOX</code> cell contains the cell bounding boxes through which the composite node passed. Overlay this cell on with your <code>MULTILAB</code> error cell to locate errors, as shown in the right side of the following figure.</p>

<p>
<a id="pgfId-1017958"></a></p>
<div class="webflare-div-image">
<img width="668" height="322" src="images/chap6-17.gif" /></div>
<h4>
<a id="pgfId-1015667"></a>Listing HERC Text Output Files</h4>

<p>
<a id="pgfId-1015668"></a>HERC text output includes the following files:</p>
<ul><li>
<a id="pgfId-1015671"></a><code>printfile.sum</code><a id="marker-1015669"></a><a id="marker-1015670"></a>, the error cell summary</li><li>
<a id="pgfId-1015674"></a><code>printfile.erc</code><a id="marker-1015672"></a><a id="marker-1015673"></a>, the HERC summary report containing <code>SOFTCHK</code> results, text information, shorts, opens, and error cell summaries</li><li>
<a id="pgfId-1015677"></a><code>printfile.log</code><a id="marker-1015675"></a><a id="marker-1015676"></a>, the job tracking log</li><li>
<a id="pgfId-1015680"></a><code>printfile.mlg</code><a id="marker-1015678"></a><a id="marker-1015679"></a>, the mini-log file with CPU statistics and fatal errors</li><li>
<a id="pgfId-1015683"></a><code>printfile.msm</code><a id="marker-1015681"></a><a id="marker-1015682"></a>, the mini-summary file with nonfatal errors and warnings</li><li>
<a id="pgfId-1015686"></a><em>printfile</em><a id="marker-1015684"></a><a id="marker-1015685"></a><code>.inp</code>, a listing of the input rules file</li></ul>





<p>
<a id="pgfId-1015688"></a>where <em>printfile</em> is the name you specify with the <code>PRINTFILE</code><a id="marker-1015687"></a> function in the Description block of your rules file.</p>
<p>
<a id="pgfId-1015690"></a>For information about HERC output, see <h-hot><a actuate="user" class="URL" href="../dracularef/chap4.html#herc_commands" show="replace" xml:link="simple">&#8220;HERC Commands&#8221; in the &#8220;Checking Electrical Rules (ERC)&#8221; chapter</a></h-hot> of the <em>Dracula Reference.</em></p>

<h2>
<a id="pgfId-1015693"></a><a id="65090"></a>Running a Hierarchical <a id="marker-1015692"></a>Network Comparison</h2>

<p>
<a id="pgfId-1015694"></a>To completely verify the connectivity of a circuit, you use hierarchical Dracula in the same way you use flat Dracula. You verify your cells prior to verifying the top-level design.</p>
<p>
<a id="pgfId-1015696"></a>For more information about HLVS, see <h-hot><a actuate="user" class="URL" href="../dracularef/chap6.html#hier_lvs" show="replace" xml:link="simple">&#8220;Hierarchical LVS&#8221; in the &#8220;Comparing Layouts and Schematics (LVS)&#8221; chapter</a></h-hot> of the <em>Dracula Reference.</em></p>

<h3>
<a id="pgfId-1015698"></a><a id="19934"></a>Writing Hierarchical Network Comparison Rules</h3>

<p>
<a id="pgfId-1015700"></a>T<a id="marker-1015699"></a>he rules file you use for an HLVS run is the same as a rules file for a flat run, with the addition of several hierarchy-related functions. The following table lists the Dracula hierarchical functions that you might want to include in your rules file for an HLVS run. For complete documentation about these functions, see the <h-hot><a actuate="user" class="URL" href="../dracularef/dracularefTOC.html#firstpage" show="replace" xml:link="simple">Dracula Reference.</a></h-hot></p>
<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1015702"></a>You cannot form devices by overlapping two Hcells. You can form elements in the Hcells or on the composite plane, but not between a combination of the two. The <code>BASE-LAYER</code> function is the only exception to this rule<a id="marker-1015703"></a></div>

<p>
<a id="pgfId-1018945"></a>.</p>
<table class="webflareTable" id="#id1015704">
<caption style="text-align:left;"><p>
</p><div class="ft-figtabl-title">
<a id="pgfId-1015710"></a>H<a id="hlvs_table"></a>ierarchical Functions for HLVS </div></caption>
<tbody><tr>
<th class="webflareTh" colspan="1" rowspan="1">
<span class="tbl-head" id="#id1015716">
<a id="pgfId-1015716"></a>Function</span>
</th>
<th class="webflareTh" colspan="1" rowspan="1">
<span class="tbl-head" id="#id1015718">
<a id="pgfId-1015718"></a>Description</span>
</th>
<th class="webflareTh" colspan="1" rowspan="1">
<span class="tbl-head" id="#id1015720">
<a id="pgfId-1015720"></a>Rules file block</span>
</th>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1015723"></a><code>CELL-CHILD-TEXT</code><a id="marker-1015722"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1015726"></a>C<a id="marker-1015725"></a>ell mode only. For a description of this function, see <a href="chap4.html#44953">Using Cell Mode</a> in Chapter 4.</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1015731"></a><code>*DESCRIPTION</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1015733"></a><code>CELLBOX-LAYER</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1015736"></a>C<a id="marker-1015735"></a>reates cell boundaries for each Hcell. See the section about <a href="chap6.html#31470">Using Cell Boundaries</a>.</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1015741"></a></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1015743"></a><code>CHECK-MODE</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1015746"></a>S<a id="marker-1015745"></a>et to <code>CELL</code> or <code>COMPOSITE</code>.</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1015748"></a></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1015752"></a><code>GEN-TEXT-FILE</code><a id="marker-1015750"></a><a id="marker-1015751"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1015755"></a>I<a id="marker-1015754"></a>nstructs Dracula to automatically text Hcells and place the text in a H<a id="marker-1015756"></a>EDTEXT file. See &#8220;Using GEN-TEXT To Hcell Text&#8221;.</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1015761"></a></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1015764"></a><code>GEN-TEXT-FLTNODE</code><a id="marker-1015763"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1015767"></a><code>YES</code><a id="marker-1015766"></a> assigns text to feedthroughs and floating nodes. <code>NO</code> disables this option.</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1015769"></a></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1015772"></a><code>GEN-TEXT-FRAME</code><a id="marker-1015771"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1015775"></a>G<a id="marker-1015774"></a>enerates a frame inside Hcell boundaries for automatic texting.</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1015777"></a></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1015780"></a><code>GEN-TEXT-WIRE</code><a id="marker-1015779"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1015783"></a><code>YES</code><a id="marker-1015782"></a> automatically generates internal-wire and must-join wire types. <code>NO</code><a id="marker-1015784"></a> disables this option.</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1015786"></a><code>*DESCRIPTION</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1015789"></a><code>HCELL</code><a id="marker-1015788"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1015792"></a>S<a id="marker-1015791"></a>pecifies which cells are Hcells. See &#8220;Altering the Hcell Selection Criteria&#8221;. </p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1015797"></a></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1015800"></a><code>HCELL-COLUMN-1</code><a id="marker-1015799"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1015803"></a>SVS only. S<a id="marker-1015802"></a>pecifies whether the first column in the <code>HCELL-FILE</code> lists layout or schematic cells.</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1015805"></a></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1015808"></a><code>HCELL-FILE</code><a id="marker-1015807"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1015811"></a>S<a id="marker-1015810"></a>pecifies a file containing a set of <code>HCELL</code> statements. See <a href="chap6.html#86432">Using a Cross-Reference File for Hcell Names</a>.</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1015816"></a></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1015819"></a><code>HCELL-HEIGHT-LIM</code><a id="marker-1015818"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1015822"></a><code>YES</code><a id="marker-1015821"></a> sets a limit of 1000 microns for the maximum Hcell height. <code>NO</code> specifies that there is no height limit.</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1015824"></a></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1015827"></a><code>HCELL-MAX-SEGMENTS</code><a id="marker-1015826"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1015830"></a>S<a id="marker-1015829"></a>pecifies the maximum number of line segments for a cell to be an Hcell candidate, to avoid selecting large cells.</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1015832"></a></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1015835"></a><code>HCELL-MAX-PLACEMENTS</code><a id="marker-1015834"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1015838"></a>S<a id="marker-1015837"></a>pecifies the maximum number of placements for a cell to be an Hcell candidate, to avoid selecting small cells with a large number of placements.</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1015840"></a><code>*DESCRIPTION</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1015842"></a><code>BASE-LAYER</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1015845"></a>S<a id="marker-1015844"></a>pecifies layers containing composite-level geometries that must be mapped into Hcells. See &#8220;Using Composite Plane Geometries in Hcells&#8221;. </p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1015850"></a><code>*INPUT-LAYER</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1015852"></a><code>CELLBNDY</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1015854"></a>Specifies the digitized layer that contains rectilinear cell boundaries. See &#8220;Using Cell Boundaries&#8221;.</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1015859"></a></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1015861"></a><code>CTEXT</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1015864"></a>S<a id="marker-1015863"></a>pecifies the input layer number of the Hcell text.</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1015866"></a></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1015869"></a><code>GEN-TEXT-LAYER</code><a id="marker-1015868"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1015874"></a>C<a id="marker-1015871"></a>ell mode only. See <a href="chap4.html#51562">Specifying Texting Layers</a> in Chapter 4 of this manual.</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1015877"></a></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1015879"></a><code>HEDTEXT</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1015882"></a>S<a id="marker-1015881"></a>pecifies the name of the Hcell text file.</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1015884"></a><code>*OPERATION</code></p>
</td>
</tr>
</tbody></table>

<p>
<a id="pgfId-1015885"></a>For complete verification, you must run both cell mode and composite mode HLVS. </p>
<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1015887"></a>Each Hcell must have a corresponding <code>.SUBCKT</code><a id="marker-1015886"></a> definition in a SPICE/CDL netlist. In composite mode, only the I/Os are required, not the transistors. All I/Os defined in the netlist must be texted on the Hcell with the same name. For more information about texting Hcells, see <a href="chap4.html#24366">Texting for Cell Mode</a> in Chapter 4 of this manual.</div>

<h3>
<a id="pgfId-1015892"></a><a id="40648"></a>HLVS Prerequisites</h3>

<p>
<a id="pgfId-1015894"></a>See <h-hot><a actuate="user" class="URL" href="../dracularef/chap6.html#hier_lvs" show="replace" xml:link="simple">&#8220;Hierarchical LVS&#8221; in the &#8220;Comparing Layouts and Schematics (LVS)&#8221; chapter</a></h-hot> of the <em>Dracula Reference </em>for the following information:</p>
<ul><li>
<a id="pgfId-1015895"></a>A list of the files you need to run HLVS</li><li>
<a id="pgfId-1015897"></a>A complete listing of an HLVS r<a id="marker-1015896"></a>ules file</li></ul>

<p>
<a id="pgfId-1015899"></a>You <a id="marker-1015898"></a>might want to create separate composite- and cell-mode rules files, because some functio<a id="marker-1015900"></a>ns might be different between the two files.</p>
<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1015901"></a><code>GEN-TEXT-FILE</code>, <code>HEDTEXT</code>, and <code>CTEXT</code>/<code>ATTACH</code> can be used in both files, depending upon your application.</div>
<table class="webflareTable" id="#id1015902">
<caption style="text-align:left;"><p>
</p><div class="ft-figtabl-title">
<a id="pgfId-1018635"></a>Functions for Cell Mode HLVS</div></caption>
<tbody><tr>
<th class="webflareTh" colspan="1" rowspan="1">
<span class="tbl-head" id="#id1018641">
<a id="pgfId-1018641"></a>Type</span>
</th>
<th class="webflareTh" colspan="1" rowspan="1">
<span class="tbl-head" id="#id1018643">
<a id="pgfId-1018643"></a>Function</span>
</th>
<th class="webflareTh" colspan="1" rowspan="1">
<span class="tbl-head" id="#id1018645">
<a id="pgfId-1018645"></a>Reference</span>
</th>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1018647"></a>mode</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1018649"></a><code>CHECK-MODE = CELL</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1018651"></a>None</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1018653"></a>Hcells</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1018655"></a><code>HCELL </code><em>layout</em><code> </code><em>netlist</em></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1018659"></a>See <a href="chap6.html#86432">Using a Cross-Reference File for Hcell Names</a>.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1018662"></a>texting</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1018665"></a><code>GEN-TEXT-FILE = </code><a id="marker-1018664"></a><em>filename</em></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1018669"></a>See &#8220;Using GEN-TEXT To Generate Hcell Text&#8221; in Chapter 4 of this manual.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1018672"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1018674"></a><em>layername</em><code> = # <br />CTEXT = # <br />ATTACH = </code><em>layer</em></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1018676"></a></p>
</td>
</tr>
</tbody></table>
<table class="webflareTable" id="#id1015946">
<caption style="text-align:left;"><p>
</p><div class="ft-figtabl-title">
<a id="pgfId-1015951"></a>Functions for Composite Mode HLVS </div></caption>
<tbody><tr>
<th class="webflareTh" colspan="1" rowspan="1">
<span class="tbl-head" id="#id1015957">
<a id="pgfId-1015957"></a>Type</span>
</th>
<th class="webflareTh" colspan="1" rowspan="1">
<span class="tbl-head" id="#id1015959">
<a id="pgfId-1015959"></a>Function</span>
</th>
<th class="webflareTh" colspan="1" rowspan="1">
<span class="tbl-head" id="#id1015961">
<a id="pgfId-1015961"></a>Reference</span>
</th>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1015963"></a>mode</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1015965"></a><code>CHECK</code>-MODE = COMP</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1015967"></a>None</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1015969"></a>Hcells</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1015972"></a><code>HCELL </code><a id="marker-1015971"></a><em>layout netlist</em><code> FRAME BY </code><em>#</em></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1015976"></a>See &#8220;Excluding Hcell Geometries in HLVS&#8221;. </p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1015979"></a>texting</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1015981"></a><code>HEDTEXT = </code><em>filename</em></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1015985"></a>See &#8220;Using GEN-TEXT To Generate Hcell Text&#8221; in Chapter 4 of this manual.</p>
</td>
</tr>
</tbody></table>
<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1015987"></a><code>GEN-TEXT-FILE</code>, <code>HEDTEXT</code>, and <code>CTEXT</code>/<code>ATTACH</code> can be used in both files, depending upon your application.</div>

<h3>
<a id="pgfId-1015990"></a><a id="67583"></a>Ex<a id="exclude"></a>cluding Hcell Geometries in HLVS</h3>

<p>
<a id="pgfId-1015993"></a>When you use the <code>FRAME BY</code><a id="marker-1015991"></a> option with the <code>HCELL</code> function for c<a id="marker-1015992"></a>omposite-mode HLVS, only the data falling within the distance you specify from the Hcell b<a id="marker-1015994"></a>ounding box is processed. </p>
<p>
<a id="pgfId-1015995"></a>If you are in an intermediate verification stage and need quick results, you can use <code>FRAME BY</code> after you run cell mode HLVS. Because Dracula does not process the entire cell, <code>FRAME BY</code> reduces the amount of data processed in composite mode.</p>
<p>
<a id="pgfId-1015996"></a>For example, if you include this function in your rules file</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1015998"></a>H<a id="marker-1015997"></a>CELL INV INV1 FRAME BY 5</pre>

<p>
<a id="pgfId-1018182"></a>only the internal cell data falling within 5 microns of the H<a id="marker-1018181"></a>cell bounding box is processed, as shown.</p>

<p>
<a id="pgfId-1018307"></a></p>
<div class="webflare-div-image">
<img src="images/HcellFramedHcell.gif" /></div>
<div class="webflare-information-macro webflare-macro-warning">
<a id="pgfId-1016063"></a>
Do not use <code>FRAME BY</code><a id="marker-1016062"></a> in the final verification stages because this function excludes portions of your design, masking potential problems.</div>
<h3>
<a id="pgfId-1016066"></a><a id="31470"></a>Us<a id="cell_bounds"></a>ing Cell Boundaries</h3>

<p>
<a id="pgfId-1016068"></a>F<a id="marker-1016067"></a>or each Hcell, Dracula creates a rectangular cell bounding box that surrounds all geometries in the Hcell. These boxes are put in a cell called <code>0CELLBOX</code> that you can overlay on your output cells. You can specify the layer number for the geometries in this cell with the <code>CELLBOX-LAYER</code><a id="marker-1016069"></a><a id="marker-1016070"></a><a id="marker-1016071"></a> function in the Description block. </p>
<p>
<a id="pgfId-1016072"></a>The following example shows a nonrectangular Hcell and the bounding box Dracula generates for it.</p>

<p>
<a id="pgfId-1018320"></a></p>
<div class="webflare-div-image">
<img width="668" height="233" src="images/chap6-19.gif" /></div>

<p>
<a id="pgfId-1016100"></a>When you use the <code>HCELL FRAME BY</code><a id="marker-1016099"></a> option or the <code>GEN-TEXT-FRAME</code> function for composite-m<a id="marker-1016101"></a>ode HLVS, only data falling within the distance you specify from the Hcell bounding box is processed. For this example, if the Dracula-generated b<a id="marker-1016102"></a>ounding box is used, two pins are lost, and the cell does not match the <code>.SUBCKT</code> I/Os in the netlist.</p>
<ul><li>
<a id="pgfId-1016103"></a>To prevent this problem, you can create a graphic input layer with cell boundary geometries for nonrectangular cells. Specify this layer with the <code>CELLBNDY</code><a id="marker-1016104"></a> function in the Input-layer block of your rules file. </li></ul>
<p>
<a id="pgfId-1016105"></a>Dracula uses the <code>CELLBNDY</code> layer for the boundaries you create, and Dracula-generated bounding boxes for the Hcells for which you don&#8217;t supply boundaries.</p>
<p>
<a id="pgfId-1016107"></a>You can also use the <code>CELLBNDY</code> layer with <code>BASE-LAYER</code> for g<a id="marker-1016106"></a>ate arrays. For example, if your cells consist only of metal but diffusion and poly are composite data, devices are electrically inside the cell but built from polygons outside the Dracula bounding box. </p>

<h3>
<a id="pgfId-1016109"></a><a id="63205"></a>Marking Feedthroughs on the Layout</h3>

<p>
<a id="pgfId-1016111"></a>Y<a id="marker-1016110"></a>ou might have interconnects (feedthroughs) on your layout that run through an Hcell without making connections to any devices in the Hcell. These feedthroughs do not have a counterpart in the n<a id="marker-1016112"></a>etlist Hcells because they are part of the composite plane interconnect, not the Hcell. You must identify feedthroughs in your Hcell layou<a id="marker-1016113"></a>t by giving them a text label of this form:</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1016114"></a>FTHRU<em>#</em></pre>

<p>
<a id="pgfId-1016115"></a>where <em>#</em> is a number of your choice. </p>
<p>
<a id="pgfId-1016116"></a>In cell mode, HVLS ignores feedthroughs. In composite mode, HLVS connects them to nodes.</p>
<ul><li>
<a id="pgfId-1016118"></a>To generate feedthrough text automatically, use <code>GEN-TEXT-FLTNODE</code><a id="marker-1016117"></a> in the Description block of your rules file.</li></ul>
<p>
<a id="pgfId-1016123"></a>See &#8220;Using GEN-TEXT To Generate Hcell Text&#8221; and <a actuate="user" class="URL" href="../dracularef/chap6.html#gen-text" show="replace" xml:link="simple">&#8220;GEN-TEXT Commands&#8221; in the &#8220;Comparing Layouts and Schematics (LVS)&#8221; chapter</a> of the <em>Dracula Reference.</em></p>

<h3>
<a id="pgfId-1016126"></a><a id="86432"></a>U<a id="xref_file"></a>sing a Cross-Reference File for Hcell Names</h3>

<p>
<a id="pgfId-1016128"></a>For cell and composite m<a id="marker-1016127"></a>ode HLVS and HLPE, Dracula requires layout cell names to match equivalent schematic <code>.SUBCKT</code><a id="marker-1016129"></a> names. If you were not aware of this requirement when you created your schematics and layout, you can correct problems with cell names using an Hcell file (<code>HCELL-FILE = </code><em>fileName</em><a id="marker-1016130"></a><a id="marker-1016131"></a>) to match names of Hcells between the schematic and layout.</p>
<p>
<a id="pgfId-1016132"></a>Here are the contents of a sample <code>HCELL-FILE</code> that matches layout and schematic cell names:</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1016133"></a>NOR2  no2<br />NAND2 na2<br />REG&#160;&#160; chip</pre>
<h3>
<a id="pgfId-1016135"></a><a id="21974"></a>Preparing Your Netlist</h3>

<p>
<a id="pgfId-1016136"></a>If HLVS is unable to complete the initial correspondence between layout Hcells and schematic Hcells, <a id="marker-1016137"></a>you might have to edit your netlist. Statements that you might have to include in your netlist are</p>
<ul><li>
<a id="pgfId-1016139"></a><code>*.EQUIV</code><a id="marker-1016138"></a></li><li>
<a id="pgfId-1016141"></a><code>*.GLOBAL</code><a id="marker-1016140"></a></li><li>
<a id="pgfId-1016143"></a><code>*.PIN</code><a id="marker-1016142"></a></li><li>
<a id="pgfId-1016145"></a><code>*.NOPIN</code><a id="marker-1016144"></a></li></ul>



<p>
<a id="pgfId-1016146"></a>See the sections that follow for examples of how to use these statements.</p>
<p>
<a id="pgfId-1016148"></a>For details, see <h-hot><a actuate="user" class="URL" href="../dracularef/chap5.html#compile_net" show="replace" xml:link="simple">&#8220;Compiling Network Descriptions (LOGLVS)&#8221;</a></h-hot> in the <em>Dracula Reference.</em></p>

<h4>
<a id="pgfId-1016149"></a>Using a Netlist with Node Numbers</h4>

<p>
<a id="pgfId-1016153"></a>I<a id="marker-1016150"></a>f your netlist is in true S<a id="marker-1016151"></a>PIC<a id="marker-1016152"></a>E format, it uses node numbers rather than node names. To use this netlist in an HLVS run, you must include a local <code>*.EQUIV</code><a id="marker-1016154"></a> statement for each Hcell to cross-reference the node numbers in the netlist to node names on the layout.</p>
<p>
<a id="pgfId-1016155"></a>Here is an example:</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1016156"></a>.SUBCKT INV 3 17<br />*.EQUIV OUT=3 IN=17 VSS=0 VDD=99<br />M1 3 17 99 99 PMOS<br />M2 3 17  0  0 NMOS<br />.ENDS</pre>

<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1016158"></a>In composite mode, all Hcells must have corresponding <code>.SUBCKT</code><a id="marker-1016157"></a> definitions in SPICE/CDL, but they need to define only I/Os, not transistors.<a id="marker-1016159"></a></div>

<h4>
<a id="pgfId-1016162"></a><a id="43429"></a>Add<a id="global"></a>ing Global Signals</h4>

<p>
<a id="pgfId-1016166"></a>Y<a id="marker-1016163"></a>ou m<a id="marker-1016164"></a>ight h<a id="marker-1016165"></a>ave global Hcell I/O signals that are not defined as I/O signals in the <code>.SUBCKT</code> definition, but are required to match the layout Hcell with the netlist Hcell. To define these I/O signals in your SPICE/CDL netlist, use the <code>*.PIN</code><a id="marker-1016167"></a><a id="marker-1016168"></a> statement.</p>
<p>
<a id="pgfId-1016169"></a>Any node defined by the <code>*.PIN</code> statement must be previously defined as a <code>*.GLOBAL</code> node. Here is an example:</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1016170"></a>*.GLOBAL VDD VSS<br />*.PIN VDD VSS<br />.SUBCKT INV OUT IN<br />M1 OUT IN VDD VDD PMOS<br />M2 OUT IN VSS VSS NMOS<br />.ENDS</pre>

<p>
<a id="pgfId-1016171"></a>If you put a <code>*.PIN</code> statement outside a <code>.SUBCKT</code> definition, the global signals you define apply to all H<a id="marker-1016172"></a>cell <code>.SUBCKT</code><a id="marker-1016173"></a>s. If you put the <code>*.PIN</code> within a <code>.SUBCKT</code> definition, the I/Os apply to only that subcircuit.</p>

<h4>
<a id="pgfId-1016174"></a>Removing Global Signals from Selected Subcircuits</h4>

<p>
<a id="pgfId-1016178"></a>F<a id="marker-1016175"></a>or s<a id="marker-1016176"></a>ele<a id="marker-1016177"></a>cted subcircuits, you can use the <code>*.NOPIN</code> statement to remove global I/Os that you previously defined in a <code>*.PIN</code> statement. Here is an example where the <em>CXFR</em> transfer gate does not need a connection to <em>VDD</em> on the layout to match the netlist.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1016179"></a>*.GLOBAL VDD VSS<br />*.PIN VDD VSS<br />.SUBCKT INV OUT IN<br />M1 OUT IN VDD VDD PMOS<br />M2 OUT IN VSS VSS NMOS<br />.ENDS<br />.SUBCKT CXFR A B C<br />*.NOPIN VDD<br />M1 A B C VSS NMOS<br />.ENDS</pre>
<h3>
<a id="pgfId-1016181"></a><a id="26275"></a>Compiling Your Netlist</h3>

<p>
<a id="pgfId-1016182"></a>To compile your netlist, you must run LOGLVS just as you do for flat Dracula. </p>
<ul><li>
<a id="pgfId-1016184"></a>To run HLVS, you must include the Hcell file name with a <code>CELL</code><a id="marker-1016183"></a> command to LOGLVS when you compile your netlist. </li></ul>
<p>
<a id="pgfId-1016186"></a>For details and examples, see <h-hot><a actuate="user" class="URL" href="../dracularef/chap5.html#hier_loglvs" show="replace" xml:link="simple">&#8220;Using Hierarchical LOGLVS&#8221; in the &#8220;Compiling Network Descriptions (LOGLVS)&#8221; chapter</a></h-hot> of the <em>Dracula Reference.</em></p>

<h2>
<a id="pgfId-1016190"></a><a id="13894"></a>Ru<a id="hier_pre"></a>nning H<a id="marker-1016189"></a>ierarchical Parameter Extractions</h2>

<p>
<a id="pgfId-1016191"></a>You use hierarchical Dracula in the same way you use flat Dracula when you extract parasitics from your circuit. To avoid duplicate processing, you extract parasitics from your cells prior to extracting the top-level design. Then, when you process the top-level design, cells are treated as blocks with pin names only.</p>
<p>
<a id="pgfId-1016192"></a>For more information about how to run HLPE and HPRE, see these sections in the <em>Dracula Reference.</em></p>
<ul><li>
<a id="pgfId-1016193"></a>HLPE<br />
<a id="pgfId-1016195"></a><a actuate="user" class="URL" href="../dracularef/chap7.html#hier_lpe" show="replace" xml:link="simple">&#8220;Hierarchical LPE&#8221; in the &#8220;Extracting Electrical Parameters (LPE)&#8221; chapter</a></li><li>
<a id="pgfId-1016196"></a>HPRE<br />
<a id="pgfId-1016198"></a><a actuate="user" class="URL" href="../dracularef/chap9.html#hier_pre" show="replace" xml:link="simple">&#8220;Hierarchical PRE&#8221; in the &#8220;Extracting Parasitic Resistance (PRE)&#8221; chapter</a></li></ul>




<h3>
<a id="pgfId-1016200"></a><a id="45950"></a>About Hierarchical Parameter Extraction</h3>

<p>
<a id="pgfId-1016202"></a>Initially, y<a id="marker-1016201"></a>ou might want to verify that your Dracula HLPE/HPRE rules file works on a flat database. You can then use it for hierarchical extraction, to take advantage of the smaller hierarchical netlist.</p>

<h4>
<a id="pgfId-1016203"></a>Extracting Capacitance Hierarchically</h4>

<p>
<a id="pgfId-1016204"></a>Hierarchical Dracula can extract capacitance between internal cell nodes in the same cell with the same placement during the cell mode run. However, nodes in one cell placement cannot be referenced from another cell. So although Dracula can extract internal capacitors, there is no way to describe them in a hierarchical netlist without making every node in every cell a pin on the netlist. </p>
<p>
<a id="pgfId-1016205"></a>This problem appears in the following cases:</p>
<ul><li>
<a id="pgfId-1016206"></a>Capacitance between internal cell nodes and nodes in the parent cell<br />
<a id="pgfId-1016208"></a>Dracula cannot list the capacitor in c<a id="marker-1016207"></a>ross-coupled format because the node within the cell is not defined in the parent cell. <br />
<a id="pgfId-1016210"></a>In l<a id="marker-1016209"></a>ump sum format, Dracula lists the capacitor between the node in the parent cell and ground. Dracula cannot list the capacitance between the internal cell node and ground as part of the parent cell.<br />
<a id="pgfId-1016213"></a>You can extract this capacitance by flattening layers. </li><li>
<a id="pgfId-1016215"></a>Capacitance between internal cell nodes of different cells<br />
<a id="pgfId-1016216"></a>There is no way to list this capacitor. Dracula can&#8217;t list it for the parent cell of the two different cells, because neither node is in the parent cell. Dracula can&#8217;t list it for the cell that contains the internal node unless the capacitor occurs in every placement. When Dracula extracts the cell capacitance, it can&#8217;t determine how the cell will be placed in the future and what capacitors that placement will create.</li><li>
<a id="pgfId-1016217"></a>Capacitance between internal cell nodes of the same cell in different cell placements<br />
<a id="pgfId-1016218"></a>This case has the same problems as capacitance between internal cell nodes of different cells, described previously.</li></ul>








<h4>
<a id="pgfId-1016221"></a><a id="71639"></a>Fl<a id="flat_extract"></a>attening Layers To Extract Capacitance</h4>

<p>
<a id="pgfId-1016223"></a>Y<a id="marker-1016222"></a>ou extract capacitors between internal cell nodes and parent cell nodes by flattening layers. To flatten layers, you flatten all nodes in the cell to the parent cell and assign all those nodes to ground. Here is an excerpt from a rules file that uses the flattening method:</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1016224"></a>;<br />; &lt;functions omitted&gt;<br />;<br />; Create flattened layer<br />F<a id="marker-1016225"></a>LATTEN METAL2 FLA2<br />;<br />; Set up nodal information for the flattened layer<br />LINK FLA2 TO VSS<br />;<br />; Create capacitance recognition layer<br />N<a id="marker-1016226"></a>OT METAL1 METAL2 MT1N2<br />AND MT1N2 FLA2 CA1F2 ; recognition layer for capacitance <br />                     ; between metal1 and fla2<br />;<br />; Extract parasitic capacitance<br />P<a id="marker-1016227"></a>ARASITIC CAP[A] CA1F2 METAL1 FLA2 ; capacitors between<br />A<a id="marker-1016228"></a>TTRIBUTE CAP[A] 1 1               ; metal1 and fla2<br />;<br />; &lt;functions omitted&gt;<br />;</pre>

<p>
<a id="pgfId-1016229"></a>Do not build a recognition layer between a flattened layer and <em>BULK</em> if <em>BULK</em> is at the same potential, that is, the flattened layer and <em>BULK</em> have the same signal name.</p>
<p>
<a id="pgfId-1016230"></a>The parent cell does not have to be the immediate parent. The parent cell and the cell containing the internal node can have several levels of hierarchy between them. You can use the flattening method for both cross-coupled and lump sum formats.</p>
<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1016232"></a>If you list capacitors in c<a id="marker-1016231"></a>ross-coupled format, the capacitors between an internal cell node and the parent cell are listed in lu<a id="marker-1016233"></a>mp sum format, which is the only way these capacitors can be listed in a netlist.</div>
<p>
<a id="pgfId-1016234"></a>When you flatten layers, Dracula finds capacitors between nodes in both the child cell and the parent cell.</p>
<p>
<a id="pgfId-1016237"></a>You can also use the <code>EXPLODE</code><a id="marker-1016235"></a><a id="marker-1016236"></a> function to extract capacitors between internal cell nodes and parent cell nodes.</p>

<h4>
<a id="pgfId-1016241"></a>Extracting Resistance Hierarchically</h4>

<p>
<a id="pgfId-1016243"></a>U<a id="marker-1016242"></a>nlike capacitors, resistors that have one node in an internal cell and one node in the parent cell are not really a problem. When you run extraction on</p>
<ul><li>
<a id="pgfId-1016244"></a>The internal cell<br />
<a id="pgfId-1016245"></a>Dracula extracts the portion of the resistor that is in the cell. </li><li>
<a id="pgfId-1016246"></a>The parent cell<br />
<a id="pgfId-1019163"></a>Dracula extracts the resistance in the parent cell and connects the resistor terminal to the I/O of the cell. The pad layer defines where the I/O point of the cell is. </li></ul>



<p>
<a id="pgfId-1019160"></a>When you run H<a id="marker-1019159"></a>PRE to extract resistors hierarchically, each I/O point becomes a different subnode. If you have a signal that leaves the cell at more than one <br />I/O point, check your output file for problems. </p>

<h3>
<a id="pgfId-1016254"></a><a id="96011"></a>Writing Parameter Extraction Rules</h3>

<p>
<a id="pgfId-1019141"></a>T<a id="marker-1019140"></a>he rules file you use for an HLPE or HPRE run is the same as the rules file for a flat run, with the addition of several hierarchy-related functions. The table in the &#8220;Running a Hierarchical Network Comparison&#8221; section lists the Dracula hierarchical functions that you might want to include in your rules file for an HLPE or HPRE run. For complete documentation about these functions, see the <em>Dracula Reference.</em></p>
<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1016260"></a>You cannot form devices by overlapping two Hcells. You can form elements in the Hcells or on the composite plane, but not between a combination of the two. The <code>BASE-LAYER</code> function is the only exception to this rule.<a id="marker-1016261"></a></div>
<p>
<a id="pgfId-1016262"></a>For a complete verification, you must run both cell mode and composite mode HLPE or HPRE. </p>

<h3>
<a id="pgfId-1016264"></a><a id="12545"></a>Using a Cross-Reference File for Hcell Names</h3>

<p>
<a id="pgfId-1016266"></a>For cell and composite m<a id="marker-1016265"></a>ode HLPE, Dracula requires that layout cell names and their equivalent schematic <code>.SUBCKT</code><a id="marker-1016267"></a> names must be the same. If you were not aware of this requirement when you created your schematics and layout, you can correct problems with cell names by using an Hcell file (<code>HCELL-FILE = </code><em>fileName</em><a id="marker-1016268"></a><a id="marker-1016269"></a>) to match the names of the Hcells in the schematic and layout.</p>
<p>
<a id="pgfId-1016270"></a>For example, here are the contents of an <code>HCELL-FILE</code> that matches layout and schematic cell names:</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1016271"></a>NOR2  no2<br />NAND2 na2<br />REG&#160;&#160; chip</pre>
<h3>
<a id="pgfId-1016273"></a><a id="19585"></a>Using HLPE To Extract a Complete Netlist</h3>

<p>
<a id="pgfId-1016276"></a>T<a id="marker-1016274"></a>o use HLPE to extract a netlist of your c<a id="marker-1016275"></a>omplete circuit (Hcell plane and composite plane) in hierarchical Dracula, do the following.</p>

<ol><li>
<a id="pgfId-1016278"></a>Run a cell-mode H<a id="marker-1016277"></a>LPE.<br />
<a id="pgfId-1016280"></a>The transistor-level netlist contains <code>.SUBCKT</code><a id="marker-1016279"></a> definitions for each Hcell listed in your <code>HCELL-FILE</code>. You specify the name of the netlist with the <code>OUTPUT</code><a id="marker-1016281"></a> option of the <code>LPESELECT</code><a id="marker-1016282"></a> function. <pre class="webflare-pre-block webflare-courier-new" id="#id1016283">
<a id="pgfId-1016283"></a>LPESELECT[S] CAP GT 0.0 OUTPUT SPICE</pre>
<a id="pgfId-1016285"></a>The cell-mode netlist has a <code>.CEL</code><a id="marker-1016284"></a> extension.</li><li>
<a id="pgfId-1016287"></a>Run a composite-m<a id="marker-1016286"></a>ode HLPE, using the same <code>OUTPUT</code> file name with the <code>LPESELECT</code> function that you used for the cell-mode run.<br />
<a id="pgfId-1016288"></a>Dracula extracts a netlist with elements and parasitics from the composite plane and calls to the <code>.SUBCKT</code> definitions created in cell mode. This netlist is appended to the netlist extracted from the cell-mode run, making a complete two-level hierarchical netlist.<br />
<a id="pgfId-1016291"></a>The composite-m<a id="marker-1016289"></a>ode netlist has a <code>.DAT</code><a id="marker-1016290"></a> extension.<br /><div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1016292"></a>Dracula does not extract parasitics from composite-to-Hcell or Hcell-to-Hcell overlaps.</div></li></ol>











<h2>
<a id="pgfId-1016294"></a><a id="48318"></a>Making Hierarchical Dracula Run Faster</h2>

<p>
<a id="pgfId-1016295"></a>Hierarchical Dracula is, in general, faster than flat Dracula on a hierarchical design, because it takes advantage of the repetitive data structures of that design. In this section, you will learn how to improve hierarchical Dracula performance by</p>
<ul><li>
<a id="pgfId-1016296"></a>Maximizing hierarchical operations</li><li>
<a id="pgfId-1016297"></a>Minimizing redundant checking</li><li>
<a id="pgfId-1016298"></a>Altering Hcell selection criteria</li></ul>


<p>
<a id="pgfId-1019230"></a>For more help with improving hierarchical Dracula&#8217;s performance, you can also see &#8220;Improving Preformance&#8221;.</p>

<h3>
<a id="pgfId-1019235"></a><a id="32144"></a>Maximizing Operations</h3>

<p>
<a id="pgfId-1016306"></a>To process a design, hierarchical Dracula must first set up the data<a id="marker-1016305"></a>base by selecting Hcells, creating Hcell environments, and doing other hierarchical bookkeeping that flat Dracula does not do.</p>
<p>
<a id="pgfId-1016307"></a>To make the best use of this setup time, include as many design rules as you can in the Operation section of your rules file. Because the setup time is the same whether you run a few rules or many, it is most efficient to run many rules at once.</p>
<p>
<a id="pgfId-1016308"></a>When you are running hierarchical Dracula, you can improve processing time by removing checks that require nodal information and checks with large spacing values. Run these checks separately in flat mode. </p>

<h3>
<a id="pgfId-1016310"></a><a id="99330"></a>Minimizing Redundant Checking</h3>

<p>
<a id="pgfId-1016313"></a>Y<a id="marker-1016311"></a>ou can minimize redundant checking by avoiding H<a id="marker-1016312"></a>cell overlaps. Dracula sets up Hcells by creating an environment area around them that is as wide as the largest spacing check on hierarchical layers in the Operations block. When Hcells overlap, their environments also overlap. Because D<a id="marker-1016314"></a>racula checks the environment of each Hcell, Dracula checks certain overlapping environment areas many times.</p>

<p>
<a id="pgfId-1018374"></a></p>
<div class="webflare-div-image">
<img width="668" height="218" src="images/chap6-20.gif" /></div>

<p>
<a id="pgfId-1016328"></a>You can solve the problem of overlapping Hcells as follows:</p>
<ul><li>
<a id="pgfId-1016330"></a>Use <code>ENVIRONMENT-MAX</code><a id="marker-1016329"></a><br />
<a id="pgfId-1016331"></a>Set this value as small as possible to minimize environment overlaps. To keep the environment value as small as possible, use flat checks for the operations with large spacing values. See &#8220;Specifying a Maximum Environment Value&#8221;. </li><li>
<a id="pgfId-1016336"></a>Use <code>EXCEPTION-ON=[HSP-OUTPUT]</code><a id="marker-1016335"></a><br />
<a id="pgfId-1016337"></a>Include this option in the Description block of your rules file so that Dracula does not select overlapping Hcells. See &#8220;Preventing Hcell Overlap&#8221;.</li></ul>



<p>
<a id="pgfId-1016342"></a>I<a id="marker-1016341"></a>f your design contains a large number of overlapping cells, a flat run might take less time than a hierarchical run.</p>

<h3>
<a id="pgfId-1016345"></a><a id="94094"></a>Alt<a id="alt_criteria"></a>ering the Hcell Selection Criteria</h3>

<p>
<a id="pgfId-1016347"></a>I<a id="marker-1016346"></a>f you use Dracula&#8217;s automatic Hcell selection and your job does not perform well, you may want to choose Hcells yourself. See &#8220;Selecting Hcells Manually To Improve Performance&#8221;. </p>
<p>
<a id="pgfId-1016351"></a>You can alter the Hcell selection criteria with these functions:</p>
<ul><li>
<a id="pgfId-1016353"></a><code>HCELL</code><a id="marker-1016352"></a><br />
<a id="pgfId-1016354"></a>Specify names of cells you want to be Hcells. This list overrides automatic Hcell selection. To manually select Hcells, use <code>HCELL-FILE</code> to provide a list of selected Hcells in an external file.</li><li>
<a id="pgfId-1016356"></a><code>NOT-HCELL</code><a id="marker-1016355"></a><br />
<a id="pgfId-1016357"></a>Specify names of cells you do not want to be Hcells (HDRC only).</li><li>
<a id="pgfId-1016360"></a><code>HCELL-RULE</code><a id="marker-1016358"></a><a id="marker-1016359"></a><br />
<a id="pgfId-1016361"></a>Specify the minimum number of placements and segments for a cell to be an Hcell candidate. You can specify multiple placements/segments (HDRC only).</li><li>
<a id="pgfId-1016363"></a><code>HCELL-MAX-SEGMENTS</code><a id="marker-1016362"></a><br />
<a id="pgfId-1016364"></a>Specify the maximum number of line segments for a cell to be an Hcell candidate, to avoid selecting large cells.</li><li>
<a id="pgfId-1016366"></a><code>HCELL-HEIGHT-LIM</code><a id="marker-1016365"></a><br />
<a id="pgfId-1016367"></a>Set a limit of 1000 microns for the maximum Hcell height. </li></ul>










<br /><a href="#pagetop">Return to top</a><br /></div>
<!-- Begin Buttons --><!-- End Buttons -->
<footer><nav class="navigation"><b><em><a href="chap5.html" id="prev" title="Extracting RC Parasitics">Extracting RC Parasitics</a></em></b><b><em><a href="draculauserIX.html" id="nex" title="Index">Index</a></em></b></nav><div>
            For further assistance, contact <a href="https://support.cadence.com">Cadence Online Support</a>. Copyright &#169; 2023, <a href="https://www.cadence.com">Cadence Design Systems, Inc.</a> All rights reserved. 
          </div></footer>
 

 <div id="cad_image_modal" style="background-color: rgba(0, 0, 0, 0.6);"><center id="cad_image_modal_center">&#160;⠀ </center><span style="margin-right:50px;margin-top:100px;font-weight:bold;font-size:20px;background:#e5e5e5;border:1px solid #e5e5e5;border-radius:25px;height:30px;width:20px;padding-left:6px;padding-top:2px;color: black;" onclick="document.querySelector('#cad_image_modal').classList.remove('opac');">X</span></div> 

</body></html>