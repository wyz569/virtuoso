
<html><head><title>Checking Electrical Rules (ERC)</title><meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="Approver" content="Technical Publications" />
<meta name="Author" content="sarita" />
<meta name="CreateDate" content="2023-09-14" />
<meta name="CreateTime" content="1694753392" />
<meta name="DataType" content="Manuals" />
<meta name="Description" content="Dracula offers a complete set of integrated applications for IC layout designs. It contains information about the Dracula standalone verification product." />
<meta name="DocTitle" content="Dracula Reference" />
<meta name="DocType" content="Reference" />
<meta name="FileTitle" content="Checking Electrical Rules (ERC)" />
<meta name="FileType" content="Chapter" />
<meta name="FMWikiRelease" content="FM-Wiki-4.0.0" />
<meta name="Keyword" content="dracularef" />
<meta name="Language" content="English" />
<meta name="ModifiedDate" content="2023-09-14" />
<meta name="ModifiedTime" content="1694753392" />
<meta name="NextFile" content="chap5.html" />
<meta name="Group" content="" />
<meta name="Platform" content="Physical Verification  Analysis" />
<meta name="PrevFile" content="chap3.html" />
<meta name="c_product" content="Dracula" />
<meta name="Product" content="Dracula" />
<meta name="ProductFamily" content="Dracula" />
<meta name="ProductVersion" content="IC23.1" />
<meta name="RightsManagement" content="Copyright 2023 Cadence Design Systems Inc." />
<meta name="Title" content="Dracula Reference -- Checking Electrical Rules (ERC)" />
<meta name="Keywords" content="" />
<meta name="topic_type" content="" />
<meta name="reference_type" content="" />
<meta name="prod_feature" content="" />
<meta name="prod_subfeature" content="" />
<meta name="new_topic" content="No" />
<meta name="spotlight_topic" content="0" />
<meta name="Version" content="IC23.1" />
<meta name="SpaceKey" content="dracularefIC231" />
<meta name="webflare-version" content="2.5" />
<link rel="stylesheet" href="styles/webflare.css" type="text/css" />


  <script>/*<![CDATA[*/
 document.addEventListener("DOMContentLoaded", function(event) {  document.querySelectorAll("img").forEach((img, index) => {
if (img.hasAttribute("usemap")){return;}else{img.classList.add("cursorclass");} img.addEventListener("click", (e) => {if(img.hasAttribute("usemap")){            img.setAttribute("style","cursor:none;");return;};document.querySelector("#cad_image_modal").classList.add("opac");document.querySelector("#cad_image_modal_center").innerHTML = `<img style="position:absolute;top:0;bottom:0;left:0;right:0;margin: auto;max-height:95%;"  src="${e.target.src}">`;});});});
/*]]>*/</script> 




 <style>/*<![CDATA[*/
.cursorclass{cursor:pointer;}#cad_image_modal{position:fixed;left:0;top:0;width:100%;background:#00000099;overflow:hidden;height:0;opacity:0;transition: height 0ms 1s, opacity 1s 0ms;}#cad_image_modal.opac{height: 100%;opacity: 1;transition: height 0ms 0ms, opacity 1s 0ms;}#cad_image_modal span{position:fixed;right:10px;top:10px;cursor:pointer;color:#fff;}
/*]]>*/</style> 
</head><body style="background-color: #FFFFFF;"><a name="pagetop"></a>
<!-- Begin Buttons -->
<header><div class="docHeadr">Product Documentation<img src="icons/Cadence-Logo.jpg" /></div><nav class="blueHead"><ul><li><a class="content" href="dracularefTOC.html">Contents</a></li><li><a class="prev" href="chap3.html" title="Checking Design Rules (DRC)">Checking Design Rules (DRC)</a></li><li style="float: right;"><a class="viewPrint" href="dracularef.pdf">View/Print PDF</a></li><li style="float: right;margin-right: 25px;"><a class="nextd" href="chap5.html" title="Compiling Network Descriptions (LOGLVS)">Compiling Network Descriptions ...</a></li></ul></nav></header>
<!-- End Buttons -->
<h5><center>Dracula Reference<br />Product Version IC23.1, September 2023</center></h5><div id="main-content" style="min-height: 50vh; margin-left: 5%; margin-right: 2%;"><a name="#firstpage"></a>

<h1>4
<a id="pgfId-1008781"></a></h1>
<h1>
<a id="pgfId-1014280"></a><hr />
<a id="75716"></a>Checking Electrical Rules (ERC)<hr />
</h1>

<p>
<a id="pgfId-1014281"></a>This chapter discusses Electrical Rules Checking in Dracula, focusing on the following topics:</p>
<ul><li>
<a id="pgfId-1014285"></a><a href="chap4.html#26800">&#8220;Electrical Rules Checker&#8221;</a></li><li>
<a id="pgfId-1014289"></a><a href="chap4.html#30342">&#8220;ERC Examples&#8221;</a></li><li>
<a id="pgfId-1014293"></a><a href="chap4.html#40836">&#8220;Hierarchical ERC&#8221;</a></li></ul>



<h2>
<a id="pgfId-1014296"></a><a id="26800"></a>Electrical Rules Checker</h2>

<p>
<a id="pgfId-1014297"></a>The Dracula Electrical Rules Checker (ERC) checks for electrical rule violations. ERC isolates the exact locations at which shorts occur, eliminating the time-consuming process of finding shorts between global signals. <a id="marker-1014298"></a>ERC detects the following kinds of errors:</p>
<ul><li>
<a id="pgfId-1014299"></a>Process-independent errors<ul><li>
<a id="pgfId-1014300"></a>Short circuits</li><li>
<a id="pgfId-1014301"></a>Open circuits</li><li>
<a id="pgfId-1014302"></a>Floating nodes</li></ul></li><li>
<a id="pgfId-1014303"></a>Process-dependent errors<ul><li>
<a id="pgfId-1014304"></a>Invalid devices</li><li>
<a id="pgfId-1014305"></a>Improper implant types</li><li>
<a id="pgfId-1014306"></a>Improper substrate bias</li><li>
<a id="pgfId-1014307"></a>Improper power and ground connections</li><li>
<a id="pgfId-1014308"></a>Singular nodes</li></ul></li></ul>









<p>
<a id="pgfId-1014309"></a>This chapter describes the ERC commands and shows detailed examples of the commands used in an ERC run. This chapter also describes hierarchical ERC (HERC).</p>

<h3>
<a id="pgfId-1014310"></a>ERC Commands</h3>

<p>
<a id="pgfId-1014312"></a>The ER<a id="marker-1014311"></a>C Input-Layer block commands CONNECT-LAYER and TEXTSEQUENCE determine the mask order of conductor layers and the order in which Dracula attaches text. For details about how Dracula handles text, see <h-hot><a href="chap12.html#58967">Chapter 12, &#8220;Input-Layer Block Commands.&#8221;</a></h-hot></p>
<p>
<a id="pgfId-1014316"></a>The ERC Operation block commands can be grouped into the following three categories:</p>
<ul><li>
<a id="pgfId-1014318"></a><a id="marker-1014317"></a>Electrical node extraction</li><li>
<a id="pgfId-1014320"></a><a id="marker-1014319"></a>Circuit element extraction</li><li>
<a id="pgfId-1014321"></a>Electrical rules checking</li></ul>



<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1014322"></a>Dracula allows a maximum of 1,000 ERC commands in the rule file.</div>

<p>
<a id="pgfId-1014325"></a>For details about each of the Operation block commands, refer to <h-hot><a href="chap13.html#21059">Chapter 13, &#8220;Operation Block Commands.&#8221;</a></h-hot></p>

<h4>
<a id="pgfId-1014327"></a>Electrical Node Extraction Commands</h4>

<p>
<a id="pgfId-1014329"></a><a id="marker-1014328"></a>The electrical node extraction commands define the connectivity between layers where the connection physically derives from the contacts. The CONNECT-LAYER command in the Input-Layer block defines the sequence. You define the contacts that connect the prescribed layers in the Operation block.</p>
<p>
<a id="pgfId-1014330"></a>Electrical nodes are formed by the layer processing sequence and the interlayer contacts. Dracula forms and uniquely labels each electrical node formed by the CONNECT-LAYER and CONNECT commands. This process is called &#8220;stamping.&#8221; Dracula can carry the stamping information to newly generated layers in two ways:</p>
<ul><li>
<a id="pgfId-1014331"></a>Dracula automatically stamps layers produced by the AND and NOT commands. Dracula stamps the output layer with the node label of the first specified layer.</li><li>
<a id="pgfId-1014332"></a>The STAMP command stamps the node labeling from one layer to another. Stamping occurs only for stamped layer polygons that overlap nodes in the stamping layer.</li></ul>


<h4>
<a id="pgfId-1014333"></a>Circuit Element Extraction Commands</h4>

<p>
<a id="pgfId-1014335"></a><a id="marker-1014334"></a>The circuit element extraction commands extract MOS devices, pads, and electrical parameters such as widths and lengths. When you define electrical nodes with the CONNECT command, the circuit element extraction commands automatically generate a circuit netlist. You can use this extracted circuit for ERC, LPE, and LVS operations.</p>
<p>
<a id="pgfId-1014336"></a>Dracula checks the devices defined by ELEMENT commands to verify that the devices are correctly formed. If the terminals of a device are missing or not formed properly, Dracula reports the coordinates of the device in the .ERC file.</p>

<h4>
<a id="pgfId-1014337"></a>Electrical Rules Checking Commands</h4>

<p>
<a id="pgfId-1014338"></a>The electrical rules checking commands check for incorrect devices and gross continuity errors. Some of these rules are global and some are local.</p>
<p>
<a id="pgfId-1014339"></a>After completing your ERC checks, Dracula flags electrical nodes and elements as potential violations and generates graphic output. For electrical nodes, Dracula traces continuity through the contacts to all areas of layers with the same electrical potential. Dracula uses a definition area to identify elements. For example, the channel area can represent the MOS device to help locate specific violations.</p>
<p>
<a id="pgfId-1014340"></a>Because ERC operates on the internal data structure that represents the layout by trapezoids, and not polygons, the <a id="marker-1014341"></a>graphic output and the original layout might look different even though the covered area is the same. If multiple layers are involved in a violation, Dracula assigns consecutive output layer numbers with the lowest number being the one you specify in the command. In the following example, the MULTILAB command outputs errors to layer 50.</p>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1014342"></a>* INPUT-LAYER <br />; <br />diff      =  1          ; Diffusion input layer<br />epi       =  4          ; Epi-contact input layer<br />poly      =  5          ; Polysilicon input layer<br />cont      =  6          ; Metal-contact input layer<br />metal     =  7 TEXT 60  ; Metal input layer<br />vapox     =  8          ; VAPOX input layer for pads<br />natural   =  9          ; Natural XTOR implant layer<br />harddep   =  10         ; Hard depletion XTOR implant<br />softdep   =  11         ; Soft depletion XTOR implant <br />TEXT      =  60         ; Text layer<br />; <br />CONNECT-LAYER = srcdrn poly metal <br />*END <br />*OPERATION <br />CONNECT metal poly by mc<br />CONNECT metal srcdrn by mc<br />MULTILAB OUTPUT mullab 50 <br />*END </pre>
<p>
<a id="pgfId-1014343"></a>Because multiple layers are involved, Dracula assigns graphic output layers as follows: </p>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1014344"></a>metal    to  layer  50 <br />poly     to  layer  51 <br />srcdrn   to  layer  52 <br />mc       to  layer  53<br /></pre>

<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1014347"></a><a id="marker-1014345"></a><a id="marker-1014346"></a>PDRACULA issues an error message if any layer number exceeds 127. To avoid this error, use a smaller layer number, a different cell name, or a different data type. </div>
<h3>
<a id="pgfId-1014348"></a>ERC Output</h3>

<p>
<a id="pgfId-1014350"></a>ERC summaries are put in a file with a<a id="marker-1014349"></a>.ERC extension and the same root name as the.SUM file. The.ERC file contains the number of nodes and regions and all successfully attached text information, including the text name, its coordinate, node number, and text type. The file also records text not attached to any layer, text that caused open or short circuits, soft connection violations, and all ERC results.</p>
<p>
<a id="pgfId-1014351"></a>To do electrical rules checks, ERC uses electrical nodes derived from the layout and text input through your CAD system, EDTEXT, or both. If your ERC run generates error output cells from MULTILAB or SAMELAB commands, you must resolve these errors before inspecting any other output.</p>
<p>
<a id="pgfId-1014352"></a>Before loading the graphic error output cells onto your CAD system: </p>
<ul><li>
<a id="pgfId-1014354"></a>Inspect module<a id="marker-1014353"></a> IDLAB, which is the entire text/label read in. Check the conversion of label names and their x,y coordinates.</li><li>
<a id="pgfId-1014356"></a>Inspect module <a id="marker-1014355"></a>POSATT, which is the text/label processed for attachments. Dracula groups together text that must be attached to particular conductor layers by CONNECT-LAYER and lists these attachments in the far right column. The attachment might indicate whether the x,y coordinates of the text are correct. Node numbers are also listed.<br />
<a id="pgfId-1014357"></a>POSATT shows which group of text/labels is shorted to each other (MULTILAB) and which group of text/labels is opened (SAMELAB). You find these groups listed under the warning in the.ERC summary file.</li><li>
<a id="pgfId-1014358"></a>Find the layer assignment by searching for the error output name, such as SHORTS40 or OPE<a id="marker-1014359"></a>NS40. Because MULTILAB and SAMELAB both output nodes, the error output cell layer assignments are listed under the ERC checks in the.ERC summary file.</li></ul>



<p>
<a id="pgfId-1014361"></a><a id="marker-1014360"></a>The following is an abbreviated example of a <code>.ERC</code> summary file.</p>

<pr-prog id="#id1014362">
<a id="pgfId-1014362"></a>*******************************************************************
*/N   DRACULA  (REV. 4.0.14 / SUN-4 4.X /GENDATE: 8-MAY-95/01
            *** (Copyright 1995, Cadence) ***
*/N*       EXEC TIME =16:37:40   DATE = 8-JUNE-95
*******************************************************************

INDISK PRIMARY CELL : CADENCE

*******************ERC SUMMARY REPORT******************************
                  DATE:   5-May-95
                  TIME:  09:30:19

(COMPOSITE PLANE)
*/I*     690 NODES ARE IDENTIFIED FROM    6125 REGIONS

******************COMP TEXT SUMMARY********************************
OEBP         X      728.50 Y       4948.25 NODE      217 ATTACH MT2
IO4TOP       X      709.25 Y       4967.50 NODE      272 ATTACH MT2
IO5TOP       X      721.50 Y       5193.50 NODE      275 ATTACH MT2
IO6TOP       X      720.50 Y       5417.50 NODE      280 ATTACH MT2
IO7TOP       X      715.75 Y       5643.25 NODE      299 ATTACH MT2
WE3B         X      673.75 Y       6306.50 NODE       86 ATTACH MT2
   .
   .
 */W* WARNING ** TEXT : VCC                1 SHORT DISCARDED
 */W* WARNING ** TEXT : VSS                1 SHORT DISCARDED
 */W* WARNING ** TEXT : IO7BOT           106 SHORT DISCARDED
 */W* WARNING ** TEXT : IOT7             106 SHORT DISCARDED
.
.
.. LIST OF EXTRACTED PAD NAMES AND NODE NUMBERS :
      A0                       243      
      A0TOP                    356      
      A1                       236      
      A1TOP                    349      
      .
      .
      VCC                              E     DELETED 
      VSS                              E     DELETED 
      WE3B                      86      
      WEBP                      15      
*******************************************************************
************   ERC ERROR SUMMARY FOR CELL : SHORT30    ************
*******************************************************************
NUMBER OF           NUMBER OF           NUMBER OF 
ERRORS FOUND        ERRORS LISTED       OUTPUT TRAPEZOIDS
    2                       0               42779

*******************************************************************
************   ERC ERROR SUMMARY FOR CELL : OPEN30    *************
*******************************************************************
NUMBER OF           NUMBER OF           NUMBER OF
ERRORS FOUND        ERRORS LISTED       OUTPUT TRAPEZOIDS
    0                       0                   0

************* MULTILAB SUMMARY ************************************
  43 TRAPEZOIDS ARE SELECTED FROM 3MT2     TO SHORT30  AT LAYER   30
  91 TRAPEZOIDS ARE SELECTED FROM 3MET1    TO SHORT30  AT LAYER   31
   0 TRAPEZOIDS ARE SELECTED FROM 3PL2     TO SHORT30  AT LAYER   32
   1 TRAPEZOIDS ARE SELECTED FROM 3POLY1   TO SHORT30  AT LAYER   33
   0 TRAPEZOIDS ARE SELECTED FROM 3NSD     TO SHORT30  AT LAYER   34
</pr-prog>
<h2>
<a id="pgfId-1014365"></a><a id="30342"></a>ERC Examples<a id="marker-1015031"></a></h2>

<p>
<a id="pgfId-1014366"></a>This section shows an input file that demonstrates the operation and features of ERC. One cell of a 3.5-micron NMOS technology memory chip is used for these examples. The following figure shows the layout and schematic of this cell. </p>
<p>
<a id="pgfId-1014369"></a>For information about debugging an ERC run, refer to <h-hot><a href="chap13.html#21059">Chapter 13, &#8220;Operation Block Commands.&#8221;</a></h-hot></p>

<div class="ft-figtabl-title">
<a id="pgfId-1014371"></a>Schematic Representation of the Sample Cell Layout</div>
<p>
<a id="pgfId-1014495"></a></p>
<div class="webflare-div-image">
<img width="676" height="338" src="images/chap4-2.gif" /></div>
<h3>
<a id="pgfId-1014496"></a>Description Block</h3>

<p>
<a id="pgfId-1014499"></a><a id="marker-1014497"></a>In the Description block, you define the input or output devices and file names, CAD layout graphics system, graphics unit scale factor, cell (or portion of cell), and execution mode. </p>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1014500"></a>*DESCRIPTION <br />;<br />PRIMARY      =  demo       ; Primary cell name<br />SYSTEM       =  GDS2       ; CAD graphics system<br />INDISK       =  demoerc    ; Input file name<br />OUTDISK      =  demout     ; Output file name<br />SCALE        =  0.001 mic  ; Graphics scale factor<br />PRINTFILE    =  ercprt     ; Output print file<br />MODE         =  exec now   ; Execution mode<br />RESOLUTION   =  0.125 mic  ; Minimum layout increment <br />; <br />; *END <br /></pre>
<p>
<a id="pgfId-1014501"></a>The statistics of the memory cell in this example are as follows: </p>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1014502"></a>Technology            =   3.5-micron NMOS <br />Number of transistors =   14 <br />CAD graphics system   =   GDS II <br />Graphics unit scale   =   0.001 micron<br /></pre>

<h3>
<a id="pgfId-1014503"></a>Input Layer Block</h3>

<p>
<a id="pgfId-1014506"></a><a id="marker-1014504"></a>In the Input-La<a id="marker-1014505"></a>yer block, you correlate the layout layer number with your own symbolic name and define the mask sequence for the major layers in the technology process. </p>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1014507"></a>* INPUT-LAYER <br />; <br />diff      =  1          ; Diffusion input layer<br />epi       =  4          ; Epi-contact input layer<br />poly      =  5          ; Polysilicon input layer<br />cont      =  6          ; Metal-contact input layer<br />metal     =  7 TEXT 60  ; Metal input layer<br />vapox     =  8          ; VAPOX input layer for pads<br />natural   =  9          ; Natural XTOR implant layer<br />harddep   =  10         ; Hard depletion XTOR implant<br />softdep   =  11         ; Soft depletion XTOR implant <br />TEXT      =  60         ; Text layer<br />; <br />CONNECT-LAYER  =  srcdrn poly metal ;Layer process order <br />; <br />*END <br /></pre>

<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1014508"></a>The surgery layer is not yet defined; it is formed by a logical operation in the Operation block. </div>

<p>
<a id="pgfId-1014509"></a>The reverse order of the CONNECT-LAYER sequence is the default TEXTSEQUENCE that is used to attach text to the layout, that is, to metal, then to poly, and then to surgery.</p>

<h3>
<a id="pgfId-1014510"></a>Operation Block </h3>

<p>
<a id="pgfId-1014512"></a><a id="marker-1014511"></a>You specify your electrical rules in the Operation block. The following example describes the set of rules you need to comply with ERC specifications.</p>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1014513"></a>*OPERATION<br />; <br />; ***ELECTRICAL NODE DESCRIPTION***<br />;<br />; FORM TRANSISTORS<br />;<br />AND   poly     diff     podiff <br />;<br />NOT   podiff   epi      xtor<br />;<br />OR    harddep  softdep  depl<br />OR    natural  depl     eblk <br />;<br />AND   xtor     depl     chnld<br />AND   xtor     natural  chnln<br />NOT   xtor     eblk     chnle <br />; <br />; FORM SOURCE-DRAIN LAYER<br />;<br />NOT   diff     xtor     srcdrn <br />; <br />; ELECTRICAL NODE CONSTRUCTION<br />; <br />; FORM PAD WINDOWS<br />; <br />AND        metal    vapox   padwin <br />CONNECT    metal    poly    BY cont<br />CONNECT    metal    srcdrn  BY cont<br />CONNECT    poly     srcdrn  BY epi <br />;<br />; ***NETWORK CONSTRUCTION*** <br />;; <br />; FORM NETWORK<br />;<br />ELEMENT    MOS[D]   chnld   poly    srcdrn <br />ELEMENT    MOS[N]   chnln   poly    srcdrn<br />ELEMENT    MOS[E]   chnle   poly    srcdrn<br />ELEMENT    PAD      padwin  metal <br />; <br />; ***ELECTRICAL RULE CHECKS*** <br />; <br />PROBE      vcc      OUTPUT  vcc     50<br />PROBE      vss      OUTPUT  vss     50<br />;<br />MULTILAB   OUTPUT   shorts  50<br />;<br />SAMELAB    OUTPUT   opens   50<br />;<br />PATHCHK    LEVEL 1  OUTPUT  path1r  50<br />PATHCHK    LEVEL 2  OUTPUT  path2r  50<br />PATHCHK    LEVEL 3  OUTPUT  path3r  50 <br />;<br />ELCOUNT    mos      all     EQ 0    OUTPUT  float   50 <br />;<br />NDCOUNT    mos      all     EQ 1    OUTPUT  mosnil  40<br />NDCOUNT    mos      srcdrn  EQ 1    OUTPUT  moscap  40 <br />;<br />ECONNECT   mos[D]   srcdrn CONN vss OUTPUT  mdconn  40 <br />; *END </pre>
<p>
<a id="pgfId-1014514"></a>After you create the Description, Input-Layer, and Operation blocks, you can store the blocks in one or more files, such as the following:</p>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1014515"></a>Description block   ercdesc.com <br />Input-Layer block   ercinpl.com <br />Operation block&#160;&#160;   ercoper.com </pre>
<p>
<a id="pgfId-1014516"></a>You can read these files into the preprocessor with the following commands: </p>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1014517"></a>/GET ercdesc NOLIST <br />/GET ercinpl NOLIST <br />/GET ercoper NOLIST <br />/FINISH </pre>

<h3>
<a id="pgfId-1014520"></a>NMO<a id="marker-1014518"></a>S E<a id="nmos_erc_comfile"></a>RC Rules File</h3>

<p>
<a id="pgfId-1014521"></a>The following sample input file is for NMOS circuits. Because ERC checks for standard MOS digital circuit designs, some of the ERC checks are not useful for memory or linear circuits.</p>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1014522"></a>;******************************************************** <br />;              SILICON GATE NMOS ERC CHECKS <br />;        FOR STANDARD DIGITAL DESIGN TECHNIQUES <br />;******************************************************** ; <br />; <br />*DESCRIPTION <br />; </pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1014523"></a>INDISK = inchip  ; Graphic database file <br />OUTDISK = ercout  ; Graphic error database file <br />PRIMARY = top  ; Top cell name <br />MODE = exec now  ; Mode execution <br />SYSTEM = gds2  ; Graphic CAD database format <br />PROGRAM-DIR = drac:  ; Program directory of Dracula modules <br />SCALE = .001 micron  ; Graphic database scale factor <br />RESOLUTION = .5 micron  ; Graphic digitized grid increments <br />PRINTFILE = ercprt  ; Print-file name ERC run <br />; <br />*END <br />; <br />;********************************************************** <br />;  INPUT-LAYER BLOCK <br />;********************************************************** <br />*INPUT-LAYERS<br />; <br />diff =1  ; Thin oxide region <br />depl = 2  ; Depeltion VT adjust implant <br />bcon = 3  ; Buried contact for poly to diffusion <br />poly =4  ; Polysilicon <br />mcon = 5  ; Metal contacts <br />metal =6 TEXT 30  ; Metal &amp; Text layer 30 <br />pad = 7  ; Pad opening<br />;<br />CONNECT-LAYER= srcdrn poly metal <br />;*** The conductor layers of the NMOS process *** <br />; <br />*END </pre>

<pr-prog id="#id1014524">
<a id="pgfId-1014524"></a>;************************************************************ 
;OPERATION BLOCK 
;       CREATE THE DEVICE LAYERS AND CONDUCTOR LAYERS 
;*************************************************************; 
*OPERATION
; 
AND diff poly gbc 
NOT gbc bcon gate  ; All transistors 
NOT diff gate srcdrn  ; N + source/drain layer 
AND gate depl dgate  ; Depletion devices 
NOT gate dgate egate  ; Enhancement devices 
; 
AND pad metal padwin  ; Bonding pad 
; 
; EDTEXT abc.txt  ; ASCII texting file  ( optional )
;  </pr-prog>
<pr-prog id="#id1014525">
<a id="pgfId-1014525"></a>;********************************************************** 
;            CONNECT OPERATION FOR NMOS PROCESS 
;********************************************************** 
; 
CONNECT metal poly BY mcon 
CONNECT metal srcdrn BY mcon 
CONNECT srcdrn poly BY bcon 
; </pr-prog>
<pr-prog id="#id1014526">
<a id="pgfId-1014526"></a>;********************************************************** 
;            DEFINING ELEMENTS OF NMOS PROCESS 
;********************************************************** 
;
ELEMENT MOS[D] dgate poly srcdrn  ; Depletion device 
ELEMENT MOS[E] egate poly srcdrn ; Enhancement device 
ELEMENT PAD padwin metal ; Pad element 
; </pr-prog>
<pr-prog id="#id1014527">
<a id="pgfId-1014527"></a>;********************************************************** 
;                        ERC CHECKS 
;********************************************************** 
; 
MULTILAB OUTPUT shorts 30 ; Short test on all labelled nodes. 
SAMELAB OUTPUT opens 30 ; Opens test on all labelled nodes. 
; 
PATHCHK LEVEL 1 OUTPUT novdd 30 ; Nodes that have no path to
; power. 
PATHCHK LEVEL 2 OUTPUT novss 30 
; Nodes that have no path to ground.
PATHCHK LEVEL 3 OUTPUT nopwr 30 
; Nodes that have no path to power and ground.
PATHCHK LEVEL 4 OUTPUT noall 30 
; Nodes that have no path to power, ground, and other texted 
; pads.
; 
ECONNECT MOS srcdrn CONN vdd &amp; 
ECONNECT MOS srcdrn CONN vss OUTPUT vddvss 31 
; Transistors that are connected directly across power supply. 
; 
NDCOUNT MOS srcdrn EQ 1 OUTPUT allcap 32 
; Transistors with source/drain count equal to one( capacitor? )
; 
<code>NDCOUNT MOS all EQ 1 OUTPUT mixup 33 
; Transistors with their source,drain,and gate connected 
; together. 
; 
NDCOUNT MOS srcdrn GT 2 OUTPUT sdx 35 
; Transistor with source/drain count greater than two 
; ( illegal MOS device ?MOS ). 
</code>; 
ELCOUNT MOS all EQ 0 OUTPUT flonod 30 
; Node with no MOS device connected. 
ELCOUNT MOS all EQ 1 OUTPUT sindev 30 
; Node with only one device connected. 
; 
ECONNECT MOS[D] poly CONN vss OUT dgtvss 36 
; Depletion transistors with their gates connected to VSS. 
ECONNECT MOS[E] poly CONN vdd OUT egtvdd 37 
; Enhancement transistors with their gates connected to VDD. 
; 
ECONNECT MOS[E] srcdrn CONN vdd &amp; 
ECONNECT MOS[E] poly DISC vdd &amp; 
NDCOUNT MOS[E] all LT 3 &amp; 
NDCOUNT MOS[E] srcdrn EQ 2 OUTPUT noimp 38 
; Enhancement transistor connected in a depletion mode 
; configuration. 
; 
ELCOUNT MOS[D] srcdrn GT 1 OUTPUT gtdepl 30 
; Node with more than one depletion load device. 
; 
;*BREAK lvs 
;LVSCHK ; Include this if you want to run LVS
*END</pr-prog>
<h3>
<a id="pgfId-1014530"></a>CMOS <a id="cmos_erc_comfile"></a><a id="marker-1014529"></a>ERC Rules File</h3>

<p>
<a id="pgfId-1014531"></a>The following example is an ERC rules file for a silicon-gate CMOS technology.</p>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1014532"></a>;*******************************************************<br />;              SILICON GATE CMOS ERC CHECKS <br />;         FOR STANDARD DIGITAL CMOS DESIGN TECHNIQUES <br />;****************************************************** *DESCRIPTION<br />;<br />INDISK = inchip ; Graphic database file name <br />OUTDISK = ercout ; Graphic error cell file name <br />PRIMARY = top ; Top cell name <br />MODE = exec now ; Mode execution <br />SYSTEM = gds2 ; Graphic CAD database format <br />PROGRAM-DIR = drac: ; Program directory of Dracula modules <br />SCALE = .001 micron ; Graphic database scale <br />RESOLUTION = .5 micron ; Database digitized grid unit <br />PRINTFILE = ercprt ; Print file name of DRACULA run <br />; <br />*END </pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1014533"></a>;*******************************************************<br />;                   INPUT-LAYER BLOCK <br />;*******************************************************<br />*INPUT-LAYERS <br />diff = 1 ; Thin oxide regions <br />pwell = 2 ; P-well regions <br />poly = 3 ; Polysilicon <br />nplus = 4 ; N + implant <br />pplus = 5 ; P + implant <br />cont = 6 ; Metal contacts <br />metal = 7 ; Metal <br />vapox = 8 TEXT=28 ; Pad opening &amp; Text layer 28 <br />SUBSTRATE = bulk 63 ; Layer created for reverse mask <br />; <br />CONNECT-LAY = nsub pwell psd nsd poly metal <br />;*** The conductor layers of the CMOS Process. *** <br />; <br />*END </pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1014534"></a>;*******************************************************<br />;                      OPERATION BLOCK <br />;        CREATE THE DEVICE LAYERS AND CONDUCTOR LAYERS <br />;*******************************************************<br />; <br />*OPERATION <br />AND diff nplus nregion ; All active N + regions <br />AND poly nregion ngate ; N-Channel devices <br />NOT nregion ngate nsd ; N + source/drain &amp; taps <br />; <br />AND diff pplus pregion ; All active p + regions <br />AND poly pregion pgate ; P-Channel devices <br />NOT pregion pgate psd ; P + source/drain &amp; taps <br />; <br />AND vapox metal bpad ; Bonding pad device <br />; <br />NOT bulk pwell nsub ; Created N-Substrate layer <br />; <br />AND psd pwell ptwell   ; Pseudo P + tap for P-well <br />; <br />NOT nsd pwell ntnsub   ; Pseudo N + tap for N-Substrate <br />; </pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1014535"></a>;******************************************************* <br />;            CONNECT OPERATION FOR CMOS PROCESS <br />;*******************************************************<br />; <br />CONNECT metal poly BY cont <br />CONNECT metal nsd BY cont <br />CONNECT metal psd BY cont <br />CONNECT psd pwell BY ptwell <br />CONNECT nsd nsub BY ntnsub <br />; </pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1014536"></a>;*******************************************************<br />;            DEFINING ELEMENTS OF CMOS PROCESS <br />;*******************************************************<br />; <br />ELEMENT MOS[N] ngate poly nsd pwell   ; N-Channel device <br />ELEMENT MOS[P] pgate poly psd nsub    ; P-Channel device<br />ELEMENT PAD bpad metal                ; Pad element <br />; </pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1014537"></a>;*******************************************************<br />;   ERC CHECKS <br />;*******************************************************<br />; <br />MULTILAB OUTPUT shorts 40 <br />; Shorts test on all labelled nodes. <br />; <br />SAMELAB OUTPUT opens 40 <br />; Opens test on all labelled nodes. <br />; <br />NDCOUNT MOS[N] nsd GT 2 OUTPUT dverr1 45 <br /><code>NDCOUNT MOS[P] psd GT 2 OUTPUT dverr2 45 <br />; Transistors with source/drain count greater than two <br />; ( illegal MOS device, ?MOS ). <br />; <br />ELCOUNT MOS all EQ 0 OUTPUT float 40 <br />; Nodes with no device connected. <br /></code>; <br />ECONNECT MOS[N] nsd CONN vdd &amp; <br />ECONNECT MOS[N] nsd CONN vss OUTPUT vdvsn 48 <br />ECONNECT MOS[P] psd CONN vdd &amp; <br />ECONNECT MOS[P] psd CONN vss OUTPUT vdvsp 48 <br />; Transistors that are connected directly across power supply. <br />; <br />ECONNECT MOS[P] poly CONN vdd OUTPUT gatvdd 49 <br />; P-Channel transistors with their gates connected to VDD(OFF!). <br />ECONNECT MOS[N] poly CONN vss OUTPUT gatvss 49 <br />; N-Channel transistors with their gates connected to VSS(OFF!). ; <br />ECONNECT MOS[P] psd CONN vss OUTPUT psdvss 50 <br />; P-Channel transistors with their source/drain connected to VSS <br />;( inverted CMOS gate ). <br />ECONNECT MOS[N] nsd CONN vdd OUTPUT nsdvdd 50 <br />; N-Channel transistors with their source/drain connected to VDD <br />;( inverted CMOS gate ). <br />; <br />PATHCHK LEVEL 1 OUTPUT novdd 40 <br />; Nodes that have no path to ground. <br />PATHCHK LEVEL 2 OUTPUT novss 40 <br />; Nodes that have no path to power. <br />PATHCHK LEVEL 3 OUTPUT nopwgr 40 <br />; Nodes that have no path to power and ground. <br />PATHCHK LEVEL 4 OUTPUT noall 40 <br />; Nodes that have no path to power, ground and other texted pads. <br />; <br />ELCOUNT MOS all EQ 1 OUTPUT onedev 40 <br />; Nodes with only one device connected. <br />; <br />NDCOUNT MOS[N] nsd EQ 2 &amp; <br />NDCOUNT MOS[N] all EQ 2 OUTPUT ndepl 55 <br />; N-Channel Transistors connected in depletion mode <br />; configuration.<br />NDCOUNT MOS[P] psd EQ 2 &amp; <br />NDCOUNT MOS[P] all EQ 2 OUTPUT pdepl 55 <br />; P-Channel Transistors connected in depletion mode<br />; configuration.  <br />NDCOUNT MOS all EQ 1 OUTPUT mixup 56 <br />; Transistors with their source,drain and gate connected<br />; together. <br />; <br />LCONNECT pwell DISC vss OUTPUT flowel 57 <br />; Any P-well not connected to VSS. <br />; <br />ELCOUNT MOS[N] nsd GT 1 &amp; <br />ELCOUNT MOS[P] psd EQ 0 &amp; <br />ELCOUNT MOS poly GT 0 OUTPUT badngt 40 <br />; a CMOS NAND gate that is driving another gate through the<br />; intermediate node of the stacked N-Channel pull-downs. <br />; <br />ELCOUNT MOS[P] psd GT 1 &amp; <br />ELCOUNT MOS[N] nsd EQ 0 &amp; <br />ELCOUNT MOS poly GT 0 OUTPUT badpgt 40 <br />; a CMOS NOR gate that is driving another gate through the<br />; intermediate node of the stacked P-Channel pull-ups. <br />; <br />;*BREAK LVS <br />;LVSCHK ; Include if you want to run LVS<br />*END<a id="marker-1014538"></a></pre>

<h2>
<a id="pgfId-1014541"></a><a id="40836"></a>Hierarchical ERC</h2>

<p>
<a id="pgfId-1014542"></a>HERC is the electrical rule checking function for hierarchical Dracula. Before reading this section, you might want to be familiar with the information about hierarchical Dracula in Chapter 1, &#8220;Overview.&#8221;</p>
<p>
<a id="pgfId-1014543"></a>HERC works like flat Dracula ERC, with the addition of checking in cell and composite modes. Circuits that contain a high level of repetitive cell placements with minimal cell overlap benefit most from HERC.</p>
<p>
<a id="pgfId-1014544"></a>You can mix HERC commands with HLVS and HLPE commands and use the same mechanism to define Hcell and cell text. Most of the concepts and commands related to HLVS apply also to HERC. Information specific only to HERC is provided in this section. For information about hierarchical operations, refer to <a href="chap6.html#85969">&#8220;LVS Overview&#8221;</a>.</p>

<div class="webflare-information-macro webflare-macro-warning">
<a id="pgfId-1014548"></a>
The HLVS commands FRAME BY and CELL-CHILD-TEXT mask HERC errors and should not be used in an HERC run.</div>

<p>
<a id="pgfId-1014551"></a>For more information about running HERC, see &#8220;<h-hot>Running a Hierarchical Electrical Rules Check</h-hot>&#8221; in the &#8220;Setting up Hierarchical Dracula&#8221; chapter of the Dracula User Guide.</p>

<h3>
<a id="pgfId-1014553"></a>HERC <a id="marker-1014552"></a>Check Modes</h3>

<p>
<a id="pgfId-1014554"></a>You can run HERC in one of three modes: flat, cell, or composite. In flat mode, you can combine HERC with DRC, LVS, or LPE in the same rules file. In cell or composite modes, HERC can run in the same rules file with HLVS and HLPE only. </p>
<p>
<a id="pgfId-1014555"></a>To specify the mode for a job, you must include the CHECK-MODE command in the Description block of your rules file. The default is flat mode.</p>

<h4>
<a id="pgfId-1014557"></a><a id="marker-1014556"></a>Flat Mode</h4>

<p>
<a id="pgfId-1014558"></a>Flat mode HERC checks the electrical rules of the circuit in the same manner as flat mode ERC. To run a job in flat mode, you do not need to edit the ERC rules file.</p>

<h4>
<a id="pgfId-1014560"></a><a id="marker-1014559"></a>Cell Mode </h4>

<p>
<a id="pgfId-1014562"></a>Cell mode HERC checks the cells th<a id="marker-1014561"></a>at you define as Hcells and outputs trapezoid files with the extension<a id="marker-1014563"></a> CET. These files are duplicates of HERC. CEL polygon output files. These files save the trapezoid format for viewing in Dracula Interactive. Dracula Interactive lets you view only cell-mode trapezoid files. </p>

<h4>
<a id="pgfId-1014564"></a>Composite Mode</h4>

<p>
<a id="pgfId-1014566"></a>Composit<a id="marker-1014565"></a>e mode HERC checks the interconnections between Hcells and between Hcells and composite level cells. Dracula treats Hcells as &#8220;black boxes&#8221; and checks only the cell pins. Composite mode does not check inside Hcells. </p>

<h3>
<a id="pgfId-1014568"></a>HERC <a id="marker-1014567"></a>Limitations</h3>

<p>
<a id="pgfId-1014569"></a>HERC has the following limitations:</p>
<ul><li>
<a id="pgfId-1014570"></a>The maximum number of Hcells is 2,000.</li><li>
<a id="pgfId-1014571"></a>No hierarchy can exist among the Hcells.</li><li>
<a id="pgfId-1014572"></a>Neither Hcells nor the composite can have floating contacts. Therefore, at least one of the connect layers for the contact must be present to avoid unrecognizable nodes.</li><li>
<a id="pgfId-1014573"></a>You cannot form devices in the composite-to-cell overlap area, except with the BASE-LAYER command.</li><li>
<a id="pgfId-1014574"></a>To complete an HERC job, run cell mode checks before composite mode checks. Also, for composite mode HERC checks, you must repeat the checking commands in the previous cell mode run. Every HERC function in composite mode must be the same as cell mode.</li></ul>





<h3>
<a id="pgfId-1014577"></a><a id="marker-1014575"></a>HERC Com<a id="herc_commands"></a>mands</h3>

<p>
<a id="pgfId-1014578"></a>The HERC commands are MULTILAB, ELCOUNT, PATHCHK, GPATHCHK, and FLATTEN-PWRGND. These commands are described in detail in the following sections.</p>

<h4>
<a id="pgfId-1014580"></a><a id="marker-1014579"></a>MULTILAB</h4>

<p>
<a id="pgfId-1014581"></a>To view the composite mode multiple label error output on Dracula Interactive or another graphic editor, you must use both the MULTILAB error file and the <a id="marker-1014582"></a>SHORTBOX.DAT file. The original MULTILAB error output shows the short polygons on the composite plane, while SHORTBOX.DAT shows all cell boxes through which the shortest path passes. Both the MULTILAB error file and SHORTBOX.DAT are in the OUTDISK database. </p>
<p>
<a id="pgfId-1014583"></a>For cell mode MULTILAB and all other cell mode ERC commands, Dracula Interactive cannot display the original error output .CEL file because of its polygon format. To display the shortest path, display the corresponding .CET short path file with the same file name.</p>

<h4>
<a id="pgfId-1014585"></a><a id="marker-1014584"></a>ELCOUNT</h4>

<p>
<a id="pgfId-1014586"></a>In composite mode HERC, the ELCOUNT command does a complete check, first counting the <a id="marker-1014587"></a>number of elements on the Hcell boundary, then counting the elements in the composite plane. </p>
<p>
<a id="pgfId-1014588"></a>If you declare the element pads along the boundary in cell mode HERC, the ELCOUNT command checks the elements inside the Hcell and ignores the Hcell boundary. If you do not declare element pads along the boundary, Dracula generates false errors.</p>

<h4>
<a id="pgfId-1014589"></a>GPATHCHK</h4>

<p>
<a id="pgfId-1014590"></a>The GPATHCHK command checks MOS circuits where a node is supposed to have a path to both the power and ground through one or more <br /><a id="marker-1014591"></a>source/drains of the MOS device and resistor device. This command assigns an error code to nodes without a proper <a id="marker-1014592"></a>path to either power or ground.</p>
<p>
<a id="pgfId-1014593"></a>Before using the GPATHCHK command, you must use the GPATHDEF command to define the connectivity flow for your devices.</p>

<h4>
<a id="pgfId-1014594"></a>PATHCHK</h4>

<p>
<a id="pgfId-1014595"></a>The PATHCHK command in composite mode first traces the path inside each Hcell, then all <a id="marker-1014596"></a>cell paths on the composite plane to enforce a complete path check.</p>
<p>
<a id="pgfId-1014597"></a>In cell mode, the PATHCHK command traces only the paths inside Hcell.</p>

<h4>
<a id="pgfId-1014598"></a>FLATTEN-PWRGND</h4>

<p>
<a id="pgfId-1014140"></a>If you digitize text directly down to cells without passing through the composite plane, you can use the FLATTEN-PWRGND=YES command to explode cell power or ground onto the composite plane to detect the shorts formed between cell and composite levels. </p>
<p>
<a id="pgfId-1014242"></a></p>

<br /><a href="#pagetop">Return to top</a><br /></div>
<!-- Begin Buttons --><!-- End Buttons -->
<footer><nav class="navigation"><b><em><a href="chap3.html" id="prev" title="Checking Design Rules (DRC)">Checking Design Rules (DRC)</a></em></b><b><em><a href="chap5.html" id="nex" title="Compiling Network Descriptions (LOGLVS)">Compiling Network Descriptions ...</a></em></b></nav><div>
            For further assistance, contact <a href="https://support.cadence.com">Cadence Online Support</a>. Copyright &#169; 2023, <a href="https://www.cadence.com">Cadence Design Systems, Inc.</a> All rights reserved. 
          </div></footer>
 

 <div id="cad_image_modal" style="background-color: rgba(0, 0, 0, 0.6);"><center id="cad_image_modal_center">&#160;⠀ </center><span style="margin-right:50px;margin-top:100px;font-weight:bold;font-size:20px;background:#e5e5e5;border:1px solid #e5e5e5;border-radius:25px;height:30px;width:20px;padding-left:6px;padding-top:2px;color: black;" onclick="document.querySelector('#cad_image_modal').classList.remove('opac');">X</span></div> 

</body></html>