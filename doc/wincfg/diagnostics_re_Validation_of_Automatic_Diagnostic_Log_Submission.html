
<html><head><title>Validation of Automatic Diagnostic Log Submission</title><meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="TopicTags" content="TRUE" />
<meta name="Approver" content="Technical Publications" />
<meta name="Author" content="dishika" />
<meta name="CreateDate" content="2023-10-26" />
<meta name="CreateTime" content="1698316179" />
<meta name="DataType" content="Manuals" />
<meta name="Description" content="Describes how to manage the Virtuoso Studio Design Environment, including how to start Cadence applications and how to use workspaces and assistant panes to enhance your work practices" />
<meta name="DocTitle" content="Virtuoso Studio Design Environment User Guide" />
<meta name="DocType" content="User Guide" />
<meta name="FileTitle" content="Validation of Automatic Diagnostic Log Submission" />
<meta name="FileType" content="Chapter" />
<meta name="FMWikiRelease" content="FM-Wiki-4.0.0" />
<meta name="Keyword" content="wincfg" />
<meta name="Language" content="English" />
<meta name="ModifiedDate" content="2023-10-26" />
<meta name="ModifiedTime" content="1698316179" />
<meta name="NextFile" content="diagnostics_ct_How_to_Send_the_Diagnostic_Logs_to_Cadence.html" />
<meta name="Group" content="" />
<meta name="Platform" content="Cadence Shared Tools" />
<meta name="PrevFile" content="diagnostics_re_Use_of_UNIX_sed_Command_in_Anonymization.html" />
<meta name="c_product" content="Virtuoso Layout Suite,Virtuoso Schematic Editor,Virtuoso Analog Design Environment" />
<meta name="Product" content="Virtuoso Shared Tools" />
<meta name="ProductFamily" content="Virtuoso Shared Tools" />
<meta name="ProductVersion" content="IC23.1" />
<meta name="RightsManagement" content="Copyright 2023 Cadence Design Systems Inc." />
<meta name="Title" content="Virtuoso Studio Design Environment User Guide -- Validation of Automatic Diagnostic Log Submission" />
<meta name="Keywords" content="" />
<meta name="topic_type" content="reference" />
<meta name="reference_type" content="user interface reference" />
<meta name="prod_feature" content="Design Environment" />
<meta name="prod_subfeature" content="Diagnostics" />
<meta name="new_topic" content="No" />
<meta name="spotlight_topic" content="0" />
<meta name="Version" content="IC23.1" />
<meta name="SpaceKey" content="wincfgIC231" />
<meta name="webflare-version" content="2.5" />
<link rel="stylesheet" href="styles/webflare.css" type="text/css" />


  <script>/*<![CDATA[*/
 document.addEventListener("DOMContentLoaded", function(event) {  document.querySelectorAll("img").forEach((img, index) => {
if (img.hasAttribute("usemap")){return;}else{img.classList.add("cursorclass");} img.addEventListener("click", (e) => {if(img.hasAttribute("usemap")){            img.setAttribute("style","cursor:none;");return;};document.querySelector("#cad_image_modal").classList.add("opac");document.querySelector("#cad_image_modal_center").innerHTML = `<img style="position:absolute;top:0;bottom:0;left:0;right:0;margin: auto;max-height:95%;"  src="${e.target.src}">`;});});});
/*]]>*/</script> 




 <style>/*<![CDATA[*/
.cursorclass{cursor:pointer;}#cad_image_modal{position:fixed;left:0;top:0;width:100%;background:#00000099;overflow:hidden;height:0;opacity:0;transition: height 0ms 1s, opacity 1s 0ms;}#cad_image_modal.opac{height: 100%;opacity: 1;transition: height 0ms 0ms, opacity 1s 0ms;}#cad_image_modal span{position:fixed;right:10px;top:10px;cursor:pointer;color:#fff;}
/*]]>*/</style> 
</head><body style="background-color: #FFFFFF;"><a name="pagetop"></a>
<!-- Begin Buttons -->
<header><div class="docHeadr">Product Documentation<img src="icons/Cadence-Logo.jpg" /></div><nav class="blueHead"><ul><li><a class="content" href="wincfgTOC.html">Contents</a></li><li><a class="prev" href="diagnostics_re_Use_of_UNIX_sed_Command_in_Anonymization.html" title="Use of UNIX &#39;sed&#39; Command in Anonymization">Use of UNIX &#39;sed&#39; Command in A ...</a></li><li style="float: right;"><a class="viewPrint" href="wincfg.pdf">View/Print PDF</a></li><li style="float: right;margin-right: 25px;"><a class="nextd" href="diagnostics_ct_How_to_Send_the_Diagnostic_Logs_to_Cadence.html" title="How to Send the Diagnostic Logs to Cadence">How to Send the Diagnostic Log ...</a></li></ul></nav></header>
<!-- End Buttons -->
<h5><center>Virtuoso Studio Design Environment User Guide<br />Product Version IC23.1, November 2023</center></h5><div id="main-content" style="min-height: 50vh; margin-left: 5%; margin-right: 2%;"><a name="#firstpage"></a>

<a name="Filename:re_Validation_of_Automatic_Diagnostic_Log_Submission" title="Validation of Automatic Diagnostic Log Submission"></a><h2>
<a name="pgfId-1059846"></a><a name="73243"></a>Validation of Automatic Diagnostic Log Submission</h2>

<p>
<a name="pgfId-1059847"></a>You can validate that the automatic diagnostic log submission is working with the help of the <code>vails_test</code> script. This script is located in the following folder:</p>
<p>
<a name="pgfId-1059849"></a><code>install_dir/share/cdssetup/vails/</code> </p>
<p>
<a name="pgfId-1059851"></a>By default, this script checks the whether the <code>vails_enabled</code> script is readable and executable. </p>
<p>
<a name="pgfId-1059853"></a>To run the <code>vails_test </code>script, type the following command at the UNIX prompt and press Enter:</p>

<pre class="webflare-courier-new codeContent">
<a name="pgfId-1059855"></a>&gt; $ $share/cdssetup/vails/vails_test </pre>

<p>
<a name="pgfId-1059857"></a>If the <code>vails_enabled</code> script is working, the following messages are displayed in the output:</p>
<p>
<a name="pgfId-1086221"></a><code>[OK] Located root of virtuoso installation at /servers/cic_pe/asanwal/hier/ICADVM20.1ISR/latest_download</code></p>
<p>
<a name="pgfId-1086222"></a><code>[OK] &#39;/servers/cic_pe/asanwal/hier/ICADVM20.1ISR/latest_download/share/cdssetup/vails/vails_enabled&#39; script is installed, and is readable and executable.</code></p>
<p>
<a name="pgfId-1086223"></a><code>[OK] &#39;vails_enabled&#39; script allows log upload after crash</code></p>
<p>
<a name="pgfId-1086224"></a><code>[OK] &#39;vails_enabled&#39; script allows log upload after hang</code></p>
<p>
<a name="pgfId-1086225"></a><code>[OK] &#39;vails_enabled&#39; script disallows log upload for event type other than &#39;crash&#39; and &#39;hang&#39;.</code></p>
<p>
<a name="pgfId-1086226"></a><code>[INFO] Checking if AWS is reachable...</code></p>
<p>
<a name="pgfId-1086227"></a><code>[INFO] Received response.</code></p>
<p>
<a name="pgfId-1086228"></a><code>[INFO] AWS is reachable.</code></p>
<p>
<a name="pgfId-1086229"></a><code>[OK] VAILS configuration is good.</code></p>
<p>
<a name="pgfId-1059867"></a>If there are any errors or warnings, they are reported in the following way:</p>
<p>
<a name="pgfId-1059869"></a><code>[WARN] &#39;vails_enabled&#39; script does not allow log upload after crash. If this is expected, ignore this warning.</code></p>
<p>
<a name="pgfId-1059871"></a><code>[WARN] &#39;vails_enabled&#39; script does not allow log upload after hang. If this is expected, ignore this warning.</code></p>
<p>
<a name="pgfId-1059872"></a><code>[ERROR] &#39;vails_enabled&#39; script allows log upload for event types other than &#39;crash&#39; and &#39;hang&#39; . Other event types may be used in future releases to trigger log submission. Check the documentation to see how to modify the script to restrict log submission to crashes and hangs.</code></p>
<p>
<a name="pgfId-1059874"></a><code>[ERROR] &#39;vails_enabled&#39; script is not executable.</code></p>
<p>
<a name="pgfId-1059876"></a><code>[ERROR] &#39;vails_enabled&#39; script is not readable.</code></p>
<p>
<a name="pgfId-1059878"></a><code>[ERROR] &#39;vails_enabled&#39; script is empty.</code></p>
<p>
<a name="pgfId-1086416"></a>The <code>vails_test</code> script also checks whether AWS is reachable. This check is performed after validating the configuration of the <code>vails_enabled</code> script and before the submission of the test crash log. AWS is considered unreachable when there is no response received from it within 60 seconds.</p>
<p>
<a name="pgfId-1086475"></a>When AWS is not reachable, the following messages are displayed:</p>
<p>
<a name="pgfId-1086476"></a><code>[INFO] Checking if AWS is reachable...</code></p>
<p>
<a name="pgfId-1086477"></a><code>[ERROR] Request failed with response:</code></p>
<p>
<a name="pgfId-1086478"></a><code>Connection closed</code></p>
<p>
<a name="pgfId-1086479"></a><code>[ERROR] AWS is not reachable from this machine. This could be due to a firewall. If you have access to an HTTP proxy, try setting the shell environment variable https_proxy to &quot;:&gt;http://:&quot;.</code></p>
<p>
<a name="pgfId-1086480"></a><code>[ERROR] Cannot submit logs because AWS is not reachable from eu-lnx-38.</code></p>
<p>
<a name="pgfId-1086520"></a>You can use the <code>vails_test</code> script for the following tasks: </p>
<p>
<a name="pgfId-1059881"></a><strong>Case 1</strong>: If you provide an additional argument <code>yes</code>, the script generates an artificial crash by issuing a fatal command in the CIW. If the <code>vails_enabled</code> script is working, the crash log gets created and submitted.</p>
<p>
<a name="pgfId-1059883"></a>To run the <code>vails_test</code> script with argument <code>yes</code>, type the following command at the UNIX prompt and press Enter:</p>

<pre class="webflare-courier-new codeContent">
<a name="pgfId-1059885"></a>&gt; $share/cdssetup/vails/vails_test yes</pre>

<p>
<a name="pgfId-1059887"></a>If the <code>vails_enabled</code> script is working, the following messages are displayed in the output:</p>
<p>
<a name="pgfId-1086256"></a><code>[OK] Located root of virtuoso installation at /servers/cic_pe/asanwal/hier/ICADVM20.1ISR/latest_download</code></p>
<p>
<a name="pgfId-1086257"></a><code>[OK] &#39;/servers/cic_pe/asanwal/hier/ICADVM20.1ISR/latest_download/share/cdssetup/vails/vails_enabled&#39; script is installed, and is readable and executable.</code></p>
<p>
<a name="pgfId-1086258"></a><code>[OK] &#39;vails_enabled&#39; script allows log upload after crash</code></p>
<p>
<a name="pgfId-1086259"></a><code>[OK] &#39;vails_enabled&#39; script allows log upload after hang</code></p>
<p>
<a name="pgfId-1086260"></a><code>[OK] &#39;vails_enabled&#39; script disallows log upload for event type other than &#39;crash&#39; and &#39;hang&#39;.</code></p>
<p>
<a name="pgfId-1086261"></a><code>[INFO] Checking if AWS is reachable...</code></p>
<p>
<a name="pgfId-1086262"></a><code>[INFO] Received response.</code></p>
<p>
<a name="pgfId-1086263"></a><code>[INFO] AWS is reachable.</code></p>
<p>
<a name="pgfId-1086264"></a><code>[INFO] Preparing artificial virtuoso crash log for submission...</code></p>
<p>
<a name="pgfId-1086265"></a><code>[INFO] Looking for path to crash report in /servers/cic_pe/asanwal/hier/ICADVM20.1ISR/latest_download/share/cdssetup/vails/artificial_crash.log.</code></p>
<p>
<a name="pgfId-1086266"></a><code>[INFO] Crash report file is /tmp/crashReport_060123_160424_ICADVM20.1-64b.500.33.EA7_asanwal_noivl-asanwal.log.</code></p>
<p>
<a name="pgfId-1086267"></a><code>[INFO] Log type is crash.</code></p>
<p>
<a name="pgfId-1086268"></a><code>[INFO] Target name is /tmp/anonymized_crashReport_060123_160424_ICADVM20.1-64b.500.33.EA7.log.</code></p>
<p>
<a name="pgfId-1086269"></a><code>[INFO] Anonymization tool is /servers/cic_pe/asanwal/hier/ICADVM20.1ISR/latest_download/tools/dfII/bin/vailsAnonymizeLog.sh.</code></p>
<p>
<a name="pgfId-1086270"></a><code>[INFO] Command to anonymize file(s):</code></p>
<p>
<a name="pgfId-1086271"></a><code>/servers/cic_pe/asanwal/hier/ICADVM20.1ISR/latest_download/tools/dfII/bin/vailsAnonymizeLog.sh /tmp/crashReport_060123_160424_ICADVM20.1-64b.500.33.EA7_asanwal_noivl-asanwal.log.CDS.log /tmp/anonymized_crashReport_060123_160424_ICADVM20.1-64b.500.33.EA7.log.CDS.log /tmp/crashReport_060123_160424_ICADVM20.1-64b.500.33.EA7_asanwal_noivl-asanwal.log /tmp/anonymized_crashReport_060123_160424_ICADVM20.1-64b.500.33.EA7.log</code></p>
<p>
<a name="pgfId-1086272"></a><code>[INFO] Command to create archive file 103426.tar:</code></p>
<p>
<a name="pgfId-1086273"></a><code>tar cf 103426.tar -C /tmp anonymized_crashReport_060123_160424_ICADVM20.1-64b.500.33.EA7.log.CDS.log -C /tmp anonymized_crashReport_060123_160424_ICADVM20.1-64b.500.33.EA7.log</code></p>
<p>
<a name="pgfId-1086274"></a><code>[INFO] Command to compress archive file:</code></p>
<p>
<a name="pgfId-1086275"></a><code>gzip 103426.tar</code></p>
<p>
<a name="pgfId-1086276"></a><code>[INFO] Requesting URL for upload.</code></p>
<p>
<a name="pgfId-1086277"></a><code>[INFO] Sending request.</code></p>
<p>
<a name="pgfId-1086278"></a><code>[INFO] Received response.</code></p>
<p>
<a name="pgfId-1086279"></a><code>[INFO] Received valid URL.</code></p>
<p>
<a name="pgfId-1086280"></a><code>[INFO] Sending upload request.</code></p>
<p>
<a name="pgfId-1086281"></a><code>[INFO] Received response.</code></p>
<p>
<a name="pgfId-1086282"></a><code>[INFO] Successfully uploaded file.</code></p>
<p>
<a name="pgfId-1086283"></a><code>[OK] Crash log submitted successfully.</code></p>
<p>
<a name="pgfId-1086284"></a><code>[OK] VAILS configuration is good.</code></p>
<p>
<a name="pgfId-1059912"></a>Virtuoso is launched, when <code>Preparing artificial virtuoso crash log for uploading...</code> is displayed in the output, and the CIW appears briefly before an artificial crash is invoked using a replay file. </p>
<p>
<a name="pgfId-1071722"></a><strong>Case 2</strong>: If the <code>vailsAnonymizeLog.cfg</code> file is missing. In this case, when you run the <code>vails_test</code> script with argument <code>yes</code> at the UNIX prompt, the following messages are displayed. </p>
<p>
<a name="pgfId-1086333"></a>[<code>OK] Located root of virtuoso installation at /servers/cic_pe/asanwal/hier/ICADVM20.1ISR/latest_download</code></p>
<p>
<a name="pgfId-1086334"></a><code>[OK] &#39;/servers/cic_pe/asanwal/hier/ICADVM20.1ISR/latest_download/share/cdssetup/vails/vails_enabled&#39; script is installed, and is readable and executable.</code></p>
<p>
<a name="pgfId-1086335"></a><code>[OK] &#39;vails_enabled&#39; script allows log upload after crash</code></p>
<p>
<a name="pgfId-1086336"></a><code>[OK] &#39;vails_enabled&#39; script allows log upload after hang</code></p>
<p>
<a name="pgfId-1086337"></a><code>[OK] &#39;vails_enabled&#39; script disallows log upload for event type other than &#39;crash&#39; and &#39;hang&#39;.</code></p>
<p>
<a name="pgfId-1086338"></a><code>[INFO] Checking if AWS is reachable...</code></p>
<p>
<a name="pgfId-1086339"></a><code>[INFO] Received response.</code></p>
<p>
<a name="pgfId-1086340"></a><code>[INFO] AWS is reachable.</code></p>
<p>
<a name="pgfId-1086341"></a><code>[INFO] Preparing artificial virtuoso crash log for submission...</code></p>
<p>
<a name="pgfId-1086342"></a><code>[INFO] Looking for path to crash report in /servers/cic_pe/asanwal/hier/ICADVM20.1ISR/latest_download/share/cdssetup/vails/artificial_crash.log.</code></p>
<p>
<a name="pgfId-1086343"></a><code>[INFO] Crash report file is /tmp/crashReport_060123_161108_ICADVM20.1-64b.500.33.EA7_asanwal_noivl-asanwal.log.</code></p>
<p>
<a name="pgfId-1086344"></a><code>[INFO] Log type is crash.</code></p>
<p>
<a name="pgfId-1086345"></a><code>[INFO] Target name is /tmp/anonymized_crashReport_060123_161108_ICADVM20.1-64b.500.33.EA7.log.</code></p>
<p>
<a name="pgfId-1086346"></a><code>[INFO] Anonymization tool is /servers/cic_pe/asanwal/hier/ICADVM20.1ISR/latest_download/tools/dfII/bin/vailsAnonymizeLog.sh.</code></p>
<p>
<a name="pgfId-1086347"></a><code>[INFO] Command to anonymize file(s):</code></p>
<p>
<a name="pgfId-1086348"></a><code>/servers/cic_pe/asanwal/hier/ICADVM20.1ISR/latest_download/tools/dfII/bin/vailsAnonymizeLog.sh /tmp/crashReport_060123_161108_ICADVM20.1-64b.500.33.EA7_asanwal_noivl-asanwal.log.CDS.log /tmp/anonymized_crashReport_060123_161108_ICADVM20.1-64b.500.33.EA7.log.CDS.log /tmp/crashReport_060123_161108_ICADVM20.1-64b.500.33.EA7_asanwal_noivl-asanwal.log /tmp/anonymized_crashReport_060123_161108_ICADVM20.1-64b.500.33.EA7.log</code></p>
<p>
<a name="pgfId-1086349"></a><code>[ERROR] Failed to anonymize file(s):</code></p>
<p>
<a name="pgfId-1086351"></a><code>[ERROR] Unable to generate archive file.</code></p>
<p>
<a name="pgfId-1086352"></a><code>[ERROR] Failed to submit crash log.</code></p>
<p>
<a name="pgfId-1059942"></a>The script also returns an exit status that can be used to check the results when it is called from your own script. In case there are no errors exit status is zero. This means that all checks are fine, or all checks are fine with warnings, and a non-zero exit status if any error is reported.</p>

<h3>
<a name="pgfId-1061337"></a>vails_test Script to Launch Virtuoso using Job Scheduler</h3>

<p>
<a name="pgfId-1061435"></a>You can use the <code>CDS_VAILS_TEST_LAUNCH_CMD</code> shell environment variable to submit Virtuoso to a job scheduler rather than running it on the local machine. For example, the following command causes Virtuoso to be run by submitting a job to the <code>lnx64</code> queue on the Load Sharing Facility (LSF) cluster:</p>

<pre class="webflare-courier-new codeContent">
<a name="pgfId-1061589"></a>CDS_VAILS_TEST_LAUNCH_CMD &#39;bsub -K -q lnx64&#39;</pre>

<p>
<a name="pgfId-1061906"></a>The <code>-K</code> flag is needed because the <code>vails_test</code> script cannot proceed with its checks until Virtuoso exits. <code>-K</code> causes the <code>bsub</code> (command that submits jobs to LSF) to wait until the job finishes.</p>

<h4><em>
<a name="pgfId-1071753"></a>Related Topics</em></h4>

<p>
<a name="pgfId-1071749"></a><a href="diagnostics_re_VAILS_Enabled_Script.html#28434">VAILS Enabled Script</a></p>

<!-- [TOPIC_END] -->
  <!--  [TOPIC_START_OPEN]type=cmdref

[TOPIC_START_ATTR]text=How to Send the Diagnostic Logs to Cadence

[TOPIC_START_ATTR]description=

[TOPIC_START_ATTR]keyword=

[TOPIC_START_CLOSE] -->




<br /><a href="#pagetop">Return to top</a><br /></div>
<!-- Begin Buttons --><!-- End Buttons -->
<footer><nav class="navigation"><b><em><a href="diagnostics_re_Use_of_UNIX_sed_Command_in_Anonymization.html" id="prev" title="Use of UNIX &#39;sed&#39; Command in Anonymization">Use of UNIX &#39;sed&#39; Command in A ...</a></em></b><b><em><a href="diagnostics_ct_How_to_Send_the_Diagnostic_Logs_to_Cadence.html" id="nex" title="How to Send the Diagnostic Logs to Cadence">How to Send the Diagnostic Log ...</a></em></b></nav><div>
            For further assistance, contact <a href="https://support.cadence.com">Cadence Online Support</a>. Copyright &#169; 2023, <a href="https://www.cadence.com">Cadence Design Systems, Inc.</a> All rights reserved. 
          </div></footer>
 

 <div id="cad_image_modal" style="background-color: rgba(0, 0, 0, 0.6);"><center id="cad_image_modal_center">&#160;⠀ </center><span style="margin-right:50px;margin-top:100px;font-weight:bold;font-size:20px;background:#e5e5e5;border:1px solid #e5e5e5;border-radius:25px;height:30px;width:20px;padding-left:6px;padding-top:2px;color: black;" onclick="document.querySelector('#cad_image_modal').classList.remove('opac');">X</span></div> 

</body></html>