
<html><head><title>lxEvalCDFCallbacks</title><meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="Approver" content="Technical Publications" />
<meta name="Author" content="sumehta" />
<meta name="CreateDate" content="2023-10-26" />
<meta name="CreateTime" content="1698328080" />
<meta name="DataType" content="Manuals" />
<meta name="Description" content="Describes the functionality of the Virtuoso Layout Suite XL connectivity-driven features in the current release." />
<meta name="DocTitle" content="Virtuoso Layout Suite XL: Connectivity Driven Editing User Guide" />
<meta name="DocType" content="User Guide" />
<meta name="FileTitle" content="lxEvalCDFCallbacks" />
<meta name="FileType" content="Chapter" />
<meta name="FMWikiRelease" content="FM-Wiki-4.0.0" />
<meta name="Keyword" content="vxlhelp" />
<meta name="Language" content="English" />
<meta name="ModifiedDate" content="2023-10-26" />
<meta name="ModifiedTime" content="1698328080" />
<meta name="NextFile" content="xlEnvars_re_lxFingeringNames.html" />
<meta name="Group" content="" />
<meta name="Platform" content="Custom IC Design" />
<meta name="PrevFile" content="xlEnvars_re_lxDummyBackAnnotateMissingTerm.html" />
<meta name="c_product" content="Virtuoso Layout Suite" />
<meta name="Product" content="Virtuoso Layout Suite" />
<meta name="ProductFamily" content="Virtuoso Layout Suite" />
<meta name="ProductVersion" content="IC23.1" />
<meta name="RightsManagement" content="Copyright 2023 Cadence Design Systems Inc." />
<meta name="Title" content="Virtuoso Layout Suite XL: Connectivity Driven Editing User Guide -- lxEvalCDFCallbacks" />
<meta name="Keywords" content="" />
<meta name="topic_type" content="reference" />
<meta name="reference_type" content="env vars" />
<meta name="prod_feature" content="Layout XL" />
<meta name="prod_subfeature" content="Check Against Source" />
<meta name="new_topic" content="No" />
<meta name="spotlight_topic" content="0" />
<meta name="Version" content="IC23.1" />
<meta name="SpaceKey" content="vxlhelpIC231" />
<meta name="webflare-version" content="2.5" />
<link rel="stylesheet" href="styles/webflare.css" type="text/css" />


  <script>/*<![CDATA[*/
 document.addEventListener("DOMContentLoaded", function(event) {  document.querySelectorAll("img").forEach((img, index) => {
if (img.hasAttribute("usemap")){return;}else{img.classList.add("cursorclass");} img.addEventListener("click", (e) => {if(img.hasAttribute("usemap")){            img.setAttribute("style","cursor:none;");return;};document.querySelector("#cad_image_modal").classList.add("opac");document.querySelector("#cad_image_modal_center").innerHTML = `<img style="position:absolute;top:0;bottom:0;left:0;right:0;margin: auto;max-height:95%;"  src="${e.target.src}">`;});});});
/*]]>*/</script> 




 <style>/*<![CDATA[*/
.cursorclass{cursor:pointer;}#cad_image_modal{position:fixed;left:0;top:0;width:100%;background:#00000099;overflow:hidden;height:0;opacity:0;transition: height 0ms 1s, opacity 1s 0ms;}#cad_image_modal.opac{height: 100%;opacity: 1;transition: height 0ms 0ms, opacity 1s 0ms;}#cad_image_modal span{position:fixed;right:10px;top:10px;cursor:pointer;color:#fff;}
/*]]>*/</style> 
</head><body style="background-color: #FFFFFF;"><a name="pagetop"></a>
<!-- Begin Buttons -->
<header><div class="docHeadr">Product Documentation<img src="icons/Cadence-Logo.jpg" /></div><nav class="blueHead"><ul><li><a class="content" href="vxlhelpTOC.html">Contents</a></li><li><a class="prev" href="xlEnvars_re_lxDummyBackAnnotateMissingTerm.html" title="lxDummyBackAnnotateMissingTerm">lxDummyBackAnnotateMissingTerm</a></li><li style="float: right;"><a class="viewPrint" href="vxlhelp.pdf">View/Print PDF</a></li><li style="float: right;margin-right: 25px;"><a class="nextd" href="xlEnvars_re_lxFingeringNames.html" title="lxFingeringNames">lxFingeringNames</a></li></ul></nav></header>
<!-- End Buttons -->
<h5><center>Virtuoso Layout Suite XL: Connectivity Driven Editing User Guide<br />Product Version IC23.1, November 2023</center></h5><div id="main-content" style="min-height: 50vh; margin-left: 5%; margin-right: 2%;"><a name="#firstpage"></a>

<a id="Filename:re_lxEvalCDFCallbacks" title="lxEvalCDFCallbacks"></a><h3>
<a id="pgfId-1024170"></a><a id="98885"></a>lx<a id="lxEvalCDFCallbacks"></a>Eval<a id="cdf"></a>CDFCallbacks</h3>
<a id="pgfId-1024171"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
layoutXL lxEvalCDFCallbacks boolean { t | nil }</pre>
<h4>
<a id="pgfId-1024172"></a>Description</h4>

<p>
<a id="pgfId-1107330"></a>Causes all SKILL callbacks defined on Common Description Format (CDF) parameters to be evaluated by default when you run the following Layout XL commands. Callbacks defined on buttons are never evaluated.</p>
<ul><li>
<a id="pgfId-1107355"></a><em>Generate All From Source</em></li><li>
<a id="pgfId-1645032"></a><em>Generate Selected From Source</em></li><li>
<a id="pgfId-1645033"></a><em>Generate Folded Devices</em></li><li>
<a id="pgfId-1644845"></a><em>Update Components And Nets</em></li><li>
<a id="pgfId-1107357"></a><em>Update Layout Parameters</em></li><li>
<a id="pgfId-1107358"></a><em>Update Schematic Parameters</em></li><li>
<a id="pgfId-1681312"></a>Back Annotate (Dummy backannotation)</li></ul>






<p>
<a id="pgfId-1646368"></a>The default is <code>nil</code>.</p>
<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1681135"></a>Irrespective of the value of the <code>lxEvalCDFCallbacks</code> environment variable, the following callbacks are always evaluated:</div>
<ul><li>
<a id="pgfId-1681221"></a><code>Width</code> parameter callback for <em>Generate Folded Devices</em></li><li>
<a id="pgfId-1733252"></a><code>fingers</code> parameter callback for <em>Split Fingered Devices</em></li><li>
<a id="pgfId-1740506"></a><code>m</code> parameter callback, if changing the mfactor for backannotation</li><li>
<a id="pgfId-1740474"></a><code>Width</code> or <code>fingers</code> parameter callback or both the callbacks for <em>Generate All From Source</em> with folding and finger split enabled.</li></ul>



<p>
<a id="pgfId-1740475"></a>The callbacks are evaluated in the order in which they are listed in the CDF, so it is important that you set the appropriate callback at the appropriate place in the list. For more information, see <h-hot><a href="xlEnvars_re_lxEvalCDFCallbacks.html#addInfo">Additional Information </a></h-hot>and <h-hot><a actuate="user" class="URL" href="../cdfuser/chap3.html#firstpage" show="replace" xml:link="simple">Defining Parameters</a></h-hot> in the <em>Component Description Format User Guide</em>.</p>

<div class="webflare-information-macro webflare-macro-tip">
<a id="pgfId-1815146"></a>
To prevent any CDF parameters on generated instances from getting evaluated in the schematic, set the parameters as the ones to be ignored for generation. You can use the <a href="xlLam_LAM_File_Logical_Section.html#lamLogical">LAM</a> file, the <a href="xlEnvars_re_paramsToIgnore.html#26861">paramsToIgnore</a> environment variable, or the <a href="xlForms_re_Connectivity_Form.html#38633">Connectivity Form</a> form to do this.</div>
<div class="webflare-information-macro webflare-macro-information">
<a id="pgfId-1681307"></a>
Enabling this environment variable can adversely impact performance, especially on large designs with many callbacks.</div>
<h4>
<a id="pgfId-1195343"></a>GUI Equivalent</h4>
<table class="webflareTable" id="#id1294560">
<tbody><tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1294562"></a>Command:</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1294564"></a><em>Options &#8211; Connectivity </em>(<em>Parameters</em> tab)</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1294566"></a>Field:</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1294568"></a>Evaluate CDF callbacks during generation and update</p>
<p>
<a id="pgfId-1751022"></a>(<a href="xlForms_re_Connectivity_Form.html#38633">Connectivity Form</a>)</p>
</td>
</tr>
</tbody></table>
<h4>
<a id="pgfId-1234526"></a>Examples</h4>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1236206"></a>envGetVal(&quot;layoutXL&quot; &quot;lxEvalCDFCallbacks&quot;)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1234527"></a>envSetVal(&quot;layoutXL&quot; &quot;lxEvalCDFCallbacks&quot; &#39;boolean t)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1234528"></a>envSetVal(&quot;layoutXL&quot; &quot;lxEvalCDFCallbacks&quot; &#39;boolean nil)</pre>
<h4>
<a id="pgfId-1688607"></a>Additional<a id="addInfo"></a> Information</h4>

<p>
<a id="pgfId-2242913"></a>CDF callbacks are SKILL expressions that are triggered when the value of a parameter is set in any of these forms&#8212;the <h-hot><a actuate="user" class="URL" href="../comphelp/appD.html#InstCreateForm" show="replace" xml:link="simple">Add Instance</a></h-hot> form, the <a href="xlForms_re_Create_Path_Form.html#93221">Create Path Form</a> form, the <h-hot><a actuate="user" class="URL" href="../comphelp/chap16.html#firstpage" show="replace" xml:link="simple">Property Editor</a></h-hot> assistant, or the <h-hot><a actuate="user" class="URL" href="../vlehelp/leForms_re_Edit_Properties_Form.html" show="replace" xml:link="simple">Edit Properties</a></h-hot> form.</p>
<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-2242950"></a>If the PDK you are using has callbacks that edit the old Property Editor form or the Add Instance or Create Instance forms, Cadence recommends updating the PDK to remove such form-dependencies that can cause unexpected callback behavior.</div>

<div class="webflare-information-macro webflare-macro-information">
<a id="pgfId-2243006"></a>
If used in batch mode, CDF callbacks cannot allow dialog boxes to display to invite user interaction and may cause Virtuoso to malfunction. CDF callbacks can be designed for interactive use with the Property Editor form but such callbacks are not compatible with batch evaluation.</div>

<p>
<a id="pgfId-1656593"></a>The layoutXL environment variable <code>lxEvalCDFCallbacks</code> fires CDF callbacks in the following order:</p>
<ol><li>
<a id="pgfId-1647220"></a>For the changed parameters, filters out any parameters, if defined in <code>lxCDFCallbackParams</code>, or calls the callbacks on all the changed parameters in the order they appear in the Edit CDF form.</li><li>
<a id="pgfId-1647314"></a>Fires all the other CDF callbacks in the order they appear in the Edit CDF form, apart from the button CDF parameters. If <code>lxCDFCallbackParams</code> is defined, only parameters in this list have their callbacks fired.</li></ol>

<b>Note:</b><br />
<a id="pgfId-1647746"></a>
<ul><li>
<a id="pgfId-1688311"></a><code>lxCDFCallbackParams</code> can be defined as both a global environment variable and as a CDF parameter itself, so you can customize it for a given cell.</li><li>
<a id="pgfId-1746970"></a>Even if <code>lxEvalCDFCallbacks</code> is set to <code>nil</code>, the <code>w</code> callback is triggered during folding, <code>fingers</code> callback is triggered for fingersplit, the <code>w</code> or <code>fingers</code> parameter callback or both the callbacks are triggered during layout generation, and the <code>m</code> callback is triggered for dummy backannotation, if using the m-factor model.</li><li>
<a id="pgfId-1746935"></a>The CDF <code>initProc</code> is always called before the CDF callbacks. </li><li>
<a id="pgfId-1649314"></a>When CDF callbacks are triggered, the CDF <code>doneProc</code> is called after all the parameters are set on the instance.<br /><div class="webflare-information-macro webflare-macro-tip">
<a id="pgfId-1649316"></a>
Because the order of the callbacks depends on the order they appear, it is recommended to have simple CDF parameters appear first and derived parameters appear after these.</div>
<a id="pgfId-1647900"></a>For example, it is recommended to define <code>fw</code> (finger width) before total width (finger width * fingers). If the total width callback is called before the finger width callback, the finger width is not changed and the calculation is based on the previous value. If the finger width callback is called first, <code>fw</code> is set so that the callback uses the new value and is set correctly.<br /><div class="webflare-information-macro webflare-macro-information">
<a id="pgfId-1682062"></a>
Cadence advises against the use of CDF callbacks to compute the value of derived parameters. This is to avoid anomalies that are likely in automatic computation of the derived parameters. For more information, see <a href="xlEnvars_re_lxEvalCDFCallbacks.html#31707">Why Callbacks are not Advised for Deriving Parameter Values</a>.</div><br />
<a id="pgfId-1648036"></a>You can optionally set the <code>lxCDFCallbackParams</code> environment variable to list the callbacks you want to trigger. Some PDK set ups have callbacks that update all the CDF parameters. Therefore, triggering only a few callbacks may be required.</li><li>
<a id="pgfId-1648037"></a>If you use AEL expressions in CDF, such as<code> iPar()</code> or <code>pPar()</code>, you need to set the shell environment variable, <code>CDS_Netlisting_Mode</code> to <code>Analog</code> for Layout XL to evaluate the expressions in the schematic context.<ul><li>
<a id="pgfId-1648092"></a>The CDF <code>parseAsCEL</code> for the parameter should be set to <code>yes</code>. If you want a string, say &#8220;<code>2u</code>&#8221; to be a number, say, <code>2e-6</code> for Layout XL, you need to set <code>parseAsNumber</code> = <code>yes</code>.<br /><div class="webflare-information-macro webflare-macro-information">
<a id="pgfId-1682102"></a>
It is possible that even when <code>CDS_Netlisting_Mode</code> is set to <code>Analog</code> and <code>parseAsCEL</code> is set to <code>yes</code>, you may still not get an accurate layout. This is likely when the design uses callbacks with <code>pPar()</code>. Manually triggering the callbacks by setting <a href="xlEnvars_re_lxEvalCDFCallbacks.html#98885">lxEvalCDFCallbacks</a> to <code>t</code> might help. See <a href="xltroubleshoot_Troubleshoot_Layout_Generation_Problems.html#98742">Issues when pPar and Callbacks are Used in a Design when Generating a Layout</a>. But, Cadence advises against the combined use of CDF parameters with <code>pPar() </code>(AEL expressions) and CDF callbacks. This is meant to prevent getting an incorrect parameter value because the value of the expression is not known at the time the callback is fired.</div></li></ul></li><li>
<a id="pgfId-1682575"></a>If the PDK is golden, you can override the CDF by using User CDF, though the User CDF will need to be loaded every time.</li></ul>


















<h4><em>
<a id="pgfId-1682598"></a><a id="31707"></a>Why Callbacks are not Advised for Deriving Parameter Values</em></h4>

<p>
<a id="pgfId-1682590"></a>Triggering callbacks to derive the values of other parameters is not advised for the following reasons:</p>
<ul><li>
<a id="pgfId-1682992"></a><strong><em>Using callbacks to derive parameter values can prevent parameterization of the source parameters</em></strong></li></ul>
<p>
<a id="pgfId-1682993"></a>For situations where a source parameter is meant to derive the value of another parameter, the source parameter itself cannot be controlled by a variable or an expression, such as <code>pPar()</code> or <code>iPar()</code>. </p>
<p>
<a id="pgfId-1688371"></a>For example, you might want to use the <code>pPar()</code> or <code>iPar()</code> expressions to control the value of a source parameter such that the parameter can be passed down the hierarchy. But, when the source parameter is being used to determine the value of a derived parameter, it can change depending on the value of <code>pPar()</code> at the time when the parameter value is being changed in Property Editor. Therefore, it is important to know the value of <code>pPar()</code> at the time of changing the parameter value to compute the derived parameter accurately. But, knowing the value of<code> pPar()</code> at the time of the parameter change is not possible. Therefore, to avoid having an inaccurate derived parameter, you might need to avoid using a source parameter that depends on <code>pPar()</code> (or <code>iPar()</code>).</p>
<p>
<a id="pgfId-1682995"></a>Cadence recommends that for parameter values that need to be derived, the value must be computed by the application by using the source parameter at the time of usage. This may require computing the derived parameter value at the time of simulation, physical verification, or at the Pcell level. When computing the derived parameter at the Pcell level, the computation can be done in the Pcell SKILL code instead of requiring a CDF callback to be triggered.</p>
<ul><li>
<a id="pgfId-1657548"></a><strong><em>Impossible to determine the correct order for firing multiple callbacks</em></strong></li></ul>
<p>
<a id="pgfId-1657538"></a>When multiple parameters are changed, multiple callbacks need to be triggered. This makes it impossible to predict the correct order in which the callbacks must be fired for a parameter value to be determined accurately.</p>
<p>
<a id="pgfId-1682951"></a>For example, if you were to change the cell name on the Edit Properties form, all the derived parameters can lose their correspondence. So, you may need to trigger a callback for each derived parameter. But, to determine the correct order in which the callbacks must be fired is not simple, and can potentially cause inaccurate derived parameter values. Therefore, using callbacks to determine the value of derived parameters is not recommended.</p>

<h4><em>
<a id="pgfId-1682974"></a>Example</em></h4>

<p>
<a id="pgfId-1682957"></a>Let us assume that the Edit CDF form has the following parameters defined: <code>w</code>, <code>l</code>, <code>fingers</code>, <code>totalW</code></p>
<ul><li>
<a id="pgfId-1647234"></a>If we change <code>w</code> and <code>fingers</code>, the order of the callbacks will be: <code>w</code>, <code>fingers</code>, <code>l</code>, <code>totalW</code></li><li>
<a id="pgfId-1762580"></a>If we just change <code>fingers</code>, the order of the callbacks will be: <code>fingers</code>, <code>w</code>, <code>l</code>, <code>totalW</code></li><li>
<a id="pgfId-1762581"></a>If we now set <code>lxCDFCallbackParams</code> to &#8220;<code>w l</code>&#8221; and then:<ul><li>
<a id="pgfId-1794759"></a>Change <code>w</code> and <code>fingers</code>, the order of the callbacks will be: <code>w</code>, <code>l</code></li><li>
<a id="pgfId-1762583"></a>Change <code>fingers</code>, the order of the callbacks will be: <code>w</code>, <code>l</code></li><li>
<a id="pgfId-1647730"></a>Change <code>l</code>, the order of the callbacks will be: <code>l</code>, <code>w</code></li></ul></li></ul>






<h4><em>
<a id="pgfId-1060596"></a>Related Topics</em></h4>

<p>
<a id="pgfId-1060600"></a><h-hot><a actuate="user" class="URL" href="http://support.cadence.com/wps/mypoc/cos?uri=deeplinkmin:ViewSolution;DocumentType=tbshtng,skill;solutionNumber=11223092" show="replace" xml:link="simple"></a><a actuate="user" class="URL" href="http://support.cadence.com/wps/mypoc/cos?urile=deeplinkmin:ViewSolution;DocumentType=tbshtng,skill;solutionNumber=11223092" show="replace" xml:link="simple">Dangers of CDF Callbacks</a></h-hot></p>
<p>
<a id="pgfId-1682678"></a><a href="xltroubleshoot_Troubleshoot_Layout_Generation_Problems.html#98742">Issues when pPar and Callbacks are Used in a Design when Generating a Layout</a></p>
<p>
<a id="pgfId-1656784"></a><a href="xlEnvars_re_List_of_Layout_XL_Environment_Variables.html#21048">List of Layout XL Environment Variables</a></p>
<p>
<a id="pgfId-1686145"></a><a href="xlEnvars.html#35170">Setting Environment Variables</a></p>

<br /><a href="#pagetop">Return to top</a><br /></div>
<!-- Begin Buttons --><!-- End Buttons -->
<footer><nav class="navigation"><b><em><a href="xlEnvars_re_lxDummyBackAnnotateMissingTerm.html" id="prev" title="lxDummyBackAnnotateMissingTerm">lxDummyBackAnnotateMissingTerm</a></em></b><b><em><a href="xlEnvars_re_lxFingeringNames.html" id="nex" title="lxFingeringNames">lxFingeringNames</a></em></b></nav><div>
            For further assistance, contact <a href="https://support.cadence.com">Cadence Online Support</a>. Copyright &#169; 2023, <a href="https://www.cadence.com">Cadence Design Systems, Inc.</a> All rights reserved. 
          </div></footer>
 

 <div id="cad_image_modal" style="background-color: rgba(0, 0, 0, 0.6);"><center id="cad_image_modal_center">&#160;⠀ </center><span style="margin-right:50px;margin-top:100px;font-weight:bold;font-size:20px;background:#e5e5e5;border:1px solid #e5e5e5;border-radius:25px;height:30px;width:20px;padding-left:6px;padding-top:2px;color: black;" onclick="document.querySelector('#cad_image_modal').classList.remove('opac');">X</span></div> 

</body></html>