
<html><head><title>Sample Parameterized Cells Set Up for Abutment</title><meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="Approver" content="Technical Publications" />
<meta name="Author" content="sumehta" />
<meta name="CreateDate" content="2023-10-26" />
<meta name="CreateTime" content="1698327968" />
<meta name="DataType" content="Manuals" />
<meta name="Description" content="Describes the functionality of the Virtuoso Layout Suite XL connectivity-driven features in the current release." />
<meta name="DocTitle" content="Virtuoso Layout Suite XL: Connectivity Driven Editing User Guide" />
<meta name="DocType" content="User Guide" />
<meta name="FileTitle" content="Sample Parameterized Cells Set Up for Abutment" />
<meta name="FileType" content="Chapter" />
<meta name="FMWikiRelease" content="FM-Wiki-4.0.0" />
<meta name="Keyword" content="vxlhelp" />
<meta name="Language" content="English" />
<meta name="ModifiedDate" content="2023-10-26" />
<meta name="ModifiedTime" content="1698327968" />
<meta name="NextFile" content="deviceAbut_tk_Creating_CMOS_Pcells_to_Use_with_Abutment.html" />
<meta name="Group" content="" />
<meta name="Platform" content="Custom IC Design" />
<meta name="PrevFile" content="deviceAbut_Automatic_Abutment_Flow.html" />
<meta name="c_product" content="Virtuoso Layout Suite" />
<meta name="Product" content="Virtuoso Layout Suite" />
<meta name="ProductFamily" content="Virtuoso Layout Suite" />
<meta name="ProductVersion" content="IC23.1" />
<meta name="RightsManagement" content="Copyright 2023 Cadence Design Systems Inc." />
<meta name="Title" content="Virtuoso Layout Suite XL: Connectivity Driven Editing User Guide -- Sample Parameterized Cells Set Up for Abutment" />
<meta name="Keywords" content="" />
<meta name="topic_type" content="concept" />
<meta name="reference_type" content="" />
<meta name="prod_feature" content="Layout XL" />
<meta name="prod_subfeature" content="Abutment" />
<meta name="new_topic" content="No" />
<meta name="spotlight_topic" content="0" />
<meta name="Version" content="IC23.1" />
<meta name="SpaceKey" content="vxlhelpIC231" />
<meta name="webflare-version" content="2.5" />
<link rel="stylesheet" href="styles/webflare.css" type="text/css" />


  <script>/*<![CDATA[*/
 document.addEventListener("DOMContentLoaded", function(event) {  document.querySelectorAll("img").forEach((img, index) => {
if (img.hasAttribute("usemap")){return;}else{img.classList.add("cursorclass");} img.addEventListener("click", (e) => {if(img.hasAttribute("usemap")){            img.setAttribute("style","cursor:none;");return;};document.querySelector("#cad_image_modal").classList.add("opac");document.querySelector("#cad_image_modal_center").innerHTML = `<img style="position:absolute;top:0;bottom:0;left:0;right:0;margin: auto;max-height:95%;"  src="${e.target.src}">`;});});});
/*]]>*/</script> 




 <style>/*<![CDATA[*/
.cursorclass{cursor:pointer;}#cad_image_modal{position:fixed;left:0;top:0;width:100%;background:#00000099;overflow:hidden;height:0;opacity:0;transition: height 0ms 1s, opacity 1s 0ms;}#cad_image_modal.opac{height: 100%;opacity: 1;transition: height 0ms 0ms, opacity 1s 0ms;}#cad_image_modal span{position:fixed;right:10px;top:10px;cursor:pointer;color:#fff;}
/*]]>*/</style> 
</head><body style="background-color: #FFFFFF;"><a name="pagetop"></a>
<!-- Begin Buttons -->
<header><div class="docHeadr">Product Documentation<img src="icons/Cadence-Logo.jpg" /></div><nav class="blueHead"><ul><li><a class="content" href="vxlhelpTOC.html">Contents</a></li><li><a class="prev" href="deviceAbut_Automatic_Abutment_Flow.html" title="Automatic Abutment Flow">Automatic Abutment Flow</a></li><li style="float: right;"><a class="viewPrint" href="vxlhelp.pdf">View/Print PDF</a></li><li style="float: right;margin-right: 25px;"><a class="nextd" href="deviceAbut_tk_Creating_CMOS_Pcells_to_Use_with_Abutment.html" title="Creating CMOS Pcells to Use with Abutment">Creating CMOS Pcells to Use wi ...</a></li></ul></nav></header>
<!-- End Buttons -->
<h5><center>Virtuoso Layout Suite XL: Connectivity Driven Editing User Guide<br />Product Version IC23.1, November 2023</center></h5><div id="main-content" style="min-height: 50vh; margin-left: 5%; margin-right: 2%;"><a name="#firstpage"></a>

<a id="Filename:Sample_Parameterized_Cells_Set_Up_for_Abutment" title="Sample Parameterized Cells Set Up for Abutment"></a><h3>
<a id="pgfId-1069246"></a><a id="12282"></a>Sample Parameterized Cells Set Up for Abutment</h3>
<h4><em>
<a id="pgfId-1069247"></a>Example 1</em></h4>

<p>
<a id="pgfId-1069248"></a>This example shows what each of the different parts does:</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1069249"></a>----------------------------------------------------------------------<br />; Function: abutFunction(iA iB pA pB pASide connection event <br />; @optional (group nil))<br />;<br />; Inputs: group - the abutment group that these two cells belong to.<br />; ______________________________________________________________________</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1069250"></a>;<br />;      iA         = Instance Id of cell that will move during abutment<br />; ______________________________________________________________________</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1069251"></a>;<br />;      iB         = Instance Id of cell being abutted to<br />; ______________________________________________________________________</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1069252"></a>;<br />;      pA         = Overlapping Pin Fig of iA<br />; ______________________________________________________________________</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1069253"></a>;<br />;      pB         = Overlapping Pin Fig of iB<br />; ______________________________________________________________________</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1069254"></a>;<br />;      pASide     = Abutting pin access direction<br />; ______________________________________________________________________</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1069255"></a>;<br />       connection = an integer value of 1 or 2  that indicates:<br />;<br />;      1. pins are connected to the same net and do not<br />;         connect to any other pin.<br />;<br />;      2. pins are connected to the same net and the net<br />;         connects to other pins<br />; ______________________________________________________________________</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1069256"></a>;<br />;      event      = integer that represents abutment event:<br />;<br />;      1. compute abutment offset<br />;      2. Pcell parameter adjustment for abutment<br />;      3. Pcell parameter adjustment for unabutment<br />; ______________________________________________________________________</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1069257"></a>;<br />;      group      = abutment group pointer available to specific events:<br />;      abutment group pointer available to Events 1, 2, and 3<br />; ______________________________________________________________________</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1069259"></a>;
; Outputs: depends
;
; Side effects:
;
procedure( abutFunction(iA iB pA pB pASide connection event @optional (group
nil))
   prog((result)
 
   case(event
      (1 ; Compute offset
         result = getAbutmentOffset(iA iB pA pB pASide connection)
      )
      (2 ; Adjust Pcell parameters
         result = setAbutmentParams(iA iB pA pB pASide connection group)
      )
      (3 ; Adjust Pcell parameters back to default resetAbutmentParams(group iA iB)
         result = t
      )
      (t&#160;&#160;&#160;&#160; ; Anything else return a nil<br />         result = nil</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1069260"></a>      )<br />   )<br />   return(result)<br />   )<br />)</pre>
<h4><em>
<a id="pgfId-1069261"></a>Example 2</em></h4>

<p>
<a id="pgfId-1069262"></a>This example shows how to add abutment properties to pins in an inverter Pcell.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1069263"></a>; *** the following 4 pins are on metal1 and are on ***<br />; *** the power and ground rails. This will allow   ***<br />; *** abutment to other standard cells              ***<br /> <br />    obj = leftVddPin~&gt;dbId<br />    dbReplaceProp(obj &quot;abutAccessDir&quot; &quot;list&quot; list(&quot;left&quot;))<br />    dbReplaceProp(obj &quot;abutClass&quot; &quot;string&quot; &quot;stdcell&quot;)<br />    dbReplaceProp(obj &quot;abutFunction&quot; &quot;string&quot; &quot;stdCellFunc&quot;)<br /> <br />; *** the following property is a technique for passing ***<br />; *** information to the user defined function. In this ***<br />; *** case the minimum cell height is dependent on many ***<br />; *** factors including design rules and is originally  ***<br />; *** calculated in the Pcell code. This avoids         ***<br />; *** duplicating calculations in the user-defined      ***<br />; *** function                                          ***<br /> <br />    dbReplaceProp(obj &quot;minCellHeight&quot; &quot;float&quot; minH)<br /> <br />    obj = rightVddPin~&gt;dbId<br />    dbReplaceProp(obj &quot;abutAccessDir&quot; &quot;list&quot; list(&quot;right&quot;))<br />    dbReplaceProp(obj &quot;abutClass&quot; &quot;string&quot; &quot;stdcell&quot;)<br />    dbReplaceProp(obj &quot;abutFunction&quot; &quot;string&quot; &quot;stdCellFunc&quot;)<br />    dbReplaceProp(obj &quot;minCellHeight&quot; &quot;float&quot; minH)<br /> <br />    obj = leftGndPin~&gt;dbId<br />    dbReplaceProp(obj &quot;abutAccessDir&quot; &quot;list&quot; list(&quot;left&quot;))<br />    dbReplaceProp(obj &quot;abutClass&quot; &quot;string&quot; &quot;stdcell&quot;)<br />    dbReplaceProp(obj &quot;abutFunction&quot; &quot;string&quot; &quot;stdCellFunc&quot;)<br />    dbReplaceProp(obj &quot;minCellHeight&quot; &quot;float&quot; minH)<br /> <br />    obj = rightGndPin~&gt;dbId<br />    dbReplaceProp(obj &quot;abutAccessDir&quot; &quot;list&quot; list(&quot;right&quot;))<br />    dbReplaceProp(obj &quot;abutClass&quot; &quot;string&quot; &quot;stdcell&quot;)<br />    dbReplaceProp(obj &quot;abutFunction&quot; &quot;string&quot; &quot;stdCellFunc&quot;)<br />    dbReplaceProp(obj &quot;minCellHeight&quot; &quot;float&quot; minH)<br /> <br /> <br />; *** The following 4 pins are the diffusion pins   ***<br />; *** of the individual MOS devices in the inverter ***<br />; *** this will allow abutment of other individual  ***<br />; *** MOS devices to the inverter                   ***<br /> <br />    obj = POutPin~&gt;dbId<br />    dbReplaceProp(obj &quot;abutAccessDir&quot; &quot;list&quot; list(&quot;right&quot;))<br />    dbReplaceProp(obj &quot;abutClass&quot; &quot;string&quot; &quot;ptran&quot;)<br />    dbReplaceProp(obj &quot;abutFunction&quot; &quot;string&quot; &quot;mosAbutFunc&quot;)<br />    dbReplaceProp(obj &quot;contactParam&quot; &quot;string&quot; &quot;POutCnts&quot;)<br />    dbReplaceProp(obj &quot;w&quot; &quot;float&quot; pw)<br />    ; *** the automatic spacing properties are used if abutment fails ***<br />    dbReplaceProp(obj &quot;vxlInstSpacingDir&quot; &quot;list&quot; list(&quot;right&quot;))<br />    dbReplaceProp(obj &quot;vxlInstSpacingRule&quot; &quot;float&quot; .35 )<br /> <br />    obj = NOutPin~&gt;dbId<br />    dbReplaceProp(obj &quot;abutAccessDir&quot; &quot;list&quot; list(&quot;right&quot;))<br />    dbReplaceProp(obj &quot;abutClass&quot; &quot;string&quot; &quot;ntran&quot;)<br />    dbReplaceProp(obj &quot;abutFunction&quot; &quot;string&quot; &quot;mosAbutFunc&quot;)<br />    dbReplaceProp(obj &quot;contactParam&quot; &quot;string&quot; &quot;NOutCnts&quot;)<br />    dbReplaceProp(obj &quot;w&quot; &quot;float&quot; nw)<br />    dbReplaceProp(obj &quot;vxlInstSpacingDir&quot; &quot;list&quot; list(&quot;right&quot;))<br />    dbReplaceProp(obj &quot;vxlInstSpacingRule&quot; &quot;float&quot; .35 )<br /> <br />    obj = PPwrPin~&gt;dbId<br />    dbReplaceProp(obj &quot;abutAccessDir&quot; &quot;list&quot; list(&quot;left&quot;))<br />    dbReplaceProp(obj &quot;abutClass&quot; &quot;string&quot; &quot;ptran&quot;)<br />    dbReplaceProp(obj &quot;abutFunction&quot; &quot;string&quot; &quot;mosAbutFunc&quot;)<br />    dbReplaceProp(obj &quot;contactParam&quot; &quot;string&quot; &quot;PPwrCnts&quot;)<br />    dbReplaceProp(obj &quot;w&quot; &quot;float&quot; pw)<br />    dbReplaceProp(obj &quot;vxlInstSpacingDir&quot; &quot;list&quot; list(&quot;left&quot;))<br />    dbReplaceProp(obj &quot;vxlInstSpacingRule&quot; &quot;float&quot; .35 )<br /> <br />    obj = NPwrPin~&gt;dbId<br />    dbReplaceProp(obj &quot;abutAccessDir&quot; &quot;list&quot; list(&quot;left&quot;))<br />    dbReplaceProp(obj &quot;abutClass&quot; &quot;string&quot; &quot;ntran&quot;)<br />    dbReplaceProp(obj &quot;abutFunction&quot; &quot;string&quot; &quot;mosAbutFunc&quot;)<br />    dbReplaceProp(obj &quot;contactParam&quot; &quot;string&quot; &quot;NPwrCnts&quot;)<br />    dbReplaceProp(obj &quot;w&quot; &quot;float&quot; nw)<br />    dbReplaceProp(obj &quot;vxlInstSpacingDir&quot; &quot;list&quot; list(&quot;left&quot;))<br />    dbReplaceProp(obj &quot;vxlInstSpacingRule&quot; &quot;float&quot; .35 )<br /></pre>

<ul><li>
<a id="pgfId-1069264"></a><strong>Calls to dbReplaceProp for Abutment Groups</strong>: When using the function <code>dbReplaceProp</code>, you must call <code>dbReplaceProp</code> for abutment groups before calls to <code>dbReplaceProp</code> for Pcell properties because the IDs of the objects before and after abutment occurs cannot be guaranteed to be the same. This is because the instance master is purged as soon as the instance reference count associated with the instance master becomes zero. Therefore you cannot rely on the same data or IDs after Pcell re-evaluation.</li><li>
<a id="pgfId-1069266"></a><strong>Pin Figure Names must be Unique within a Terminal</strong>: When developing transistor Pcells, wherever there is more than one figure attached to any <code>oaPin</code> (as is the case when two figures are strongly connected), each figure attached to the pin must have a name that is unique within the same terminal and its corresponding must-connect terminals. If this is not the case, use the <code>dbSetPinFigName</code> SKILL function to assign a unique name to each figure attached to the pin.</li><li>
<a id="pgfId-1069278"></a><strong>Abutting Pcell Supermasters from Legacy Designs:</strong> If a Pcell supermaster that is instantiated in a legacy design has changed, possibly due to a PDK update since the design was last opened in a newer version of Virtuoso, the Pcell submaster might appear to have incorrect contacts. To resolve the contact mismatch and to allow abutment, open the design in Layout XL, discard the edits, and re-read the design from disk.</li></ul>



<h4><em>
<a id="pgfId-1082291"></a>Related Topics</em></h4>

<p>
<a id="pgfId-1082311"></a><a href="xlProperties_re_abutFunction_Property.html#42342"><h-hot>abutFunction Property</h-hot><code></code></a></p>

<br /><a href="#pagetop">Return to top</a><br /></div>
<!-- Begin Buttons --><!-- End Buttons -->
<footer><nav class="navigation"><b><em><a href="deviceAbut_Automatic_Abutment_Flow.html" id="prev" title="Automatic Abutment Flow">Automatic Abutment Flow</a></em></b><b><em><a href="deviceAbut_tk_Creating_CMOS_Pcells_to_Use_with_Abutment.html" id="nex" title="Creating CMOS Pcells to Use with Abutment">Creating CMOS Pcells to Use wi ...</a></em></b></nav><div>
            For further assistance, contact <a href="https://support.cadence.com">Cadence Online Support</a>. Copyright &#169; 2023, <a href="https://www.cadence.com">Cadence Design Systems, Inc.</a> All rights reserved. 
          </div></footer>
 

 <div id="cad_image_modal" style="background-color: rgba(0, 0, 0, 0.6);"><center id="cad_image_modal_center">&#160;⠀ </center><span style="margin-right:50px;margin-top:100px;font-weight:bold;font-size:20px;background:#e5e5e5;border:1px solid #e5e5e5;border-radius:25px;height:30px;width:20px;padding-left:6px;padding-top:2px;color: black;" onclick="document.querySelector('#cad_image_modal').classList.remove('opac');">X</span></div> 

</body></html>