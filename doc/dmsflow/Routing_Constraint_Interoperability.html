
<html><head><title>Routing Constraint Interoperability</title>
<meta name="Approver" content="Technical Publications" />
<meta name="Author" content="leenap" />
<meta name="CreateDate" content="2023-07-12" />
<meta name="CreateTime" content="1689152516" />
<meta name="DataType" content="Manuals" />
<meta name="Description" content="" />
<meta name="DocTitle" content="Mixed Signal (MS) Interoperability Guide" />
<meta name="DocType" content="Methodology" />
<meta name="FileTitle" content="Routing Constraint Interoperability" />
<meta name="Keywords" content="" />
<meta name="topic_type" content="" />
<meta name="reference_type" content="" />
<meta name="prod_feature" content="" />
<meta name="prod_subfeature" content="" />
<meta name="new_topic" content="" />
<meta name="spotlight_topic" content="" />
<meta name="FileType" content="Chapter" />
<meta name="Keyword" content="dmsflow" />
<meta name="Language" content="English" />
<meta name="ModifiedDate" content="2023-07-12" />
<meta name="ModifiedTime" content="1689152516" />
<meta name="NextFile" content="Working_with_Buses_in_OpenAccess.html" />
<meta name="Group" content="" />
<meta name="Platform" content="Custom IC Design,Digital IC Design," />
<meta name="PrevFile" content="Trim_Metal_Interoperability.html" />
<meta name="c_product" content="Virtuoso Layout Suite,Innovus," />
<meta name="Product" content="Virtuoso Layout Suite,Innovus," />
<meta name="ProductFamily" content="Virtuoso Layout Suite,Innovus," />
<meta name="ProductVersion" content="22.13" />
<meta name="RightsManagement" content="Copyright 2023 Cadence Design Systems Inc." />
<meta name="Title" content="Mixed Signal (MS) Interoperability Guide -- Routing Constraint Interoperability" />
<meta name="Version" content="22.13" />
<meta name="Renderer" content="WIKI" />
<meta name="SpaceKey" content="dmsflow221" />
<meta name="confluence-version" content="7.4.1" />
<meta name="ecms-plugin-version" content="04.20.001" />

        
        <link href="styles/site.css" rel="stylesheet" type="text/css" />
        <meta content="text/html; charset=UTF-8" http-equiv="Content-Type" />
    

    
<script>
  document.addEventListener("DOMContentLoaded", function(event) {
    document.querySelectorAll("img").forEach((img, index) => {
   img.addEventListener("click", (e) => { 
    document.querySelector("#cad_image_modal").classList.add("opac");
      document.querySelector("#cad_image_modal_center").innerHTML = `<img style="position:absolute;top:0;bottom:0;left:0;right:0; margin: auto;max-height: 96%;max-width: 96%;" src="${e.target.src}">`;});});});
</script>

<style>
 img{cursor:pointer;
 }
 #cad_image_modal{
 position:fixed;left:0;top:0;width:100%;background:#00000099;overflow:hidden;height:0;opacity:0;transition: height 0ms 1s, opacity 1s 0ms;
 }
 #cad_image_modal.opac{height: 100%;opacity: 1;transition: height 0ms 0ms, opacity 1s 0ms;
 }
 #cad_image_modal span{
  position:fixed;right:10px;top:10px;cursor:pointer;color:#fff;
 }
 </style>

</head><body style="background-color: #FFFFFF;"><!-- Begin Buttons --><header xmlns:html="http://www.w3.org/1999/xhtml"><div class="docHeadr">Product Documentation<img src="images/Cadence-Logo.jpg" /></div>
<nav class="blueHead"><ul><li><a class="content" href="dmsflowTOC.html">Contents</a></li><li><a class="prev" href="Trim_Metal_Interoperability.html" title="Trim_Metal_Interoperability">Trim_Metal_Interoperability</a></li><li style="float: right;"><a class="viewPrint" href="dmsflow.pdf">View/Print PDF</a></li><li style="float: right;margin-right: 25px;"><a class="nextd" href="Working_with_Buses_in_OpenAccess.html" title="Working_with_Buses_in_OpenAccess">Working_with_Buses_in_OpenAcce ...</a></li></ul></nav></header><!-- End Buttons --><div xmlns:html="http://www.w3.org/1999/xhtml" style="font-size:14px;line-height:1.42857142857;margin:20px 0 0 0;font-weight:bold;"><center>Mixed Signal (MS) Interoperability Guide<br />Product Version 22.13, Last Updated in July 2023</center></div>
<div xmlns:html="http://www.w3.org/1999/xhtml" style="margin-left:5%;">
<p></p>

<p></p>
<div id="main-header">
                    
                    
                                                <div style="width: 100%; font-size: 32px; text-align: left;               font-weight: bold;">11</div>
<h1 style="margin: 4px 0 4px;"><span>Routing Constraint Interoperability</span></h1>

                    
                </div>
<div class="wiki-content group" id="main-content">
                    
<p></p>
<div class="toc-macro rbtoc1689152474091">
<ul class="toc-indentation">
<li><a href="#RoutingConstraintInteroperability-AnOverviewofRoutingandConstraintInteroperability">An Overview of Routing and Constraint Interoperability</a></li>
<li><a href="#RoutingConstraintInteroperability-StepsforCreatinganInteroperableNDRinVirtuoso">Steps for Creating an Interoperable NDR in Virtuoso</a></li>
<li><a href="#RoutingConstraintInteroperability-CreatingInteroperableShieldingConstraintsinVirtuoso">Creating Interoperable Shielding Constraints in Virtuoso</a></li>
<li><a href="#RoutingConstraintInteroperability-RoutingConstraintsUnderstoodbyNanoRoute(DigitalRouterinInnovus)">Routing Constraints Understood by NanoRoute (Digital Router in Innovus)</a></li>
<li><a href="#RoutingConstraintInteroperability-Creating/ViewingInteroperableRoutingConstraintsinVirtuoso">Creating/Viewing Interoperable Routing Constraints in Virtuoso</a>
<ul class="toc-indentation">
<li><a href="#RoutingConstraintInteroperability-CreatingInteroperableConstraintsUsingVirtuosoConstraintManager">Creating Interoperable Constraints Using Virtuoso Constraint Manager</a></li>
<li><a href="#RoutingConstraintInteroperability-CheckingOpenAccessDatabasewithConstraintsPriortoBringingaDesignintoOADBCheckerSystem">Checking OpenAccess Database with Constraints Prior to Bringing a Design into OA DB Checker System</a></li>
</ul>
</li>
<li><a href="#RoutingConstraintInteroperability-CreatingInteroperableRoutingConstraintsUsingInnovus">Creating Interoperable Routing Constraints Using Innovus</a></li>
<li><a href="#RoutingConstraintInteroperability-HierarchicalPropagationofConstraints">Hierarchical Propagation of Constraints</a></li>
<li><a href="#RoutingConstraintInteroperability-Creating/AddingMixed-SignalRoutingConstraintsonIPBlocks">Creating/Adding Mixed-Signal Routing Constraints on IP Blocks</a></li>
<li><a href="#RoutingConstraintInteroperability-RoutingConstraintsInteroperabilitybetweenNanoRouteandVSR">Routing Constraints Interoperability between NanoRoute and VSR</a>
<ul class="toc-indentation">
<li><a href="#RoutingConstraintInteroperability-GettingaListofNetswithskip_routingAttribute">Getting a List of Nets with skip_routing Attribute</a></li>
<li><a href="#RoutingConstraintInteroperability-CheckingRoutingResultsAgainsttheRoutingConstraints">Checking Routing Results Against the Routing Constraints</a></li>
<li><a href="#RoutingConstraintInteroperability-CreatingInteroperableLibrarybetweenInnovusandVirtuoso">Creating Interoperable Library between Innovus and Virtuoso</a></li>
</ul>
</li>
<li><a href="#RoutingConstraintInteroperability-TryingtheConstraintInteroperabilityEnvironmentandtherun_vsrCommandinInnovusfortheFirstTime">Trying the Constraint Interoperability Environment and the run_vsr Command in Innovus for the First Time</a></li>
</ul>
</div>

<p></p>

<p></p>
<h2 id="RoutingConstraintInteroperability-AnOverviewofRoutingandConstraintInteroperability"><span class="cad-head-number">11.1 </span>An Overview of Routing and Constraint Interoperability</h2>

<p>Given the full interoperability of the OpenAccess environment between various Cadence tools, Cadence has taken steps to create an environment in which design constraints can be shared across various platforms. For instance, in the Mixed Signal flow where top level of the design is captured as schematics in Virtuoso, routing constraints can be defined in Virtuoso for the digital portion of the design, which will later be implemented by Innovus. Conversely, in a flow where the top level of the design is captured as a Verilog netlist in Innovus, Innovus can define routing constraints that will be used by block designers when such blocks are later implemented in Virtuoso. In addition to these capabilities, mixed signal IPs can be embedded with the required integration constraints so that when the end users instantiate such IPs in their designs, the embedded constraints can be pulled to the top level of the design. This ensures that the integration requirements of the particular IP are met during the design process. Refer to the section titled &#8220;Creating/Adding Mixed Signal Routing Constraints on IP blocks&#8221; for a detailed description of this functionality.</p>

<p>The picture below depicts the instantiation of an IP that contains embedded routing constraints which dictate that top-level nets connecting to certain terminals of the block should be routed as Differential Pairs. The OpenAccess abstract of the IP contains such embedded constraints.&#160;</p>

<p><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" data-base-url="https://rdwiki.cadence.com" data-image-src="attachments/425956060/425956097.png" data-linked-resource-container-id="425956060" data-linked-resource-container-version="1" data-linked-resource-content-type="image/png" data-linked-resource-default-alias="routeDiffpair.png" data-linked-resource-id="425956097" data-linked-resource-type="attachment" data-linked-resource-version="1" data-unresolved-comment-count="0" src="attachments/425956060/425956097.png" /></span></p>

<p>If the IP is instantiated in either Virtuoso or Innovus, the Differential Pair constraint is propagated to the top-level nets (Net1 and Net2 in the above example) when you invoke commands that propagate these constraints to the top level. In Innovus, the command to pull constraints to the top level is&#160;<code><span class="fontredcadence">pull_block_constraint</span></code>.&#160;</p>

<p>The hierarchical propagation of the constraints is controlled by the&#160;<code><span class="fontredcadence">hierarchicalScope</span></code>&#160;attribute,&#160;which is created at the time the constraints are initially created, either directly in a design or embedded in an IP. The&#160;<code><span class="fontredcadence">hierarchicalScope</span></code>&#160;property could be placed on any constraint, either in Virtuoso or in Innovus. The picture below shows how the hierarchical scope can be set on a shielding constraint. As the hierarchical scope value is&#160;<code>local</code>,<code> below</code>,<code> above</code>, it will instruct all applications to allow for Pushing (as defined by&#160;<code>below</code>) and Pulling (as defined by&#160;<code>above</code>) of this constraint.&#160;</p>

<p><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" data-base-url="https://rdwiki.cadence.com" data-image-src="attachments/425956060/425956099.png" data-linked-resource-container-id="425956060" data-linked-resource-container-version="1" data-linked-resource-content-type="image/png" data-linked-resource-default-alias="HScope.png" data-linked-resource-id="425956099" data-linked-resource-type="attachment" data-linked-resource-version="1" data-unresolved-comment-count="0" src="attachments/425956060/425956099.png" /></span></p>

<p>After the implementation of the design is complete, PVS-cv can be used to check the final implementation of the design against embedded IP constraints that exist. Any implementation aspects of the design that do not conform to the intended design constraints are flagged as violations by PVS-cv.</p>

<p>A design checker utility is included in Innovus and Virtuoso installations. It could be used to check Virtuoso generated constraints for interoperability with Innovus. For more information, see the&#160;<a href="OpenAccess_Database_Interoperability_Checker.html">OpenAccess Database Interoperability Checker</a>&#160;chapter.</p>
<h2 id="RoutingConstraintInteroperability-StepsforCreatinganInteroperableNDRinVirtuoso"><span class="cad-head-number">11.2 </span>Steps for Creating an Interoperable NDR in Virtuoso</h2>

<p>The Virtuoso Constraint Manager (VCM) enables you to create interoperable Non-Default Rules (NDRs). Virtuoso XL or GXL licenses are needed to access the Virtuoso Constraint Manager environment. There are several ways to create an NDR in Virtuoso.</p>

<p>Use the following steps for creating an interoperable NDR.</p>
<ol><li>After loading your design in Virtuoso, select the&#160;<em>Process Rule Editor</em>&#160;option from the Virtuoso Constraint Manager pull-down menu. (Remember to involve Virtuoso XL or GXL.)<br /><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" data-base-url="https://rdwiki.cadence.com" data-image-src="attachments/425956060/425956068.png" data-linked-resource-container-id="425956060" data-linked-resource-container-version="1" data-linked-resource-content-type="image/png" data-linked-resource-default-alias="PRE.png" data-linked-resource-id="425956068" data-linked-resource-type="attachment" data-linked-resource-version="1" data-unresolved-comment-count="0" src="attachments/425956060/425956068.png" /></span></li><li>After the Process Rule Editor window is open, select the&#160;<em>Design</em>&#160;radio button. If there were existing NDRs in the design, you will see them displayed in the top part of the form.&#160;<br /><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" data-base-url="https://rdwiki.cadence.com" data-image-src="attachments/425956060/425956075.png" data-linked-resource-container-id="425956060" data-linked-resource-container-version="1" data-linked-resource-content-type="image/png" data-linked-resource-default-alias="PRE_Window.png" data-linked-resource-id="425956075" data-linked-resource-type="attachment" data-linked-resource-version="1" data-unresolved-comment-count="0" src="attachments/425956060/425956075.png" /></span></li><li>In the Process Rule Editor window, enter a suitable name for the design NDR you are creating in the&#160;<em>Create Constraint Group</em>&#160;text box and then click the &#8220;+&#8221; sign next to it. You should now see the new NDR name in the upper portion of the form.&#160;</li><li>Scroll down the&#160;<em>Create Process Rule</em>&#160;drop-down list and select the&#160;<em>Valid Layers</em>&#160;option as shown in the picture below. Click the &#8220;+&#8221; sign next to the field.<br /><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" data-base-url="https://rdwiki.cadence.com" data-image-src="attachments/425956060/425956069.png" data-linked-resource-container-id="425956060" data-linked-resource-container-version="1" data-linked-resource-content-type="image/png" data-linked-resource-default-alias="CreateProcessRule.png" data-linked-resource-id="425956069" data-linked-resource-type="attachment" data-linked-resource-version="1" data-unresolved-comment-count="0" src="attachments/425956060/425956069.png" /></span></li><li>Select the&#160;<em>Value</em>&#160;tab as shown in the picture below and select the routing layers you wish to have for this NDR. Note that in order for Innovus to recognize the NDR as valid, the routing layers for the NDR need to be selected from the routing layers defined in the LEFDefaultRouteSpec.<br /><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" data-base-url="https://rdwiki.cadence.com" data-image-src="attachments/425956060/425956098.png" data-linked-resource-container-id="425956060" data-linked-resource-container-version="1" data-linked-resource-content-type="image/png" data-linked-resource-default-alias="PRE_Value.png" data-linked-resource-id="425956098" data-linked-resource-type="attachment" data-linked-resource-version="1" data-unresolved-comment-count="0" src="attachments/425956060/425956098.png" /></span></li><li>
<p>You have now completed the creation of a valid interoperable NDR/PRO between Innovus and Virtuoso. You can use the above method to create minimum width for all the layers, as well as any other attributes for this NDR/PRO. Refer to the picture below.<br /><strong><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" data-base-url="https://rdwiki.cadence.com" data-image-src="attachments/425956060/425956083.png" data-linked-resource-container-id="425956060" data-linked-resource-container-version="1" data-linked-resource-content-type="image/png" data-linked-resource-default-alias="MinWidth.png" data-linked-resource-id="425956083" data-linked-resource-type="attachment" data-linked-resource-version="1" data-unresolved-comment-count="0" src="attachments/425956060/425956083.png" /></span></strong><br /><strong>Note:</strong>&#160;Any PRO/NDR created using the above method is a design PRO/NDR. Ensure that you save the design after creation of PRO/NDRs. In addition, once the design is opened in Innovus, the&#160;<code><span class="fontredcadence">writeIntegRouteConstraint</span></code>&#160;command can also be used within Innovus to dump out the constraint in text format for viewing, validation, and further modification.</p>
</li></ol><h2 id="RoutingConstraintInteroperability-CreatingInteroperableShieldingConstraintsinVirtuoso"><span class="cad-head-number">11.3 </span>Creating Interoperable Shielding Constraints in Virtuoso</h2>

<p>The interoperable environment allows multiple methods for creating shielding constraints in Virtuoso. In the mixed-signal flow, you can use the Virtuoso Space-based Router (VSR) to pre-route some mixed-signal nets and then use NanoRoute to complete the routing for the design. The definition of the shielding constraint in Virtuoso determines which router will be used to route the net that is to be shielded.</p>
<ul><li>
<p>If you would like to create a shielding constraint and use NanoRoute for creating the shielded net, you should create a shielding constraint in Virtuoso with&#160;<code>msShieldStyle = &#8220;Not Specified&#8221;</code>&#160;or&#160;<code>&#8220;parallel&#8221;</code>.&#160;This will translate into a&#160;<em>Simple Shielding</em>&#160;constraint in Innovus that can be recognized by NanoRoute.</p>

<p><strong>Note:</strong>&#160;Except&#160;<code>msShieldStyle</code>, no other parameter of the shielding constraint should be modified in Virtuoso. If any other parameters are modified, Innovus will not recognize the shield constraints as&#160;<em>Simple Shielding</em>.&#160;</p>
</li><li>If you would like to create a shielding constraint and use VSR for creating the shielded net, you need to create a shielding constraint in Virtuoso with&#160;<code>msShieldStyle</code>&#160;set to the actual style you would like to use. The possible shield styles that you can use are&#160;<code>Tandem below</code>,&#160;<code>Tandem below + parallel</code>,&#160;<code>Tandem above</code>,&#160;<code>Tandem above + Parallel</code>,&#160;<code>Tandem</code>, and&#160;<code>Coaxial</code>. When you do so, all the nets with this type of shielding constraint will be recognized as a complex shield in Innovus and will be recognized by VSR as valid routing constraints.</li></ul>
<p>The picture below shows a correctly formed interoperable shielding constraint, which will be interpreted by Innovus and Virtuoso as a&#160;<em>Simple Shielding&#160;</em>constraint. Note that any nets having a&#160;<em>Simple Shielding</em>&#160;constraint can be routed by NanorRoute in Innovus. The&#160;<code>msShieldStyle</code>&#160;could have also been set to&#160;<code>parallel</code>:</p>

<p><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" data-base-url="https://rdwiki.cadence.com" data-image-src="attachments/425956060/425956063.png" data-linked-resource-container-id="425956060" data-linked-resource-container-version="1" data-linked-resource-content-type="image/png" data-linked-resource-default-alias="shieldingconstraint.png" data-linked-resource-id="425956063" data-linked-resource-type="attachment" data-linked-resource-version="1" data-unresolved-comment-count="0" src="attachments/425956060/425956063.png" /></span></p>

<p>Note that VSR can also be used to route shielded nets where the&#160;<code>msShieldStyle = Not Specified</code>&#160;or<code>&#160;parallel</code>. If these nets are routed by VSR before NanoRoute is used to route the rest of the nets in the design, you must use the following command in Innovus to ensure that NanoRoute does not remove the previously routed nets.&#160;</p>

<p><code><span class="fontredcadence">setAttribute -net</span>&#160;<em>net_name</em>&#160;-skip_routing true</code></p>

<p></p>
<h2 id="RoutingConstraintInteroperability-RoutingConstraintsUnderstoodbyNanoRoute(DigitalRouterinInnovus)"><span class="cad-head-number">11.4 </span>Routing Constraints Understood by NanoRoute (Digital Router in Innovus)</h2>

<p>NanoRoute supports all of the following:</p>
<ul><li>Simple shielding</li><li>Parallel shielding</li><li>Nets with interoperable NDRs/PROs</li><li>NetClass constraint (where a group of nets have the same constraints) &#160;</li></ul><h2 id="RoutingConstraintInteroperability-Creating/ViewingInteroperableRoutingConstraintsinVirtuoso"><span class="cad-head-number">11.5 </span>Creating/Viewing Interoperable Routing Constraints in Virtuoso</h2>

<p>If you prefer to enter mixed-signal routing constraints using the Virtuoso environment, the Virtuoso<em>&#160;Constraint Manager</em>&#160;can be used to populate a design with the required routing constraints.</p>

<p>Virtuoso&#160;<em>Constraint Manager</em>&#160;is capable of creating some constraints that are used only by Virtuoso applications. Although these constraints are retained in the database as the design moves between Innovus and Virtuoso, none of the Innovus applications are able to interpret such constraints.</p>

<p>The Virtuoso&#160;<em>Constraint Manager</em>&#160;can be accessed by setting the workspace as constraints, using Virtuoso XL.</p>
<p align="left"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" data-base-url="https://rdwiki.cadence.com" data-image-src="attachments/425956060/425956088.png" data-linked-resource-container-id="425956060" data-linked-resource-container-version="1" data-linked-resource-content-type="image/png" data-linked-resource-default-alias="constraints4.PNG" data-linked-resource-id="425956088" data-linked-resource-type="attachment" data-linked-resource-version="1" data-unresolved-comment-count="0" src="attachments/425956060/425956088.png" width="500" /></span></p>

<p>For more details on the user interface aspects of the tool, refer to the &quot;Constraint Manager Assistant&quot; chapter of the&#160;<em>Virtuoso Unified Custom Constraints User Guide</em>.</p>
<h3 id="RoutingConstraintInteroperability-CreatingInteroperableConstraintsUsingVirtuosoConstraintManager"><span class="cad-head-number">11.5.1 </span>Creating Interoperable Constraints Using Virtuoso Constraint Manager</h3>

<p>To create a differential pair or a match pair interoperable constraint using the Virtuoso Constraint Manager, follow these steps:</p>
<ol><li>Using the Navigator, select the nets that should be a part of the differential pair or the match pair constraint group.</li><li>Using the Virtuoso&#160;<em>Constraint Manager</em>, select a differential pair constraint.</li><li>If a differential pair must have shielding constraints, create an additional shielding constraint on the net members of a differential pair or a matched pair.</li></ol><h3 id="RoutingConstraintInteroperability-CheckingOpenAccessDatabasewithConstraintsPriortoBringingaDesignintoOADBCheckerSystem"><span class="cad-head-number">11.5.2 </span>Checking OpenAccess Database with Constraints Prior to Bringing a Design into OA DB Checker System</h3>

<p>OpenAccess Database (OA DB) Interoperability Checker is a SKILL-based utility which can be run in the Virtuoso Environment to ensure that the OpenAccess database being brought into Innovus is compatible for the place-and-route flow, and all constraints entered are interoperable. The OpenAccess database should contain all the necessary database objects which are required by applications within Innovus. At the same time, it should not contain any database object which would stop the Innovus implementation flow.</p>

<p>For information on loading the <span>OA DB </span>checker, see&#160;<a href="OpenAccess_Database_Interoperability_Checker.html">OpenAccess Database Interoperability Checker</a>.</p>
<h2 id="RoutingConstraintInteroperability-CreatingInteroperableRoutingConstraintsUsingInnovus"><span class="cad-head-number">11.6 </span>Creating Interoperable Routing Constraints Using Innovus</h2>

<p>Use the Integration Constraint Editor in Innovus&#160;to create interoperable mixed-signal routing constraints.&#160;</p>

<p><strong>Note:&#160;</strong>The routing constraint interoperability requires the OpenAccess database to be used while creating a design library. In addition, a mixed-signal ready OpenAccess PDK should be used as the technology library.</p>

<p>The Innovus constraint-entry mechanism can be accessed by choosing&#160;<em>Tools - Mixed Signal - Integration Constraint Editor</em>.</p>

<p>The active constraint tabs in the Integration Constraint Editor are labeled in red to make it easy for you to identify them.&#160;In addition, the Integration Constraint Editor also displays the constraint count on each active constraint tab.</p>
<p align="left"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" data-base-url="https://rdwiki.cadence.com" data-image-src="attachments/425956060/425956102.png" data-linked-resource-container-id="425956060" data-linked-resource-container-version="1" data-linked-resource-content-type="image/png" data-linked-resource-default-alias="ICE_diffpair.png" data-linked-resource-id="425956102" data-linked-resource-type="attachment" data-linked-resource-version="1" data-unresolved-comment-count="0" src="attachments/425956060/425956102.png" width="600" /></span></p>

<p>In the above form, the tabs in the&#160;<em>Mixed Signal Routing Constraints</em>&#160;row display nets that are routed using custom routing techniques. These nets have&#160;a property identifying them as Mixed Signal nets, instructing all applications in the Innovus environment to ignore them. The tabs in this row are:</p>
<ul><li><em>DiffPair</em></li><li><em>MatchLength</em></li><li><em>Bus</em></li><li><em>Complex NetClass</em></li><li><em>Complex Shield</em></li><li><em>Complex Net</em></li></ul>
<p>If a new constraint needs to be created, click the&#160;<em>New</em>&#160;button to clear the form so that nets can be added to the&#160;<em>Net Members</em>&#160;field. The net names can be entered either&#160;manually or by using the Design Browser&#160;button to the right of the&#160;<em>Net Members</em>&#160;field. This button opens Innovus&#39;s design browser within the Select Net Members form. After entering all required parameters of the constraint in the form, click the&#160;<em>Add/Update</em>&#160;button to add the constraint to the design. The net members are then shown under the&#160;<em>Constraint List</em>.</p>

<p>If an existing constraint needs to be modified, first select the constraint from the&#160;<em>Constraint List</em>&#160;and modify its parameters in the form. After the modification is complete, use the&#160;<em>Add/Update</em>&#160;button to save the constraint. If an existing constraint is to be deleted, first select it in the&#160;<em>Constraint List</em>&#160;and then click the&#160;<em>Delete</em>&#160;button. After the constraint is deleted, associated net names are no longer be shown in the&#160;<em>Constraint List</em>.</p>

<p>You can save all the constraints entered for the design into a file which can later be loaded and modified. This is not a necessary step, as all constraints are saved with the design in OpenAccess. If an existing constraint file is available, the&#160;<em>Load</em>&#160;button can be used to load the constraints and the&#160;<em>Apply</em>&#160;button to write such constraints into the database.</p>

<p>To see all constraints in the design in a spreadsheet format, click the&#160;<em>Display</em>&#160;button. The Display All Constraints form displays all design constraints.</p>
<p align="left"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" data-base-url="https://rdwiki.cadence.com" data-image-src="attachments/425956060/425956076.gif" data-linked-resource-container-id="425956060" data-linked-resource-container-version="1" data-linked-resource-content-type="image/gif" data-linked-resource-default-alias="ICE_Display_All_Constraints.gif" data-linked-resource-id="425956076" data-linked-resource-type="attachment" data-linked-resource-version="1" data-unresolved-comment-count="0" src="attachments/425956060/425956076.gif" width="500" /></span></p>

<p>For more information about the Integration Constraint Editor, see the&#160;<a href="../innovusMR/Tools_Menu.html">Tools Menu</a>&#160;chapter of the&#160;<em>Innovus Menu Reference</em>.</p>
<h2 id="RoutingConstraintInteroperability-HierarchicalPropagationofConstraints"><span class="cad-head-number">11.7 </span>Hierarchical Propagation of Constraints</h2>

<p>Virtuoso has the capability to push and pull routing constraints across hierarchies in a design. For instance, a shielding constraint could exist on the net in a sub-block of a design, which connects to a net at the top level. Virtuoso and Innovus can pull a shielding constraint from a sub-block and place it on the corresponding net at the top level. After the constraint is pulled, if NanoRoute or VSR are used to route the top-level nets in a design, the constraint is understood and honored by both the tools.</p>

<p>The Innovus command for pulling routing constraint is&#160;<code><span class="fontredcadence">pull_block_constraint</span></code>.</p>

<p><strong>Note:&#160;</strong>The hierarchical scope constraint defines whether a particular constraint can be pulled or pushed across the physical hierarchy. The hierarchical scope can either be set in the Virtuoso&#160;<em>Constraint Manager</em>, or by using the following command in Innovus.</p>

<p><code><span class="fontredcadence">setIntegRouteConstraint</span>&#160;<br />[-<span class="fontredcadence">hierarchicalScope</span> {local local_below local_above local_above_below}]</code></p>

<p>The&#160;<code>lo</code><code>cal_below</code>&#160;option indicates that the constraint can only be pushed down in a hierarchy, whereas the&#160;<code>local_above_below</code>&#160;option indicates that the particular constraint can be pulled and pushed across the physical hierarchy.</p>

<p>The pull/push of constraints in Virtuoso is done using the Virtuoso&#160;<em>Constraint Manager</em>&#160;.</p>
<p align="left"><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" data-base-url="https://rdwiki.cadence.com" data-image-src="attachments/425956060/425956092.png" data-linked-resource-container-id="425956060" data-linked-resource-container-version="1" data-linked-resource-content-type="image/png" data-linked-resource-default-alias="hierarchical_propagation.png" data-linked-resource-id="425956092" data-linked-resource-type="attachment" data-linked-resource-version="1" data-unresolved-comment-count="0" src="attachments/425956060/425956092.png" /></span></p>
<h2 id="RoutingConstraintInteroperability-Creating/AddingMixed-SignalRoutingConstraintsonIPBlocks"><span class="cad-head-number">11.8 </span>Creating/Adding Mixed-Signal Routing Constraints on IP Blocks</h2>

<p>As seen in the previous section of this document, design-level constraints can be created using the Virtuoso Constraint Manager, or Innovus&#39;s constraint entry environment. In the previous section, we also discussed the fact that constraints can be created hierarchically, thereby enabling users to pull imbedded constraints from sub-blocks or IP&#39;s, or push constraints from higher levels in the design down to the lower sub-blocks. As can be seen from the diagram below, enhancement have been made to the abstract generator to create and store constraints in the OpenAccess abstract of an IP/block, which can later be pulled /pushed across the design hierarchy.</p>

<p><strong>Routing Constraints Use Model and Flow</strong></p>
<p align="left">

<map id="gliffy-map-425956070-8978" name="gliffy-map-425956070-8978"></map>
</p>
<table class="gliffy-macro-table" width="100%">
    <tbody><tr>
        <td>
            <table class="gliffy-macro-inner-table">
                <caption align="bottom">
 </caption>

                <tbody><tr>
                    <td>
                        <img alt="" class="gliffy-macro-image" src="attachments/425956060/425956082.png" style="border: none; width: 669px;" usemap="#gliffy-map-425956070-8978" />
                    </td>

                </tr>

            </tbody></table>
 
        </td>

    </tr>

</tbody></table>
<p>If a particular layout view has specific routing constraints defined, the abstract generator will be able to store such constraints in the resulting abstract.</p>

<p>To enable this functionality, the following setting needs to be used with the abstract generator:</p>

<p><code><code>absSetOption(&quot;CopyMSRoutingConstraints&quot; true&quot;)</code></code></p>

<p>In order to enable the pushing or pulling of routing constraints in the flow, the addition of the&#160;<code><span class="fontredcadence">hierarchicalScope</span></code>&#160;parameter to the routing constraint is needed. For instance, if the designer of the block/IP wants to allow the intended user of the block/IP to have the ability to push or pull a particular constraint across the hierarchy, then the the following hierarchical scope should be used:</p>

<p><code><code><span class="fontredcadence">hierarchicalScope</span>=local&amp;below&amp;above</code></code></p>
<ul><li><code>local</code>&#160;is always required.</li></ul><ul><li><code>below</code>&#160;tells the design environment that the particular constraint can be pushed down in the hierarchy.</li></ul><ul><li><code>above</code>&#160;tells the design environment that the particular constraint can be pulled up in the hierarchy.</li></ul>
<p>For more information, refer to the&#160;<em>Virtuoso</em><sup><em>&#174;</em></sup><em>&#160;Abstract Generator User Guide</em>.</p>
<h2 id="RoutingConstraintInteroperability-RoutingConstraintsInteroperabilitybetweenNanoRouteandVSR"><span class="cad-head-number">11.9 </span>Routing Constraints Interoperability between NanoRoute and VSR</h2>

<p>The Virtuoso Space-Based Router (VSR) is used to route nets with differential pairs, match pairs, and complex-shielding constraints. Complex shielding is defined as any shield style other than tandem shields (the default), or those shielding constraints that do not use the default minimum spacing or width.</p>

<p>NanoRoute has been enhanced to recognize mixed-signal routing constraints, so if differential pair, match pair or complex shields are pre-routed by VSR, then NanoRoute will be able to route rest of the nets in a design without having the need to mark pre-routed nets as special routes/fixed routes, or with&#160;<code>skip_routing</code>&#160;attribute. In addition, if NanoRoute sees the simple shielding constraints,&#160;<code>netClass</code>&#160;constraint, or process rule overrides (NDRs), it routes such nets honoring the routing constraints stored in the database.</p>

<p>Note: If VSR is used to route NDRs or simple shields, add the skip_routing attribute on those nets and mark them as&#160;<code>fixed</code>, when the design is brought into Innovus. The&#160;<code>skip_routing</code>&#160;attribute could be set in Innovus as:</p>

<p><code><span class="fontredcadence">setAttribute -net</span>&#160;<em>net_name</em>&#160;-skip_routing true</code></p>

<p>Failing to assign the&#160;<code>skip_routing</code>&#160;attribute to such pre-routed nets will result in the nets getting deleted when the design goes through placement, Early Global Route, CTS, and NanoRoute stages of the design flow</p>
<h3 id="RoutingConstraintInteroperability-GettingaListofNetswithskip_routingAttribute"><span class="cad-head-number">11.9.1 </span>Getting a List of Nets with skip_routing Attribute</h3>

<p>Innovus&#39;s&#160;<code>dbGet</code>&#160;command is a very powerful tool that can be used to extract valuable information from the database. In the context of interoperable routing constraints, this command can be used to get all nets having the&#160;<code>skip_routing</code>&#160;or the analog attributes.</p>

<p><span class="fontgreencadence">
<p><code>dbGet [dbGet -p top.nets.skipRouting 1].name (will report all nets with skipRouting attribute)</code></p>

<p><code>dbGet [dbGet -p top.nets.isAnalog 1].name (will report all nets with analog attribute)</code></p>

<p>To get the list of attributes of a net that one could search for with the <code>dbGet</code> command, use:</p>

<p><code>dbGet top.nets.?</code></p>
</span></p>

<p><strong>Note:&#160;</strong>Virtuoso installation is needed in order to run VSR from Innovus.</p>

<p>The VSR interface can be accessed from Tools menu in Innovus by choosing&#160;<em>Tools - Mixed Signal - Run VSR</em>.</p>
<p align="left"><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" data-base-url="https://rdwiki.cadence.com" data-image-src="attachments/425956060/425956077.png" data-linked-resource-container-id="425956060" data-linked-resource-container-version="1" data-linked-resource-content-type="image/png" data-linked-resource-default-alias="Run VSR.png" data-linked-resource-id="425956077" data-linked-resource-type="attachment" data-linked-resource-version="1" data-unresolved-comment-count="0" src="attachments/425956060/425956077.png" /></span></p>

<p>The Design Browser in Innovus can be used to select the nets to be routed. You can also instruct the router to route all nets with certain constraints.</p>
<h3 id="RoutingConstraintInteroperability-CheckingRoutingResultsAgainsttheRoutingConstraints"><span class="cad-head-number">11.9.2 </span>Checking Routing Results Against the Routing Constraints</h3>

<p>The PVS Constraints Validation (PVS-CV) tool can be used with Innovus to check and validate mixed-signal constraints in the Innovus design flow.&#160;PVS-CV can be used to check all interoperable MS routing constraints entered in Innovus or Virtuoso, against the actual routes created by VSR or NanoRoute.&#160;The error markers generated by PVS-CV can then be viewed using tools such as Violation Browser in Innovus.</p>

<p>To enable PVS-CV, select&#160;<em>Run CV</em>&#160;from the&#160;<em>PVS</em>&#160;menu in Innovus.</p>

<p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" data-base-url="https://rdwiki.cadence.com" data-image-src="attachments/425956060/425956087.png" data-linked-resource-container-id="425956060" data-linked-resource-container-version="1" data-linked-resource-content-type="image/png" data-linked-resource-default-alias="pvs-cv.png" data-linked-resource-id="425956087" data-linked-resource-type="attachment" data-linked-resource-version="1" data-unresolved-comment-count="0" src="attachments/425956060/425956087.png" width="500" /></span></p>

<p><strong>Note:&#160;</strong>PVS-CV is enabled only when a 64-bit version of Virtuoso installation exists on your system.</p>

<p>For information on PVS-CV, refer to the following chapters in the&#160;<em>Cadence Physical Verification User Guide:</em></p>
<ul><li>Running PVS-CV</li><li>Appendix H - PVS CV Functionality</li></ul><h3 id="RoutingConstraintInteroperability-CreatingInteroperableLibrarybetweenInnovusandVirtuoso"><span class="cad-head-number">11.9.3 </span>Creating Interoperable Library between Innovus and Virtuoso</h3>

<p>The compression of OpenAccess database is supported in Innovus and is done by default. However, the current Virtuoso 6.1.5 version does not support a compressed OpenAccess database as the input. So, in order to create an OpenAccess library that can interoperate with Virtuoso 6.1.5, the database compression in Innovus needs to be turned off using the following Innovus command:</p>

<p><code><span class="fontredcadence">setOaxMode -compressLevel</span> false</code></p>

<p>Cellviews written to a library will follow the compression level of the library and not the&#160;<code><span class="fontredcadence">setOaxMode -compressLevel</span></code>&#160;setting at the time when the cellview is being created.</p>

<p></p>
<h2 id="RoutingConstraintInteroperability-TryingtheConstraintInteroperabilityEnvironmentandtherun_vsrCommandinInnovusfortheFirstTime"><span class="cad-head-number">11.10 </span>Trying the Constraint Interoperability Environment and the run_vsr Command in Innovus for the First Time</h2>

<p>Constraint interoperability between Virtuoso and Innovus is possible only through the OpenAccess database. The creation of an OpenAccess database is divided in two steps, the reference library creation step and the design library creation step. The term &#8220;reference library&#8221; refers to the interoperable PDK that contains all the technology information needed for Innovus and Virtuoso to work properly.</p>

<p><span class="fontgreencadence">
<p>If the OpenAccess library or the reference library is already available, you could reference it in Innovus&#8217;s global variable (<code>*.globals</code>) file to load the technology and IP-related information. <strong>Note</strong> - Global variables are the Tcl globals needed to initialize a design. In Innovus, all global variables are stored in the *.globals file when the design is saved using the <code>saveDesign</code> command.</p>
</span></p>

<p>If the reference library is not readily available, refer to the Cadence OpenAccess documentation on how to create an OpenAccess PDK. The library creation steps mentioned below are only used to create a quick OpenAccess library from LEF to try the constraint interoperability environment and the run_vsr interface.&#160;<strong>PLEASE NOTE THE REFERENCE LIBRARY CREATED BY THIS METHOD SHOULD NOT BE USED IN A PRODUCTION SETTING.</strong></p>

<p><strong>Method 1:&#160;</strong><strong>Reference library does not exist, but a non-OA Innovus design is available.</strong></p>

<p>The following flow steps are meant for users who have neither a previous OA-based Innovus database to start with, nor a reference library. This flow can be used for all nodes 16nm and higher.</p>
<ul><li>Creating the reference library<br />Before you run the library creation step, ensure that you have set up the path for Virtuoso correctly. (The compatible Virtuoso release is IC 6.1.6ISR2 or higher and Innovus release is 13.2 or higher.)<br /><br />Example<ol><li><strong>write_oa_techfile tech.tf</strong><br />After loading the Innovus database in Innovus with lef files, execute the above command. This command will output the Virtuoso tech file. This file would not contain fixed vias and LDRS (LEF Default Route Spec). These will be added in Step 3 below.</li><li><strong>techLoadDump -l -createLib tech_base tech.tf</strong><br /> Where:<br /><code> tech_base</code>&#160;specifies the output reference library name.<br />&#160; <code>tech.tf</code>&#160;specifies the technology file created in Step 1.<br />After you create a Virtuoso tech file, exit Innovus and execute the above command on a Unix prompt. This command will create an OA-based library using the Virtuoso tech file created in the previous step.&#160;<em><br /></em></li><li><strong>lef2oa -lib tech_pnr -techRefs tech_base -lef tech.lef -pnrLibDataOnly</strong><br /><strong><em>&#160;</em></strong>Where:<br />&#160;&#160;<code>-lib&#160;<em>library</em></code>&#160;specifies the output reference library name.<br />&#160; <code>-techRefs&#160;<em>libList</em></code>&#160;specifies the list of libraries that contain the master technology&#160;databases.<br />&#160; <code>-lef</code>&#160;specifies the list of technology and other LEF libraries.<br />&#160; <code>-pnrLibDataOnly</code>&#160;indicates that only library-specific place and route information&#160;and macro definitions will be imported.&#160;All foundry rules for existing layers&#160;in the referenced tech are&#160;assumed to be correct.&#160;All foundry rules defined in the LEF file will be ignored.<br /><br />Now execute the above command to create a&#160;<code>tech_pnr</code>&#160;library using the<code>&#160;tech_base</code>&#160;created in the above step and using the technology lefs and other lefs. The reference library&#160;<code>tech_pnr</code>&#160;can now be used for all interoperability purposes between Innovus and Virtuoso.</li><li><strong>verilogAnnotate -refLibs tech_pnr -verilog stub.v</strong><br />Where:<br /><code>-refLibs</code>&#160;specifies the OA reference library created in Step 3.<br /><code>-verilog</code>&#160;specifies the stub verilog file that has bus information.<br />Execute the above step to annotate bus information to abstract view through stub verilog. As we are just using the flow to try constraint interoperability and the&#160;<code>run_vsr</code>&#160;interface, this step is an optional step.</li></ol></li><li>
<p>Loading the design in Innovus</p>
<ol><li>Set the following <span class="fontredcadence">variable</span>s in the Innovus shell:<ul><li><code><span class="fontredcadence">set init_pwr_net</span> {<em>power_nets</em></code><code>}</code><br />#(Sets the power nets)</li><li><code><span class="fontredcadence">set init_gnd_net</span> {<em>ground_nets</em></code><code>}</code>&#160; &#160; &#160; &#160; &#160;<br />#(Sets the ground nets)</li><li><code><span class="fontredcadence">set init_oa_ref_lib</span> {<em>tech_pnr</em></code><code>}</code>&#160; &#160; &#160; &#160; &#160; <br />#(Sets the reference library created in Step 4)</li><li><code><span class="fontredcadence">set init_verilog</span>&#160;{<em>verilog_netlist</em>}<em><br /></em></code><em>#</em>(Sets the verilog netlist)</li><li><code><span class="fontredcadence">set init_top_cell </span>{<em><span class="fontredcadence">top_cell_name</span></em>}</code>&#160; &#160;<br />#(Sets the top cell name)</li><li><code>init_design</code><br />#(Updates the above <span class="fontredcadence">variable</span>s into the Innovus DB)</li></ul></li><li>Load the design information from floorplan or DEF file using command&#160;<code><span class="fontredcadence">loadFPlan</span>&#160;<em>filename</em></code>&#160;or&#160;<code><span class="fontredcadence">defIn</span>&#160;<em>def_file.</em></code></li><li>
<p>Run&#160;<code><span class="fontredcadence">saveDesign</span> -<span class="fontredcadence">cellview</span> {</code><code><em>designLib</em>&#160;<em>topCellName</em>&#160;<em>viewName</em>}</code><br />The above command saves the design in OpenAccess mode and can be restored for any future sessions in Innovus or in Virtuoso.&#160;<br /><br />To restore a previously saved OpenAccess design, run the following command at the Innovus prompt:<br /><code><span class="fontredcadence">restoreDesign</span> -<span class="fontredcadence">cellview</span> {<em>designLib</em>&#160;<em>topCellName</em>&#160;<em>viewName</em>}</code></p>
</li></ol></li></ul>
<p><strong>Method 2: Flow to Load a&#160;</strong><strong>Previously Implemented&#160;</strong><strong>Design in Innovus if the Reference Library Already Exists</strong></p>

<p>If the reference library already exists, ignore the library creation step in Method 1 and continue with the rest of the steps:</p>
<ol><li>Initialize the <span class="fontredcadence">variable</span>s in Innovus (Reference library&#160;<code>tech_pnr</code>&#160;already available)<ul><li><code><span class="fontredcadence">set init_pwr_net</span> {<em>power_nets</em></code><code>}</code><br />#(Sets the power nets)</li><li><code><span class="fontredcadence">set init_gnd_net</span> {<em>ground_nets</em></code><code>}</code><br />#(Sets the ground nets)</li><li><code><span class="fontredcadence">set init_oa_ref_lib</span> {<em>tech_pnr</em></code><code>}</code>&#160;<br />#(Sets the reference library)</li><li><code><span class="fontredcadence">set init_verilog</span>&#160;{<em>verilog_netlist</em>}<em><br /></em></code><em>#</em>(Sets the verilog netlist)</li><li><code><span class="fontredcadence">set init_top_cell </span>{<em><span class="fontredcadence">top_cell_name</span></em>}</code><br />#(Sets the top cell name)</li><li><code>init_design</code><br />#(Updates the above <span class="fontredcadence">variable</span>s into Innovus DB)</li></ul></li><li>Load the design information from floorplan or DEF file using command&#160;<code><span class="fontredcadence">loadFPlan</span>&#160;<em>filename</em></code>&#160;or&#160;<code><span class="fontredcadence">defIn</span>&#160;<em>def_file.</em></code></li></ol>
                    </div>
<br /><br /></div>
<footer xmlns:html="http://www.w3.org/1999/xhtml"><nav class="navigation"><b><em><a href="Trim_Metal_Interoperability.html" id="prev" title="Trim_Metal_Interoperability">Trim_Metal_Interoperability</a></em></b><b><em><a href="Working_with_Buses_in_OpenAccess.html" id="nex" title="Working_with_Buses_in_OpenAccess">Working_with_Buses_in_OpenAcce ...</a></em></b></nav><div>
          For further assistance, contact <a href="https://support.cadence.com">Cadence Online Support</a>. Copyright &#169; 2023, <a href="https://www.cadence.com">Cadence Design Systems, Inc.</a> All rights reserved.
        </div>
</footer><br xmlns:html="http://www.w3.org/1999/xhtml" />
<div id="cad_image_modal" style="background-color: rgba(0, 0, 0, 0.6);"><center id="cad_image_modal_center">&#160;&#10240;</center><span style="margin-right:50px;margin-top:100px;font-weight:bold;font-size:20px;background:#e5e5e5;border:1px solid #e5e5e5;border-radius:25px;height:30px;width:20px;padding-left:6px;padding-top:2px;color: black;" onclick="document.querySelector('#cad_image_modal').classList.remove('opac');">X</span></div>

</body></html>