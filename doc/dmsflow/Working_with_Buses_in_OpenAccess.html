
<html><head><title>Working with Buses in OpenAccess</title>
<meta name="Approver" content="Technical Publications" />
<meta name="Author" content="leenap" />
<meta name="CreateDate" content="2023-07-12" />
<meta name="CreateTime" content="1689152517" />
<meta name="DataType" content="Manuals" />
<meta name="Description" content="" />
<meta name="DocTitle" content="Mixed Signal (MS) Interoperability Guide" />
<meta name="DocType" content="Methodology" />
<meta name="FileTitle" content="Working with Buses in OpenAccess" />
<meta name="Keywords" content="" />
<meta name="topic_type" content="" />
<meta name="reference_type" content="" />
<meta name="prod_feature" content="" />
<meta name="prod_subfeature" content="" />
<meta name="new_topic" content="" />
<meta name="spotlight_topic" content="" />
<meta name="FileType" content="Chapter" />
<meta name="Keyword" content="dmsflow" />
<meta name="Language" content="English" />
<meta name="ModifiedDate" content="2023-07-12" />
<meta name="ModifiedTime" content="1689152517" />
<meta name="NextFile" content="High_Frequency_Router_In_Innovus.html" />
<meta name="Group" content="" />
<meta name="Platform" content="Custom IC Design,Digital IC Design," />
<meta name="PrevFile" content="Routing_Constraint_Interoperability.html" />
<meta name="c_product" content="Virtuoso Layout Suite,Innovus," />
<meta name="Product" content="Virtuoso Layout Suite,Innovus," />
<meta name="ProductFamily" content="Virtuoso Layout Suite,Innovus," />
<meta name="ProductVersion" content="22.13" />
<meta name="RightsManagement" content="Copyright 2023 Cadence Design Systems Inc." />
<meta name="Title" content="Mixed Signal (MS) Interoperability Guide -- Working with Buses in OpenAccess" />
<meta name="Version" content="22.13" />
<meta name="Renderer" content="WIKI" />
<meta name="SpaceKey" content="dmsflow221" />
<meta name="confluence-version" content="7.4.1" />
<meta name="ecms-plugin-version" content="04.20.001" />

        
        <link href="styles/site.css" rel="stylesheet" type="text/css" />
        <meta content="text/html; charset=UTF-8" http-equiv="Content-Type" />
    

    
<script>
  document.addEventListener("DOMContentLoaded", function(event) {
    document.querySelectorAll("img").forEach((img, index) => {
   img.addEventListener("click", (e) => { 
    document.querySelector("#cad_image_modal").classList.add("opac");
      document.querySelector("#cad_image_modal_center").innerHTML = `<img style="position:absolute;top:0;bottom:0;left:0;right:0; margin: auto;max-height: 96%;max-width: 96%;" src="${e.target.src}">`;});});});
</script>

<style>
 img{cursor:pointer;
 }
 #cad_image_modal{
 position:fixed;left:0;top:0;width:100%;background:#00000099;overflow:hidden;height:0;opacity:0;transition: height 0ms 1s, opacity 1s 0ms;
 }
 #cad_image_modal.opac{height: 100%;opacity: 1;transition: height 0ms 0ms, opacity 1s 0ms;
 }
 #cad_image_modal span{
  position:fixed;right:10px;top:10px;cursor:pointer;color:#fff;
 }
 </style>

</head><body style="background-color: #FFFFFF;"><!-- Begin Buttons --><header xmlns:html="http://www.w3.org/1999/xhtml"><div class="docHeadr">Product Documentation<img src="images/Cadence-Logo.jpg" /></div>
<nav class="blueHead"><ul><li><a class="content" href="dmsflowTOC.html">Contents</a></li><li><a class="prev" href="Routing_Constraint_Interoperability.html" title="Routing_Constraint_Interoperability">Routing_Constraint_Interoperab ...</a></li><li style="float: right;"><a class="viewPrint" href="dmsflow.pdf">View/Print PDF</a></li><li style="float: right;margin-right: 25px;"><a class="nextd" href="High_Frequency_Router_In_Innovus.html" title="High_Frequency_Router_In_Innovus">High_Frequency_Router_In_Innov ...</a></li></ul></nav></header><!-- End Buttons --><div xmlns:html="http://www.w3.org/1999/xhtml" style="font-size:14px;line-height:1.42857142857;margin:20px 0 0 0;font-weight:bold;"><center>Mixed Signal (MS) Interoperability Guide<br />Product Version 22.13, Last Updated in July 2023</center></div>
<div xmlns:html="http://www.w3.org/1999/xhtml" style="margin-left:5%;">
<p></p>

<p></p>
<div id="main-header">
                    
                    
                                                <div style="width: 100%; font-size: 32px; text-align: left;               font-weight: bold;">12</div>
<h1 style="margin: 4px 0 4px;"><span>Working with Buses in OpenAccess</span></h1>

                    
                </div>
<div class="wiki-content group" id="main-content">
                    
<p></p>
<div class="toc-macro rbtoc1689152474368">
<ul class="toc-indentation">
<li><a href="#WorkingwithBusesinOpenAccess-SettingsforAutomaticAnnotationofBusBitsDuringAbstractGenerationusingVirtuosoAbstractGenerator">Settings for Automatic Annotation of Bus Bits During Abstract Generation using Virtuoso Abstract Generator</a></li>
<li><a href="#WorkingwithBusesinOpenAccess-TheInterfaceBitSettingofaTerminal">The Interface Bit Setting of a Terminal</a>
<ul class="toc-indentation">
<li><a href="#WorkingwithBusesinOpenAccess-CheckingforthePresenceoftheInterfaceBit">Checking for the Presence of the Interface Bit</a></li>
<li><a href="#WorkingwithBusesinOpenAccess-RunningverilogAnnotate">Running verilogAnnotate</a></li>
</ul>
</li>
</ul>
</div>
<h2 id="WorkingwithBusesinOpenAccess-SettingsforAutomaticAnnotationofBusBitsDuringAbstractGenerationusingVirtuosoAbstractGenerator"><span class="cad-head-number">12.1 </span>Settings for Automatic Annotation of Bus Bits During Abstract Generation using Virtuoso Abstract Generator</h2>
<div>
<p>While using the Abstractor Generator tool for bus terminals, use the following options before running the tool:</p>

<p>(&#160;<code>absSetOption( &quot;AnnotateBusInAbstract&quot; &quot;true&quot;))</code></p>

<p>You need to run&#160;<code>verilogAnnotate</code>&#160;after running Abstractor Generator (with the above settings) to set the interface bit for each valid logical term in the cells. If you fail to run, you will get the following error while running&#160;<code><span class="fontredcadence">saveDesign</span> -<span class="fontredcadence">cellview</span></code>.</p>

<p><code>*ERROR: (IMPOAX-683): Unable to find module terminal &quot;D&quot; for module &quot;JACK&quot;. Can not create Connection Data for this terminal.</code></p>
<ul><li>If you are running&#160;<code><span class="fontredcadence">assembleDesign</span></code>&#160;on AMS blocks created in Virtuoso,&#160;<code>verilogAnnotate</code>&#160;needs to be run on the layout views (or the view name being used for&#160;<code><span class="fontredcadence">assembleDesign</span></code>) besides abstract views.</li></ul><ul><li>If you use VLS-XL to generate layouts, set the following and you can ignore bus annotation during abstract generation flow:&#160;<br /><code>envSetVal(&quot;layoutXL&quot; &quot;createImplicitBusTerminals&quot; &#39;boolean t)</code></li></ul><h2 id="WorkingwithBusesinOpenAccess-TheInterfaceBitSettingofaTerminal"><span class="cad-head-number">12.2 </span>The Interface Bit Setting of a Terminal</h2>

<p>To preserve the logical connectivity of a terminal to the corresponding net, the terminal of the block/cell must have the&#160;<code>isInterface</code>&#160;bit set to&#160;<code>true</code>.&#160;</p>

<p>The following examples depict what can happen when the interface bit is not properly set:</p>

<p><strong>Example 1 - isInterface of both the bus and its individual scalar terminals is set to true</strong></p>

<p>Consider a design in which the&#160;<code>isInterface</code>&#160;attribute of both the bus, such as <code>main_bus&lt;1:0&gt;</code>, and its individual scalar terminals, such as <code>main_bus &lt;1&gt;</code> and <code>main_bus &lt;0&gt;</code>, is set to&#160;<code>true</code>. In this case, you may encounter an error with the following message during the&#160;<code><span class="fontredcadence">assembleDesign</span></code>&#160;step in Innovus:</p>

<p><code>Duplicate Fterms are encountered</code></p>

<p>To resolve the problem, run <code>verilogAnnoate</code> to turn off the <code>isInterface</code> attribute of both scalar terminals.</p>

<p><strong>Example 2 - Some terminals in the block/cell do not have isInterface set to true during partitioning</strong></p>

<p>Consider a situation in which some of the terminals in the block/cell do not have the <code>isInterface</code> bit set to <code>true</code> during the partitioning of a design. In this case, these terminals will have issues when the block is being assembled with the top level.&#160;</p>

<p>The <code>isInterface</code> bit is meant to align with the Verilog modules. So, if an OpenAccess abstract terminal has <code>isInterface = nil</code>, it should not appear in the Verilog netlist when running <code><span class="fontredcadence">saveNetlist</span></code>, unless the <code>-<span class="fontredcadence">includePowerGround</span></code> or <code>-phys</code> options are used. Terminals with <code>isInterface = nil</code> should be connected only to a <code>USE POWER/GROUND</code> net, not a regular signal net. Assuming that the Verilog module (and <code>.lib</code>) has port, running <code>verilogAnnotate</code> will set the bit on the abstract&#39;s terminal to <code>true</code> instead of <code>nil</code>.</p>

<p>To fix this problem, run the <code>verilogAnnotate</code> command on the layout view of the cell or recreate the reference libraries with the interface bit set for this terminal.</p>
<h3 id="WorkingwithBusesinOpenAccess-CheckingforthePresenceoftheInterfaceBit"><span class="cad-head-number">12.2.1 </span>Checking for the Presence of the Interface Bit</h3>

<p>Before moving to the Innovus flow, you may want to check that certain terminals carry these interface bits. To do so, run oaDBChecker and check the log file for INFO such as the following:</p>

<p><code>Checking for status of interface bit for all blocks in the current view...</code><br /><code>INFO (CHECKER_DESGN-14): Interface bit on terminal &#39;cntrlyo&lt;7&gt;&#39; of cell &#39;dtmf_chip&#39; is set to false.</code></p>

<p><strong>Note</strong>: If the original Virtuoso DB was created using Virtuoso-L, the <code>isInterface</code> bit could be set to <code>true</code> on the Bus terminal as well as the scalar terminals. This might be okay with Virtuoso but Verilog does not support this configuration in Innovus. Run <code>verilogAnnotate</code> to resolve this issue as mentioned in the previous section.</p>
<h3 id="WorkingwithBusesinOpenAccess-RunningverilogAnnotate"><span class="cad-head-number">12.2.2 </span>Running verilogAnnotate</h3>

<p>Run <code>verilogAnnotate</code> as follows:</p>

<p><code>verilogAnnotate -refLibs <em>libraryList</em> -verilog <em>fileList</em> [<em>Optional_Arguments</em>]</code></p>

<p><strong>Example</strong></p>

<p><code><span class="fontredcadence">restoreDesign</span> -<span class="fontredcadence">cellview</span> {<em>lib cell view</em>}</code></p>

<p># If you have only the top-level design netlist but not the specific cell&#39;s netlist, you first need to generate a leaf-only netlist as follows:</p>

<p><code><span class="fontredcadence">saveNetlist</span> leafOnly.v -<span class="fontredcadence">onlyLeafCell</span></code></p>

<p># Make sure you have write permission to update the OpenAccess file:</p>

<p><code>verilogAnnotate -refLibs library_1 -verilog leafOnly.v</code></p>

<p><code>exit</code></p>

<p>#Restart the tool</p>

<p><code><span class="fontredcadence">restoreDesign</span> -<span class="fontredcadence">cellview</span> {lib cell view}</code></p>

<p><code><span class="fontredcadence">attachTerm</span> <em>...</em></code></p>

<p><code><span class="fontredcadence">saveDesign</span> <em>...</em></code></p>

<p>The saved design will have the changes saved.</p>
</div>

                    </div>
<br /><br /></div>
<footer xmlns:html="http://www.w3.org/1999/xhtml"><nav class="navigation"><b><em><a href="Routing_Constraint_Interoperability.html" id="prev" title="Routing_Constraint_Interoperability">Routing_Constraint_Interoperab ...</a></em></b><b><em><a href="High_Frequency_Router_In_Innovus.html" id="nex" title="High_Frequency_Router_In_Innovus">High_Frequency_Router_In_Innov ...</a></em></b></nav><div>
          For further assistance, contact <a href="https://support.cadence.com">Cadence Online Support</a>. Copyright &#169; 2023, <a href="https://www.cadence.com">Cadence Design Systems, Inc.</a> All rights reserved.
        </div>
</footer><br xmlns:html="http://www.w3.org/1999/xhtml" />
<div id="cad_image_modal" style="background-color: rgba(0, 0, 0, 0.6);"><center id="cad_image_modal_center">&#160;&#10240;</center><span style="margin-right:50px;margin-top:100px;font-weight:bold;font-size:20px;background:#e5e5e5;border:1px solid #e5e5e5;border-radius:25px;height:30px;width:20px;padding-left:6px;padding-top:2px;color: black;" onclick="document.querySelector('#cad_image_modal').classList.remove('opac');">X</span></div>

</body></html>