
<html><head><title>DRC Overview</title><meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="Approver" content="Technical Publications" />
<meta name="Author" content="sarita" />
<meta name="CreateDate" content="2023-05-02" />
<meta name="CreateTime" content="1683027699" />
<meta name="DataType" content="Manuals" />
<meta name="Description" content="The Diva verification tool lets you check physical design and electrical functionality, perform layout versus schematic comparisons, and view errors interactively to speed diagnosis and correction." />
<meta name="DocTitle" content="Diva Reference" />
<meta name="DocType" content="Reference" />
<meta name="FileTitle" content="DRC Overview" />
<meta name="FileType" content="Chapter" />
<meta name="FMWikiRelease" content="FM-Wiki-4.0.0" />
<meta name="Keyword" content="divaref" />
<meta name="Language" content="English" />
<meta name="ModifiedDate" content="2023-05-02" />
<meta name="ModifiedTime" content="1683027699" />
<meta name="NextFile" content="chap8.html" />
<meta name="Group" content="" />
<meta name="Platform" content="Physical Verification  Analysis" />
<meta name="PrevFile" content="chap6.html" />
<meta name="c_product" content="Diva" />
<meta name="Product" content="Diva" />
<meta name="ProductFamily" content="Diva" />
<meta name="ProductVersion" content="IC23.1" />
<meta name="RightsManagement" content="Copyright 2023 Cadence Design Systems Inc." />
<meta name="Title" content="Diva Reference -- DRC Overview" />
<meta name="Keywords" content="" />
<meta name="topic_type" content="" />
<meta name="reference_type" content="" />
<meta name="prod_feature" content="" />
<meta name="prod_subfeature" content="" />
<meta name="new_topic" content="No" />
<meta name="spotlight_topic" content="0" />
<meta name="Version" content="IC23.1" />
<meta name="SpaceKey" content="divarefIC231" />
<meta name="webflare-version" content="2.5" />
<link rel="stylesheet" href="styles/webflare.css" type="text/css" />


  <script>/*<![CDATA[*/
 document.addEventListener("DOMContentLoaded", function(event) {  document.querySelectorAll("img").forEach((img, index) => {
if (img.hasAttribute("usemap")){return;}else{img.classList.add("cursorclass");} img.addEventListener("click", (e) => {if(img.hasAttribute("usemap")){            img.setAttribute("style","cursor:none;");return;};document.querySelector("#cad_image_modal").classList.add("opac");document.querySelector("#cad_image_modal_center").innerHTML = `<img style="position:absolute;top:0;bottom:0;left:0;right:0;margin: auto;max-height:95%;"  src="${e.target.src}">`;});});});
/*]]>*/</script> 




 <style>/*<![CDATA[*/
.cursorclass{cursor:pointer;}#cad_image_modal{position:fixed;left:0;top:0;width:100%;background:#00000099;overflow:hidden;height:0;opacity:0;transition: height 0ms 1s, opacity 1s 0ms;}#cad_image_modal.opac{height: 100%;opacity: 1;transition: height 0ms 0ms, opacity 1s 0ms;}#cad_image_modal span{position:fixed;right:10px;top:10px;cursor:pointer;color:#fff;}
/*]]>*/</style> 
</head><body style="background-color: #FFFFFF;"><a name="pagetop"></a>
<!-- Begin Buttons -->
<header><div class="docHeadr">Product Documentation<img src="icons/Cadence-Logo.jpg" /></div><nav class="blueHead"><ul><li><a class="content" href="divarefTOC.html">Contents</a></li><li><a class="prev" href="chap6.html" title="Connectivity Extraction Concepts">Connectivity Extraction Concep ...</a></li><li style="float: right;"><a class="viewPrint" href="divaref.pdf">View/Print PDF</a></li><li style="float: right;margin-right: 25px;"><a class="nextd" href="chap8.html" title="Models of Device Extraction">Models of Device Extraction</a></li></ul></nav></header>
<!-- End Buttons -->
<h5><center>Diva Reference<br />Product Version IC23.1, June 2023</center></h5><div id="main-content" style="min-height: 50vh; margin-left: 5%; margin-right: 2%;"><a name="#firstpage"></a>

<h1>7
<a id="pgfId-1008781"></a></h1>
<h1>
<a id="pgfId-1011663"></a><hr />
DRC Overview<hr />
</h1>

<p>
<a id="pgfId-1014196"></a>DRC lets you verify that your layout conforms to the technology design rules. You can perform <a id="marker-1014197"></a>checks ranging from single layer, single dimension checks to multilayer, multidimensional checks. DRC accepts polygonal and edge data at all angles, and does not limit the type, amount, configuration of data, or the number of rules being checked. </p>
<p>
<a id="pgfId-1014198"></a>The result of any DRC command either generates an error or creates a derived layer. You can use a derived layer as input for other Diva verification commands. </p>

<h3>
<a id="pgfId-1014200"></a>Modes of Operation<a id="Modes of Operation"></a></h3>

<p>
<a id="pgfId-1014202"></a>DRC <a id="marker-1014201"></a>runs in six modes.</p>
<p>
<a id="pgfId-1021090"></a>Three of the modes, called &#8220;check modes,&#8221; are as follows:</p>
<ul><li>
<a id="pgfId-1014204"></a><a id="marker-1014203"></a>Full</li><li>
<a id="pgfId-1014206"></a><a id="marker-1014205"></a>Incremental</li><li>
<a id="pgfId-1014208"></a><a id="marker-1014207"></a>Area</li></ul>


<p>
<a id="pgfId-1014209"></a>The other three modes, called &quot;check limits,&#8221; are as follows:</p>
<ul><li>
<a id="pgfId-1014211"></a><a id="marker-1014210"></a>Flat</li><li>
<a id="pgfId-1014214"></a><a id="marker-1014212"></a>Hierarchical<a id="marker-1014213"></a> without optimization</li><li>
<a id="pgfId-1014216"></a><a id="marker-1014215"></a>Hierarchical with optimization</li></ul>


<p>
<a id="pgfId-1014217"></a>You can specify check modes and limits using menu, SKILL, and UNIX commands. You can specify only one check mode and one check limit per run. You cannot use area check mode with a hierarchical check limit.</p>
<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1014218"></a>Commands in hierarchical and area modes might not behave the same as in flat mode. This can result in significant differences when you use other commands and save data to the database. For an example of hierarchical mode differences, see the &#8220;<a href="chap7.html#12293">DRC Limitations</a>&#8221; section.</div>

<h4>
<a id="pgfId-1014222"></a>Full</h4>

<p>
<a id="pgfId-1014225"></a><a id="marker-1014223"></a>In <a id="marker-1014224"></a>full mode, DRC verifies the entire circuit, regardless of changes made since the last time the circuit was verified.</p>
<p>
<a id="pgfId-1020643"></a>A full, flat run of DRC should be performed before the design is sent for fabrication. The other modes and limits can be used to quickly check for most errors, but only the full, flat run can be relied on to find all errors in the design.</p>

<h4>
<a id="pgfId-1014226"></a>Incremental</h4>

<p>
<a id="pgfId-1014230"></a>In <a id="marker-1014227"></a>i<a id="marker-1014228"></a>ncremental mode, DRC verifies only <a id="marker-1014229"></a>those areas of the circuit that were modified since the last time the circuit was verified. The first verification run on a circuit is always performed in full mode even if incremental mode is specified. Everything in the circuit is now considered &#8220;new,&#8221; meaning the entire circuit has changed.</p>
<p>
<a id="pgfId-1014231"></a>Changes to the circuit or design rules drive incremental processing. These changes are recorded in the circuit database via shapes on a special layer <a id="marker-1014232"></a>(<em>changedLayer</em>). Before any DRC is run, the flag that enables the generation of shapes on the <em>changedLayer</em> is not set. This same flag is used to determine if full mode is used when incremental is chosen. The <em>changedLayer</em> shapes are removed in any area that DRC processes. A run in full mode will remove all <em>changedLayer</em> shapes.</p>
<p>
<a id="pgfId-1014233"></a>During checks, DRC extends changed areas to ensure that all design rules are considered. DRC joins separate but nearby changed areas into single changed areas, which might result in redundant checks of unchanged areas. If you change the DRC commands between runs, the complete circuit is verified regardless of the changed areas.</p>
<p>
<a id="pgfId-1014235"></a><a id="marker-1014234"></a>If a cell is changed, a <em>change layer</em> is generated in that cell. If the cell is verified as the master cell, that changed layer is utilized and eliminated. However, if you use that cell later in a previously verified design, Diva detects that the cell has changed, and creates a changed layer shape to completely encompass the cell. Therefore, incremental processing on the previously verified design will behave correctly.</p>
<p>
<a id="pgfId-1014236"></a>The only exception to the automatic detection of changed cells is for pcells. A new set of layout data is created every time a pcell is loaded. Therefore, the data in the pcell is always different. Diva cannot detect when a pcell has changed contents and needs to be re-checked. To avoid having every pcell rechecked when incremental checking is invoked after loading a design, Diva does not attempt to generate a <em>changedLayer</em> for pcells as they are loaded. Because pcell changes rarely occur, and can be detected through full flat or hierarchical checking, this limitation has minor impact.</p>

<h4>
<a id="pgfId-1014237"></a>Area</h4>

<p>
<a id="pgfId-1014241"></a><a id="marker-1014238"></a>In area mode, DRC <a id="marker-1014239"></a>checks only the <a id="marker-1014240"></a>area of the circuit that you define. You can define the area with menu commands or with the run-specific <em>verifyArea</em> command. If you use menu commands, only a single rectangular area can be defined. If you use the<em> verifyArea</em><a id="marker-1014242"></a> command, the area can consist of multiple rectangles, and you can specify areas within the rectangles that you do not want DRC to check.</p>

<h4>
<a id="pgfId-1014243"></a>Flat</h4>

<p>
<a id="pgfId-1014245"></a>In <a id="marker-1014244"></a>flat mode, DRC does not consider the hierarchy of the layout and verifies the circuit as if it was a single cell. DRC expands all instances of all cells into their parent cells up to the <a id="marker-1014246"></a>master (top-level) cell.</p>

<h4>
<a id="pgfId-1014248"></a><a id="marker-1014247"></a>Hierarchical Without Optimization</h4>

<p>
<a id="pgfId-1014252"></a>In <a id="marker-1014249"></a><a id="marker-1014250"></a>hierarchical mode, <a id="marker-1014251"></a>DRC considers the hierarchy of the layout during verification. Hierarchical mode can reduce run-times for designs that have several cell repetitions and few intercell interactions throughout the hierarchy. A design with little repetition or many inter-cell interactions might run slower in hierarchical mode. For very large designs, hierarchical mode can allow DRC to run to completion where it might otherwise fail due to resource limits with the flat limit.</p>
<p>
<a id="pgfId-1014253"></a>This methodology is efficient as long as the layout methodology of the circuit is simple. Any circuit that has a high degree of cell interaction or shapes that overlap cells will not be processed efficiently. The design rule dimension values are considered to prevent relationships from being overlooked.</p>
<p>
<a id="pgfId-1014254"></a>DRC methodology is as follows:</p>
<ul><li>
<a id="pgfId-1014255"></a>DRC computes a halo value based on the DRC rules. The halo value is the distance that DRC needs to look outside the area being checked to ensure that all violations are discovered. Conceptually, the halo is the largest design rule. If you consider the rules<br /><pre class="webflare-pre-block webflare-courier-new" id="#id1014256">
<a id="pgfId-1014256"></a>a = geomSize ( M 5 )
drc ( a sep &lt; 5 )</pre>
<a id="pgfId-1014257"></a>you might find that the true halo distance is 15, not 5. It is possible for compound checks to have additive distances. In another example, consider the rules <pre class="webflare-pre-block webflare-courier-new" id="#id1014258">
<a id="pgfId-1014258"></a>a = drc ( M sep &lt; 3 )
drc ( a b sep &lt; 4 )</pre>
<a id="pgfId-1014259"></a>that have a halo of 7.</li><li>
<a id="pgfId-1014260"></a>DRC flattens &#8220;small&#8221; cells into their parent cells. A cell is considered &#8220;small&#8221; if both its width and length are less than twice the halo distance.</li><li>
<a id="pgfId-1014261"></a>DRC computes two types of interaction areas: cell-to-cell and geometry-to-cell. A cell-to-cell interaction is when two cells overlap within the halo distance. A geometry-to-cell interaction is when a piece of geometry overlaps a cell within the halo distance.<br />
<a id="pgfId-1021095"></a>Typical Interaction Areas<br />
<a id="pgfId-1017366"></a><div class="webflare-div-image">
<img width="481" height="201" src="images/chap7-2.gif" /></div></li><li>
<a id="pgfId-1014276"></a>DRC processes the geometry of each cell. Geometries from other cells and from higher levels in the hierarchy are not considered. Some errors discovered in this phase can be false errors if the circumstances that cause the error are corrected at a higher level of the hierarchy.</li><li>
<a id="pgfId-1014277"></a>DRC processes all interaction areas. All data involved in the interaction area is considered. It is possible that an error detected within a cell will also be detected when processing the interaction areas. No attempt to remove these duplicate errors is made.<br />
<a id="pgfId-1014278"></a>Errors that are detected within a cell are reported within that cell. Errors that involve interactions are written to the cell where the interaction occurs.</li></ul>















<h4>
<a id="pgfId-1014279"></a>Hierarchical with Optimization</h4>

<p>
<a id="pgfId-1014281"></a>Hi<a id="marker-1014280"></a>erarchical with Optimization mode utilizes a pattern recognition feature. Before processing all the interaction areas, DRC identifies unique cell-to-cell interactions by considering cell names, their relative placement, and their relative orientation. Unique interactions are then processed once. The remaining instances of the same interaction are ignored.</p>
<p>
<a id="pgfId-1014282"></a>When processing the unique interactions, hierarchical optimized mode does not remove errors detected in previous steps of hierarchical DRC. A fundamental assumption of hierarchical optimized mode is that interaction areas do not differ. This assumption can give misleading results as shown in the <a href="chap7.html#12293">&#8220;DRC Limitations&#8221;</a>.</p>
<p>
<a id="pgfId-1014287"></a>Pattern recognition is usually applied when you have regular <a id="marker-1014286"></a>arrays. DRC first checks the periphery cells, along with their adjacent cells, then looks at the relationships between blocks of adjacent cells. DRC can then define all possible relationships between cells that are repeated throughout the hierarchy.</p>
<p>
<a id="pgfId-1020676"></a>Hierarchical with Optimization should only be used for designs where geometries are not likely to be involved in the cell to cell interaction regions. Standard cell designs with long rows of cells that butt with the interconnect geometries running above and below the cell row are a good example.</p>

<h3>
<a id="pgfId-1014289"></a><a id="85650"></a>Area Halo Processing</h3>

<p>
<a id="pgfId-1014291"></a><a id="marker-1014290"></a>During area processing, Diva calculates a &#8220;halo&#8221; distance around the area to capture all interactions that might impact the correctness of the processing. This halo is based on the maximum distance that can cause interactions or relationships as defined by the dimensions in the design rules.</p>
<p>
<a id="pgfId-1014292"></a>The area processing can be turned on in three places.</p>
<ul><li>
<a id="pgfId-1014293"></a>The UNIX <em>ivVerify</em> command <em>-area</em> option</li><li>
<a id="pgfId-1014294"></a>The SKILL <em>ivDRC</em> command <em>?area</em> option</li><li>
<a id="pgfId-1014295"></a>The run-specific file <em>verifyArea</em> command</li></ul>


<p>
<a id="pgfId-1014297"></a>In some cases, the<a id="marker-1014296"></a> halo value can be extremely high and therefore slow down the processing significantly. If you determine that the halo processing is unnecessary, you can switch it off.</p>
<p>
<a id="pgfId-1014298"></a>The area processing halo value can be forced to zero by turning the <em>zero halo</em> option on in these ways:</p>
<ul><li>
<a id="pgfId-1014299"></a>The UNIX <em>ivVerify</em> command <em>-z</em> option</li><li>
<a id="pgfId-1014300"></a>The SKILL <em>drcZeroHalo</em> command used either in the run-specific file or in the <em>.cdsinit</em> file</li></ul>

<p>
<a id="pgfId-1014301"></a>Placing the <em>drcZeroHalo</em> command in the <em>.cdsinit</em> file sets the mode for the duration of the interactive session. Used in a run-specific file, this command sets the mode for a single Diva verification run.</p>
<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1014302"></a>This option is disabled when running in hierarchical or incremental modes.</div>

<h3>
<a id="pgfId-1014306"></a><a id="12293"></a>DRC Limitations</h3>

<p>
<a id="pgfId-1014307"></a>These sections describe the DRC limitations for hierarchical mode, as well as limitations for incremental and area modes. </p>

<h4>
<a id="pgfId-1014308"></a>Hierarchical Mode</h4>

<p>
<a id="pgfId-1014310"></a>Running DRC<a id="marker-1014309"></a> in hierarchical mode does not always generate the same results as flat mode when using select, separation/notch, apposition and length, or for any nodal checks. The results are different because checking is done in a local area and select, separations/notch, appositions, lengths, and nodal checks require a global view.</p>
<p>
<a id="pgfId-1014311"></a>Unlike the hierarchical without optimization mode, the optimized mode does not consider all the data in an interaction area. Instead, optimized mode processes only the data from both cells in the cell-to-cell interaction. Data from lower level and higher level cells are not included. Because only unique cell-to-cell interactions are processed, the data might not be included.</p>
<p>
<a id="pgfId-1014312"></a>For example, two cell-to-cell interactions occur with four placements of A. Cell A contains only a single area of metal. Two of the cell A placements are completely covered by metal. The other two placements do not have any metal geometry near them.</p>

<p>
<a id="pgfId-1016630"></a></p>
<div class="webflare-div-image">
<img width="488" height="362" src="images/chap7-3.gif" /></div>

<p>
<a id="pgfId-1020673"></a>The top two placements of A form one cell-to-cell interaction, and the bottom two form another. Since the interactions are the same in terms of relative placement and orientation, they share the same unique relationship. The A-to-A interactions cause a metal separation violation. If the top interaction contains an error and is the interaction that DRC processes (the choice is arbitrary), a separation violation is reported for that interaction only. This is misleading because the interaction, in context with the metal overlapping the top two cells, implies that no error occurs. Actually, an error does occur in the interaction with the bottom two cells, but the error is reported in the top two cells that are interacting. DRC uses this method to make sure that all real errors are located.</p>

<h4>
<a id="pgfId-1014328"></a>Select</h4>

<p>
<a id="pgfId-1014329"></a>Relational selection commands, such as <em>geomInside</em>, <em>geomStraddle</em>, and <em>geomOverlap</em> might differ when a limit option is used. For example, a <em>geomOverlap</em> command might try to select metal that has more than two contacts on it.</p>

<p>
<a id="pgfId-1016631"></a></p>
<div class="webflare-div-image">
<img width="491" height="223" src="images/chap7-4.gif" /></div>

<p>
<a id="pgfId-1014340"></a>The metal within the interaction area contains only one contact.</p>

<h4>
<a id="pgfId-1014341"></a>Separation/Notch</h4>

<p>
<a id="pgfId-1014342"></a>Separation and notch checks might not be accurate, because only one interaction area is processed at a time. It might not be possible to distinguish whether two polygons belong to the same shape.</p>

<p>
<a id="pgfId-1016632"></a></p>
<div class="webflare-div-image">
<img width="490" height="162" src="images/chap7-5.gif" /></div>

<p>
<a id="pgfId-1014352"></a>In the dashed-line interaction area there are two unjoined polygons that indicate a separation violation might occur, rather than a notch violation. Because the two polygons belong to the same shape, a notch violation should have been detected.</p>

<h4>
<a id="pgfId-1014353"></a>DRC Area</h4>

<p>
<a id="pgfId-1014354"></a>In the separation and notch diagram, the drc area is calculated for only the two parts of the shape intersecting the interaction area. The remaining parts of the shape are not measured. For all shapes composed of multiple parts, any parts outside the interaction area are not included in the calculation of drc area.</p>

<h4>
<a id="pgfId-1014355"></a>Apposition and Length</h4>

<p>
<a id="pgfId-1014356"></a>Several polygons from different cells can be abutted to form a long edge. You can select a polygon based on the length of an edge with <em>geomGetLength</em>. Unlike flat mode, unless the interaction area covers the entire edge, the polygon cannot be selected.</p>
<p>
<a id="pgfId-1014357"></a>In this example, two A cells abut to form the long, narrow figure. The interaction area (shown with a dashed line) covers only part of the polygon. The length check sees only part of the long, narrow figure.</p>
<p>
<a id="pgfId-1014358"></a>Note that large apposition checks have the same problem because the entire apposition area might not be included in the interaction area.</p>

<p>
<a id="pgfId-1016633"></a></p>
<div class="webflare-div-image">
<img width="487" height="176" src="images/chap7-6.gif" /></div>
<h4>
<a id="pgfId-1014370"></a>Nodal checks</h4>

<p>
<a id="pgfId-1014371"></a>Many of the relational selection operations contain &#8220;connection&#8221; options, where you specify <em>sameNet</em> or <em>diffNet</em> values. If you consider a <em>geomOverlap</em> command using the connection &#8220;sameNet&#8221; option, DRC might not see the entire net in the interaction area and therefore generates different results than it would in flat mode.</p>

<p>
<a id="pgfId-1016634"></a></p>
<div class="webflare-div-image">
<img width="488" height="226" src="images/chap7-7.gif" /></div>
<h4>
<a id="pgfId-1014385"></a>Saving Derived Layers</h4>

<p>
<a id="pgfId-1014387"></a><a id="marker-1014386"></a>When you run DRC hierarchically, it processes each cell independently and then processes the interaction areas cell-to-cell and cell-to-polygon. Each of these processes implies a pass through the rules.</p>
<p>
<a id="pgfId-1014388"></a>All commands in the rules including <em>saveDerived</em> are therefore executed multiple times by Diva. As a result, the <em>saveDerived</em> command might produce unintended results. During the processing of the interaction areas, the command only processes data in those areas and the results go in the parent cell.</p>
<p>
<a id="pgfId-1014389"></a>This is not a problem if you intend the saved data to flag an error condition (for example, <em>badcon = contact andNot metal</em>). However, you do not necessarily obtain meaningful results if you intend to generate new layers or replace existing layers.</p>
<p>
<a id="pgfId-1014391"></a><a id="marker-1014390"></a>If you use the <em>currentCell</em> switch name to limit the scope of the command (refer to the <a href="appD.html#29125">Simulation and Environment Control</a> chapter), data is saved only during the internal processing of each cell. Data is not saved when Diva processes interaction areas.</p>

<h2>
<a id="pgfId-1014396"></a><a id="71150"></a>How DRC Performs Checks</h2>

<p>
<a id="pgfId-1014400"></a>DRC performs checks on pairs of <a id="marker-1014397"></a>edges. Every <a id="marker-1014398"></a>edge has an <a id="marker-1014399"></a>inside and an outside relative to the polygon that it was derived from. Each check relates these edges in a different way. For example, <em>width</em> is an inside edge to an inside edge of the same polygon, and <em>ovlp</em> is an inside edge to an inside edge of different polygons.</p>
<p>
<a id="pgfId-1014401"></a>DRC checks between edges depending on their positions to each other, relative to their insides and outsides. It also depends on the check being performed. The following figure illustrates the relationships for a<em> sep</em> (separation) rule that checks outside-to-outside edge spacing of separate polygons.</p>

<p>
<a id="pgfId-1016635"></a></p>
<div class="webflare-div-image">
<img width="668" height="318" src="images/chap7-8.gif" /></div>

<p>
<a id="pgfId-1014442"></a>The following figure shows how DRC checks between two edges. DRC builds a <a id="marker-1014443"></a>region around each edge based on the check dimension. Any part of the other edge that intersects that region is in error. DRC creates the <a id="marker-1014444"></a>default error region for a check as a quadrilateral built from the edges in error.</p>

<p>
<a id="pgfId-1016637"></a></p>
<div class="webflare-div-image">
<img width="667" height="187" src="images/chap7-9.gif" /></div>

<p>
<a id="pgfId-1014475"></a>The measurements between edges are triggered by the end points of the edges. Be careful when you write rules that involve distance checks. For example, consider an enclosure check that flags violations from inside edge to outside edge.</p>
<p>
<a id="pgfId-1018272"></a>The example on the left flags violations, while the example on the right does not. No distance violation occurs from any of the metal or contact endpoints.</p>

<p>
<a id="pgfId-1018610"></a></p>
<div class="webflare-div-image">
<img width="666" height="243" src="images/chap7-10.gif" /></div>

<p>
<a id="pgfId-1014518"></a>You can use the result of a logical operation as input to the enclosure check.</p>

<p>
<a id="pgfId-1016643"></a></p>
<div class="webflare-div-image">
<img width="561" height="246" src="images/chap7-11.gif" /></div>

<p>
<a id="pgfId-1014519"></a>The resultant figure from the <em>geomAnd</em> command has edge endpoints that trigger DRC violations.</p>
<p>
<a id="pgfId-1014521"></a>Normally, DRC does not check adjacent <a id="marker-1014520"></a>edges (two edges that meet at a single point in a polygon) because their end points touch. This is not true for width and notch checks where DRC checks adjacent edges if the angle between them is less than 90 degrees.</p>

<p>
<a id="pgfId-1016644"></a></p>
<div class="webflare-div-image">
<img width="667" height="176" src="images/chap7-12.gif" /></div>

<p>
<a id="pgfId-1014532"></a>This difference can be eliminated if you specify a lower dimensional limit of greater than 0. For example,</p>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1014533"></a>drc( metal 0 &lt; notch &lt; 3 )</pre>
<p>
<a id="pgfId-1014534"></a>The lower limit specifies that a spacing of 0 between edges is acceptable. The point where the edges meet does not trigger a check. However, the other end points of the edges might possibly trigger a check.</p>

<p>
<a id="pgfId-1018366"></a></p>
<div class="webflare-div-image">
<img width="577" height="166" src="images/chap7-13.gif" /></div>
<h4>
<a id="pgfId-1014588"></a>Angled Edge Tolerance</h4>

<p>
<a id="pgfId-1014589"></a>Angled edges are treated differently when doing normal spacing and width checks. If you draw a path in a layout with a defined width, that path does not have exactly the width you defined because the editor can only put the endpoints of the path edges on a finite integer grid. For example, if you create a path with a width of 1 micron, the edges are 1.4142 microns apart along both the X and Y axes. This means the path outline might have a width slightly less or slightly greater than 1 micron depending on the size of the layout grid you are using and the angles of the corners of the path. </p>
<p>
<a id="pgfId-1014590"></a>If DRC checked for an exact dimension on angled edges, these paths might be flagged as errors. For example, if on a 1000 dbu per micron grid you create a horizontal path with a width of 1 micron that turns 45 degrees, the resulting width is 0.99985 microns. An exact DRC width check for 1 micron flags this an error.</p>
<p>
<a id="pgfId-1014591"></a>To avoid this situation, DRC automatically introduces a very small tolerance into angled edge checks. The tolerance is always biased in the direction of not producing an error. However, if you use a DRC check that includes an &#8220;=&#8221; operator (for example,<em> 1 &lt;= sep &lt;= 2</em>), the tolerance is removed and checks are made to exact dimensions.</p>

<h3>
<a id="pgfId-1014592"></a>Looking Through the Wall</h3>

<p>
<a id="pgfId-1014594"></a><a id="marker-1014593"></a>DRC checks are normally considered as acting between polygons. However, the DRC program actually considers edge relationships. For example, a <a id="marker-1014595"></a><a id="marker-1014596"></a>spacing check is considered the separation between the outside of one edge and the outside of another edge, where &#8220;outside&#8221;<em> </em>refers to the polygon from which the edge was taken.</p>
<p>
<a id="pgfId-1014597"></a>An enclosure check measures the spacing between the outside edge of one polygon and the inside edge of another polygon. For enclosure checks, you might normally think of one polygon nested inside another. However, the check can apply to any polygon configuration. Consider the following diagram, which illustrates the many possibilities for an enclosure check.</p>

<p>
<a id="pgfId-1016647"></a></p>
<div class="webflare-div-image">
<img width="667" height="177" src="images/chap7-14.gif" /></div>

<p>
<a id="pgfId-1014620"></a>Example B is the configuration you might normally consider for enclosure. Example C can also be accepted as normal usage. However, examples A, D, and E show the enclosure measurement going through another edge. This is commonly referred to as &#8220;looking through the wall.&#8221;</p>
<p>
<a id="pgfId-1016651"></a>Whether examples A, D and E are correct depends upon what you want. For example, the following external spacing configuration is not normally what you want and Diva does not normally generate errors for it (depending on the exact configuration).</p>

<p>
<a id="pgfId-1016658"></a></p>
<div class="webflare-div-image">
<img width="667" height="157" src="images/chap7-15.gif" /></div>

<p>
<a id="pgfId-1016659"></a>This is a situation where the edge you are &#8220;looking through&#8221; is adjacent to the edge being checked. Configurations C and D are not of this form and the program, by default, always checks them. You have further capabilities for checking these situations using the DRC<em> shielded </em>modifier, which specifies whether the program can &#8220;look through walls&#8221; and in what manner it should do so.</p>
<p>
<a id="pgfId-1014629"></a>You can also control &#8220;looking through walls&#8221; by using the various edge selection and processing commands to derive only those edges or shapes you want checked. In the case of examples A through E, the operation of selecting edges of the <em>enclosed</em> layer inside the <em>enclosing</em> layer eliminates any edges that cause the &#8220;looking through the wall&#8221; condition.</p>

<h3>
<a id="pgfId-1014630"></a>Check Conjunction</h3>

<p>
<a id="pgfId-1014633"></a>In DRC, d<a id="marker-1014631"></a>erived layers are used to facilitate complex <a id="marker-1014632"></a>checks. Each design rule check is a separate check generating output. You can direct that output to the <a id="marker-1014634"></a>error layer or to a derived layer. When output to a derived layer, the output can be edges or polygons, and behaves like any other derived layer.</p>
<p>
<a id="pgfId-1014635"></a>For input, each check uses an original graphics layer, a derived layer, or the output of another DRC check. In this way DRC achieves &#8220;check conjunction&#8221; by passing data from check to check through intermediate layers. </p>
<p>
<a id="pgfId-1014636"></a>For example, the check shown validates metal spacing in the presence of polysilicon that is within one micron of either side of one of the metal edges (single reflection). The first two steps find the metal edges that are close to polysilicon edges. The third step checks the metal separation using both of the previously extracted metal edges. You can apply this concept of check conjunction to double and triple reflections with a minimal number of steps.</p>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1014637"></a>ref1 = drc( poly metal enc &lt; 1 parallel edgeb )</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1014638"></a>ref2 = drc( metal poly enc &lt; 1 parallel edgea )</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1014639"></a>drc( metal geomCat( ref1 ref2 ) sep &lt; 3 opposite )</pre>

<h3>
<a id="pgfId-1014640"></a>Alignment and Registration</h3>

<p>
<a id="pgfId-1014642"></a>Ther<a id="marker-1014641"></a>e are three main methodologies for checking the separation of shapes in a layout. These methodologies can be simulated individually to some degree using existing checks. The intent of alignment and registration modifiers is to provide the flexibility of using combinations of these methodologies in a single check, without the overhead in processing time associated with the existing methods.</p>
<p>
<a id="pgfId-1014643"></a>The three methodologies are associated with the process requirements for separation, alignment, and registration, although the checking performed might not necessarily relate directly to the process characteristics these names reference. It is up to you to determine which methodology or combination of methodologies best fits your requirements. </p>
<p>
<a id="pgfId-1014644"></a>The following sections describe each of these methodologies in detail. All methodologies give the same result for parallel orthogonal edges. It is only at the corners that differences occur.</p>

<h4>
<a id="pgfId-1014645"></a>Separation</h4>

<p>
<a id="pgfId-1014646"></a>This methodology of detecting spacing violations is the most commonly used in DRC programs. Separation has the simple requirement that one shape must <a id="marker-1014647"></a>maintain a minimum separation from another shape irrespective of the relationship between the shapes. If the required separation is 3 microns, then parallel edges must be at least 3 microns apart, corners must be at least 3 microns from edges, and corners must also be 3 microns from corners. This is independent of the angles of the edges.</p>
<p>
<a id="pgfId-1014648"></a>The following figure illustrates for this methodology the area around a shape which is inviolate for other shapes. The illustration shows the normal radius at the corner, where all points on the arc are equidistant from the corner.</p>

<p>
<a id="pgfId-1016662"></a></p>
<div class="webflare-div-image">
<img width="628" height="194" src="images/chap7-16.gif" /></div>
<h4>
<a id="pgfId-1014667"></a>normalGrow</h4>

<p>
<a id="pgfId-1014668"></a>This methodology of detecting spacing violations is directly related to the normal process<a id="marker-1014669"></a> of growing shapes. To detect violations, the area around each shape is processed the same as if the original shape was grown by the spacing amount. The angles and configuration of the edges at the shape corners are maintained in the violation area except when an acute angle corner is grown. This is truncated to prevent excessive extension.</p>

<p>
<a id="pgfId-1016663"></a></p>
<div class="webflare-div-image">
<img width="594" height="209" src="images/chap7-17.gif" /></div>
<h4>
<a id="pgfId-1014699"></a>squareGrow</h4>

<p>
<a id="pgfId-1014701"></a>This methodology of detecting spacing violations is based on mask move<a id="marker-1014700"></a>ment in processing and has the effect of moving the mask a maximum amount in the X an Y axes. To detect violations, the area around each shape is processed as if the original shape had been misaligned in all directions at the same time.</p>
<p>
<a id="pgfId-1014702"></a>This is best illustrated in the following diagram which shows the misalignment area and also the way in which it is derived by moving an orthogonal square (whose size is the movement value in X and Y) around the periphery of the polygon.</p>

<p>
<a id="pgfId-1016668"></a></p>
<div class="webflare-div-image">
<img width="609" height="187" src="images/chap7-18.gif" /></div>

<p>
<a id="pgfId-1014719"></a>The characteristics of this methodology are the truncated non-orthogonal corners and the extended expansion on angled edges (root 2 expansion for 45 degree edges).</p>

<h4>
<a id="pgfId-1014720"></a>Checking Philosophy</h4>

<p>
<a id="pgfId-1014721"></a>Given the three possible spacing methodologies, you can now apply them in such a way as to simulate your own processing methodology. Since it is unknown what this is, the best method is provide a check that allows for all three methods at once, and provides the capability to selectively determine whether the methods are applied, and with what value.</p>
<p>
<a id="pgfId-1014722"></a>Normal DRC spacing checks apply a single separation value. Even with the other methodologies, this value is the same for parallel orthogonal edges. The normal separation check and its single value must be the basis for the new check.</p>
<p>
<a id="pgfId-1014723"></a>The new check is applied only when corner-to-corner, corner-to-edge, or edge-to-edge spacing is required. If the spacing is below the absolute minimum, an error is generated and no complex analysis is done. </p>
<p>
<a id="pgfId-1014724"></a>The check can be applied to polygon input layers or edge input layers. When used for edges, corners formed by the edges are treated exactly the same as polygon corners. Open ends of edges are treated as 90 degree outside corners.</p>

<h4>
<a id="pgfId-1014725"></a>Command Syntax</h4>

<p>
<a id="pgfId-1014726"></a>This syntax is the same as the normal spacing check with the addition of two modifier keywords. </p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1014727"></a>drc( layer1 layer2 sep &lt; val1 normalGrow = val2 squareGrow = val3 )</pre>

<p>
<a id="pgfId-1014728"></a>The <em>normalGrow</em> and <em>squareGrow</em> modifier keywords represent the separation methodologies described in the previous sections. The next example explains how their values are applied.</p>
<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1014729"></a>The processing of this check is not performed by growing the shapes, although the effect is the same.</div>

<h4>
<a id="pgfId-1014730"></a>Example</h4>

<p>
<a id="pgfId-1014731"></a>In this example it is required that the minimum normal separation between shapes is to be 5 microns. However, at the corners you want to allow for a normal grow of 0.8 microns and a square grow of 1.0 microns.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1014732"></a>drc ( metal poly sep &lt; 5 normalGrow = 0.8 squareGrow 1.0 )</pre>

<p>
<a id="pgfId-1014766"></a>How these values are applied is demonstrated in this figure.</p>

<p>
<a id="pgfId-1016670"></a></p>
<div class="webflare-div-image">
<img width="544" height="356" src="images/chap7-19.gif" /></div>

<p>
<a id="pgfId-1014767"></a>The final effect of the check is as if the original shapes had first been grown using the normal grow methodology by an amount of 0.8, then grown using the square grow methodology by an amount of 1.0, and then checked for normal separation by an amount of 1.4, which is 5 minus twice the sum of the other amounts.</p>
<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1014768"></a>The normal and square grows are applied to both shapes before the separation is checked.</div>
<p>
<a id="pgfId-1017130"></a>With &#8220;all-angle&#8221; edges, the order in which the normal grow and the square grow are applied makes a difference in the end result. The order in which these operations is applied is taken from the order of the keywords in the command. If, in the above example, the square grow was needed before the normal grow, the check would appear as follows:</p>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1017131"></a>drc ( metal poly sep &lt; 5 squareGrow = 1.0 normalGrow = 0.8 )</pre>
<p>
<a id="pgfId-1017132"></a>If the sum of the modifier values is equal to half the separation value, then no separation check would apply. The sum of the modifier values must not exceed half of the separation value.</p>
<p>
<a id="pgfId-1014772"></a>If either of the modifiers is not required, their values can be set to zero, or the modifier keyword can be omitted from the check. If both modifiers are set to zero, the result would be a normal spacing check. </p>
<p>
<a id="pgfId-1023489"></a>These modifier keywords can be applied to the width, notch, overlap, and enclosure commands as well as the separation command. They are not applicable to the area command.</p>

<h3>
<a id="pgfId-1014777"></a><a id="marker-1023490"></a><a id="marker-1014774"></a>Cell-Based<a id="Cell-Based Options"></a> Options</h3>
<a id="pgfId-1014779"></a><a id="marker-1014778"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
hdrc = mode</pre>
<h4>
<a id="pgfId-1014780"></a>Description</h4>

<p>
<a id="pgfId-1014783"></a>For the <a id="marker-1014781"></a><em>ivDRC</em> and <em>ivVerify</em><a id="marker-1014782"></a> commands, the run modes can be overridden on a cell-by-cell basis by adding a property to the cell. The property overrides the option on the command line for the cell containing the property and all cells below it in the hierarchy.</p>

<h4>
<a id="pgfId-1014784"></a>Fields</h4>
<p><strong>
<a id="pgfId-1014785"></a><code>hdrc</code></strong></p>

<p class="webflare-indent1">
<a id="pgfId-1025910"></a><code>&#160;&#160;&#160;&#160;</code>The property name.</p>

<p><strong>
<a id="pgfId-1025915"></a><code>mode</code></strong></p>

<p class="webflare-indent1">
<a id="pgfId-1025918"></a><em>&#160;&#160;&#160;&#160;</em>The value of the property enclosed in double quotes. The value can be any one of these single characters as shown, or a string starting with that character. The options are as follows:</p>

<p><strong>
<a id="pgfId-1025923"></a><code>F</code></strong></p>

<p class="webflare-indent1">
<a id="pgfId-1025926"></a> Flat. Equivalent to the<em> ?hier nil </em>option.</p>

<p><strong>
<a id="pgfId-1025931"></a><code>N</code></strong></p>

<p class="webflare-indent1">
<a id="pgfId-1025934"></a> Non-optimized hierarchical. Equivalent to <em>?hier t</em> plus <em>?optimize nil</em>.</p>

<p><strong>
<a id="pgfId-1025939"></a><code>E</code></strong></p>

<p class="webflare-indent1">
<a id="pgfId-1025942"></a> Optimized hierarchical with <a id="marker-1014789"></a>expanded mosaics. Equivalent to <em>?hier</em> plus <em>?optimize, </em>except mosaics are expanded.</p>

<p><strong>
<a id="pgfId-1025947"></a><code>U</code></strong></p>

<p class="webflare-indent1">
<a id="pgfId-1025950"></a> Optimized hierarchical with unexpanded mosaics. Equivalent to <em>?hier</em> plus <em>?optimize</em>.</p>
<p>
<a id="pgfId-1014792"></a>The references to expansion of mosaics identifies how they are processed in the pattern recognition optimization. In expanded mode, the mosaic planes are treated as contiguous data without interplane boundaries or repetition. In unexpanded mode, the interfaces between the planes are optimized the same as interfaces between cells.</p>

<h4>
<a id="pgfId-1014793"></a>Example</h4>

<p>
<a id="pgfId-1014794"></a>In this example, the cell is checked hierarchically with optimization, while mosaics remain unexpanded.</p>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1014795"></a>hdrc = &quot;U&quot;</pre>

<h2>
<a id="pgfId-1014798"></a>Checking Commands<a id="Checking Commands"></a></h2>

<p>
<a id="pgfId-1014799"></a>Checking commands are used to check the design rule integrity in the layout.</p>

<h3>
<a id="pgfId-1014802"></a>check<a id="checkAllLayers"></a>AllLayers</h3>
<a id="pgfId-1014804"></a><a id="marker-1014803"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
checkAllLayers( [ exceptLayer ] ... )</pre>
<h4>
<a id="pgfId-1014805"></a>Description</h4>

<p>
<a id="pgfId-1014806"></a>The <em>checkAllLayers </em>command starts a set of design rule checks based on properties in the technology file. These properties are considered only if they have a purpose of <em>all</em>.</p>
<p>
<a id="pgfId-1014808"></a><a id="marker-1014807"></a>For each of these technology file properties, a check is executed by the program on the layers as defined by the technology file properties, unless you exclude layers from checking with the <em>except_layer </em>option.</p>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1020718"></a><a id="marker-1020717"></a>minWidth<br /><a id="marker-1020719"></a>minSpacing<br /><a id="marker-1020720"></a>minNotch<br /><a id="marker-1020721"></a>minEnclosure<br /><a id="marker-1020722"></a>minOverlap</pre>
<p>
<a id="pgfId-1020723"></a>If you do not specify input layers in the <em>checkAllLayers </em>command, the checks executed are all those defined by the DRC check properties. </p>
<p>
<a id="pgfId-1014820"></a>If you specify any input layers in the <em>checkAllLayers </em>command, the checks executed are those defined by the DRC check properties, excluding the checks using the specified input layers. </p>
<p>
<a id="pgfId-1014821"></a>A check is not fully generated from a property if that property does not match the criteria of the check. For example, if the property is <em>minSpacing</em> and it has an <em>Order</em> state of <em>t</em>, it cannot be checked because Diva&#8217;s spacing check is not ordered.</p>

<h4>
<a id="pgfId-1014822"></a>Fields</h4>
<p><strong>
<a id="pgfId-1014823"></a><code>exceptLayer</code></strong></p>

<p class="webflare-indent1">
<a id="pgfId-1025957"></a> An optional argument consisting of one or more original graphics layer names. Each layer specified in the argument is omitted from the checks executed by the program.</p>

<h4>
<a id="pgfId-1014824"></a>Examples</h4>

<p>
<a id="pgfId-1014825"></a>The following example is the default command. </p>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1014826"></a>checkAllLayers( )</pre>
<p>
<a id="pgfId-1014827"></a>The following example checks all layers except for<em> tub </em>and <em>nwell.</em></p>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1014828"></a>checkAllLayers( &quot;tub&quot; &quot;nwell&quot; )</pre>

<h3>
<a id="pgfId-1014831"></a>check<a id="checkLayer"></a>Layer</h3>
<a id="pgfId-1014833"></a><a id="marker-1014832"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
checkLayer( layer1[ layer2 ] )</pre>
<h4>
<a id="pgfId-1014834"></a>Description</h4>

<p>
<a id="pgfId-1014835"></a>The <em>checkLayer </em>command initiates a set of one-layer or two-layer design rule checks based on properties in the technology file. These properties are only considered if they have a purpose of &#8220;all.&#8221;</p>
<p>
<a id="pgfId-1014838"></a><a id="marker-1014836"></a>When you specify the input <a id="marker-1014837"></a>layer(s), checks are performed if the layer(s) in the technology file property matches the input layer(s). </p>
<p>
<a id="pgfId-1014840"></a>If the two-layer <a id="marker-1014839"></a>property <em>minEnclosure</em> exists in the technology file, a check is performed only under these conditions:</p>
<ul><li>
<a id="pgfId-1014841"></a>If the layers in the property are the same as the <em>checkLayer</em> input layers and the layers are in the same order.</li><li>
<a id="pgfId-1014842"></a>If the layers are in reverse order and the property contains the flag &#8220;t.&#8221; This flag specifies that two checks are required, one with the layers in the specified order, and one with the layers in reverse order. </li></ul>


<h4>
<a id="pgfId-1014843"></a>Fields</h4>
<p><strong>
<a id="pgfId-1014844"></a><code>layer1</code></strong></p>

<p class="webflare-indent1">
<a id="pgfId-1025964"></a> An original graphics layer name. If this is the only layer you specify, the checks executed by Diva are those defined by these technology file properties:</p>
<p class="webflare-indent1">
<a id="pgfId-1014846"></a><code> minWidth
minSpacing
minNotch </code><a id="marker-1014845"></a><a id="marker-1014847"></a><a id="marker-1014849"></a></p>

<p><strong>
<a id="pgfId-1014851"></a><code>layer2</code></strong></p>

<p class="webflare-indent1">
<a id="pgfId-1025973"></a> An optional original graphics layer name. If you specify this layer, the checks executed by the program are those defined by these technology file properties:</p>
<p class="webflare-indent1">
<a id="pgfId-1014853"></a><code> minEnclosure
minSpacing
minOverlap </code><a id="marker-1014852"></a><a id="marker-1014854"></a><a id="marker-1014856"></a></p>

<h4>
<a id="pgfId-1014858"></a>Examples</h4>

<p>
<a id="pgfId-1014859"></a>The following example performs single layer checks of the <em>poly</em> layer.</p>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1014860"></a>checkLayer( &quot;poly&quot; )</pre>
<p>
<a id="pgfId-1014861"></a>The following example performs dual layer checks of the <em>poly</em> and <em>diffusion</em> layers.</p>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1014862"></a>checkLayer( &quot;poly&quot; &quot;diffusion&quot; )</pre>

<h3>
<a id="pgfId-1015012"></a><a id="73701"></a>drcAntenna<a id="marker-1015011"></a> (old syntax)</h3>
<a id="pgfId-1015013"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
[outLayer] = drcAntenna(
 refLayer
 gate( mode( inLayer1 [inLayer2....] ))
 antenna( mode ( inLayer3 [inLayer4....] ))
 [factor( inLayer5 value1 [inLayer6 value2 ...] )]
 limits
 [&quot;message&quot;]
 [errorLimit(number [abort])]
 )</pre>
<h4>
<a id="pgfId-1015014"></a>Description</h4>

<p>
<a id="pgfId-1015016"></a>The <em>drcAntenna</em> command detects unacceptable antenna ratios. An antenna ratio is the ratio between the area of specific conducting layers and the area of MOS gates on a net. An antenna check is measured for each net in the circuit.<a id="marker-1015015"></a></p>
<p>
<a id="pgfId-1015017"></a>You usually do antenna checks on a partially fabricated circuit. For example, a check might be required for the ratio of <em>metal1</em> to gate areas prior to fabricating the <em>metal2</em> layer. To achieve this partial connectivity, you must use the antenna check with a <em>geomConnect</em> command, which connects only those layers available at the stage of fabrication you specify. To check the complete connectivity of a circuit, a rule deck may specify multiple pairs of <em>geomConnect </em>and drcAntenna commands, one for each stage of the fabrication.</p>
<p>
<a id="pgfId-1015018"></a>To use the antenna check, all layers involved must be connected or have net numbers derived from connected layers. Normally in Diva verification, the MOS gate layers do not have net numbers because these layers represent devices that are connected to multiple nets. For antenna checking, you must use the <em>geomStamp</em> command to assign net numbers to the gate layers. For normal MOS circuits, the appropriate stamping layer is the polysilicon that was used to define the gate layer and to specify the gate (<em>G</em>) connection in the <em>extractDevice</em> command.</p>

<h4>
<a id="pgfId-1017188"></a>Fields </h4>
<p><strong>
<a id="pgfId-1017189"></a><code>outLayer</code></strong></p>

<p class="webflare-indent1">
<a id="pgfId-1025988"></a> Optional output layer for nets that fail the required ratio calculation. Diva uses this layer in conjunction with the <em>refLayer</em>. If you do not specify an output layer, Diva uses the<em> error marker</em> layer for output. Serial and net numbers are preserved when copied from <code>refLayer</code> to <code>outLayer</code>.</p>

<p><strong>
<a id="pgfId-1025993"></a><code>refLayer</code></strong></p>

<p class="webflare-indent1">
<a id="pgfId-1025996"></a> If a net fails the ratio check, Diva writes all shapes on the <em>refLayer</em> for that net to the output layer. Overlapping and butting shapes within a net are merged.</p>

<p><strong>
<a id="pgfId-1026001"></a><code>gate</code></strong></p>

<p class="webflare-indent1">
<a id="pgfId-1026004"></a> Keyword introducing the layers to be measured for the gate area of the check. Diva derives a single value of <em>gate area</em> for each net in the circuit. It has the form:</p>
<p class="webflare-indent1">
<a id="pgfId-1015023"></a><code> gate( mode( inLayer1 [inLayer2....] ))</code></p>
<p class="webflare-indent1">
<a id="pgfId-1015024"></a> You can specify one of three different modes. If you do not specify the <em>mode</em> keyword, the default is <em>sum</em>.</p>

<p>
<a id="pgfId-1017420"></a></p>
<table class="webflareTable" id="#id1017201">
<tbody><tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1017203"></a><code>sum</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1017205"></a>For every net, Diva measures the area of each shape on the specified layers (for example, <em>inLayer1</em> and <em>inLayer2</em>) on that net and sums the areas into a total value.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1017207"></a><code>min</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1017209"></a>For every net, Diva measures the area of each shape on the specified layers (for example, <em>inLayer1</em> and <em>inLayer2) </em>on that net and chooses the lowest area value.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1017211"></a><code>max</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1017213"></a>For every net, Diva measures the area of each shape on the specified layers (for example <em>inLayer1</em> and <em>inLayer2</em>) on that net and chooses the greatest value of area.</p>
</td>
</tr>
</tbody></table>

<p class="webflare-indent1">
<a id="pgfId-1015028"></a> You can specify any number of layers. </p>

<p><strong>
<a id="pgfId-1026015"></a><code>antenna</code></strong></p>

<p class="webflare-indent1">
<a id="pgfId-1026018"></a> Keyword introducing the layers to be measured for the antenna area of the check. Diva derives a single value of <em>antenna area</em> for each net in the circuit. The <em>antenna </em>keyword has exactly the same format as the <em>gate</em> keyword.</p>
<p class="webflare-indent1">
<a id="pgfId-1015030"></a> The antenna ratio is calculated as </p>
<p class="webflare-indent1">
<a id="pgfId-1015031"></a><code> (antenna area / gate area).</code></p>

<p><strong>
<a id="pgfId-1015032"></a><code>factor</code></strong></p>

<p class="webflare-indent1">
<a id="pgfId-1026027"></a> Optional keyword introducing the definition of factors to apply when a net has specific connections that modify the value of the measured ratio. It has the form:</p>
<p class="webflare-indent1">
<a id="pgfId-1015033"></a><code> factor( inLayer1 value1 [inLayer2 value2....] )</code></p>
<p class="webflare-indent1">
<a id="pgfId-1015034"></a> The option consists of one or more pairs of layers and values:</p>

<p>
<a id="pgfId-1017426"></a></p>
<table class="webflareTable" id="#id1017224">
<tbody><tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1017226"></a><code>inLayer</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1017228"></a> Any connected layer.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1017230"></a><code>value</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1017232"></a> An integer or floating point value. </p>
</td>
</tr>
</tbody></table>

<p class="webflare-indent1">
<a id="pgfId-1015037"></a> If a net connects to the specified layer, Diva uses the factor for that layer to modify the calculated antenna ratio for that net. For example, if the layer is diffusion and the value is 2, a net that connects to diffusion and has an antenna ratio of 200 ends up with an adjusted ratio of 100. This means any net connected to diffusion can have twice the actual antenna ratio before it fails the check.</p>
<p class="webflare-indent1">
<a id="pgfId-1015038"></a> If you specify multiple layers in the <em>factor </em>option and a net is connected to more than one of these layers, Diva takes the value of the first layer you specify that has a connection. The list is prioritized from left to right.</p>
<p class="webflare-indent1">
<a id="pgfId-1015039"></a> The antenna ratio is calculated as:</p>
<p class="webflare-indent1">
<a id="pgfId-1015040"></a><code> ((antenna area / gate area) / factor)</code></p>

<p><strong>
<a id="pgfId-1015041"></a><code>limits</code></strong></p>

<p class="webflare-indent1">
<a id="pgfId-1026039"></a> Specifies the limits Diva applies to the final antenna ratio after the application of any factor. </p>
<p class="webflare-indent1">
<a id="pgfId-1017421"></a> If the ratio for any net meets the specification in these limits, that net fails the antenna check and an output is generated. (See the <em>outLayer</em> and <em>refLayer</em> field descriptions for more information on output layers.)</p>
<p class="webflare-indent1">
<a id="pgfId-1017422"></a> You specify the limits as an absolute limit or range using one of the following keywords:</p>

<p><strong>
<a id="pgfId-1015044"></a><code>keep</code> </strong></p>

<p class="webflare-indent1">
<a id="pgfId-1026051"></a>Retains the net as an error if its antenna ratio is within the limits you specify.</p>

<p><strong>
<a id="pgfId-1026056"></a><code>ignore</code></strong></p>

<p class="webflare-indent1">
<a id="pgfId-1026059"></a> Ignores the net if its antenna ratio is within the limits you specify.</p>
<p class="webflare-indent1">
<a id="pgfId-1015046"></a> Operators you can use with the keywords are as follows:</p>

<p>
<a id="pgfId-1017428"></a></p>
<table class="webflareTable" id="#id1017236">
<tbody><tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1017238"></a><code>&lt;</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1017240"></a>Less than</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1017242"></a><code>&lt;=</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1017244"></a>Less than or equal to</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1017246"></a><code>&gt;</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1017248"></a>Greater than</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1017250"></a><code>&gt;=</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1017252"></a>Greater than or equal to</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1017254"></a><code>==</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1017256"></a>Equal</p>
</td>
</tr>
</tbody></table>

<p class="webflare-indent1">
<a id="pgfId-1015048"></a> You can specify limits by combining a keyword with one or more operators and numbers using normal mathematical conventions. For example:</p>
<p class="webflare-indent1">
<a id="pgfId-1015049"></a><code> keep &gt; 200
ignore &lt;= 150
100 &lt;= keep &lt;= 300</code></p>
<p class="webflare-indent1">
<a id="pgfId-1015052"></a> Regardless of the limits you specify, a net is not selected as an error if</p>

<p>
<a id="pgfId-1017435"></a></p>
<table class="webflareTable" id="#id1017257">
<tbody><tr>
<td class="webflareTd" colspan="1" rowspan="1">

<ul><li>
<a id="pgfId-1017259"></a>The gate area is zero.</li></ul>

</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">

<ul><li>
<a id="pgfId-1017261"></a>The antenna area is zero.</li></ul>

</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">

<ul><li>
<a id="pgfId-1017263"></a>The factor is specified as zero.</li></ul>

</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">

<ul><li>
<a id="pgfId-1017265"></a>The final ratio is zero.</li></ul>

</td>
</tr>
</tbody></table>
<p><strong>
<a id="pgfId-1024887"></a><code>&quot;message&quot;</code> </strong></p>

<p class="webflare-indent1">
<a id="pgfId-1026075"></a>Optional text string enclosed in quotation marks that Diva uses to annotate error shapes that are written on the<em> error marker</em> layer. Diva assigns the string a suffix with the net number and the final ratio value and appends it to the error shape as a <em>drcWhy</em> property. You can view this property using the <em>Verify - Markers - Explain</em> menu entry.</p>

<p><strong>
<a id="pgfId-1026080"></a><code>errorLimit</code></strong></p>

<p class="webflare-indent1">
<a id="pgfId-1026083"></a> Optional modifer allowing the specification of a limit to the number of error markers which the check will produce. The keyword <em>abort</em> can be used to cause early termination of the entire run if the limit is reached. See <a href="chap7.html#54053">errorLimit</a> in the drc command.</p>

<h4>
<a id="pgfId-1015058"></a>Example 1</h4>

<p>
<a id="pgfId-1015059"></a>The following example is the simplest application of this command. It checks the ratio of <em>metal</em> area to <em>ngate</em> area and flags the gates of all nets that have a ratio greater than 200 on the <em>marker error</em> layer.</p>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1015060"></a>drcAntenna( ngate gate( ngate ) antenna(metal ) ignore &lt; 200 )</pre>

<h4>
<a id="pgfId-1015061"></a>Example 2</h4>

<p>
<a id="pgfId-1015062"></a>The following example uses all options in the <em>drcAntenna</em> command. The keyword <em>sum</em> on the <em>antenna</em> line is used only for clarity because the default mode is <em>sum</em>. The <em>message</em> is not used because an output layer is specified, and the <em>message</em> applies only to the <em>marker error</em> output. The <em>geomStamp</em> commands apply net numbers to the gate layers and the <em>geomCat</em> command creates an error reference layer containing all layers involved in the check so that the <em>badAntenna</em> layer does not contain all gates and metal in error.</p>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1015063"></a>ngate = geomStamp( ngate poly )<br />pgate = geomStamp( pgate poly )<br />antError = geomcat( ngate pgate metal1 )<br />badAntenna = drcAntenna(</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1015064"></a>antError<br />gate( min( ngate pgate )<br />antenna( sum( metal1 ))<br />factor( ndiff 2.0 pdiff 1.7 <br />ignore &lt; 125<br />&quot;Antenna ratio less than 125&quot;</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1015065"></a>)</pre>

<h4>
<a id="pgfId-1015066"></a>Example 3</h4>

<p>
<a id="pgfId-1015067"></a>The following example uses the drcAntenna command to check for nodes that have both <em>poly1</em> and <em>poly2</em> attached anywhere on the same node, which might be illegal in some processes.</p>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1015068"></a>(drcExtractRules<br />   (poly1 = (geomOr &quot;poly1&quot;))<br />   (poly2 = (geomOr &quot;poly2&quot;))<br />   (metal1 = (geomOr &quot;metal1&quot;))<br />   (cont = (geomOr &quot;cont&quot;))<br />   (via = (geomOr &quot;via&quot;))<br />   (via2 = (geomOr &quot;via2&quot;))<br />   (metal2 = (geomOr &quot;metal2&quot;))<br />   (metal3 = (geomOr &quot;metal3&quot;))<br />(geomConnect<br />   (via cont poly1 poly2 metal1)<br />   (via via metal1 metal2)<br />   (via via2 metal2 metal3)<br />)</pre>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1015069"></a>/* Find any poly2 on the same node as any poly1 */</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1015070"></a>/* Note that everything from here to the end of the file is a single command.*/</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1017558"></a>saveDerived(drcAntenna(
poly2     /* Use &quot;poly2&quot; as the &quot;output&quot; layer for errors (The &quot;error flag&quot;
&#160;&#160;&#160;&#160; is &quot;poly2&quot;.) You can use another layer here, or you can output the<br />  entire node by doing a &quot;geomCat&quot; of all pertinent layers, and use<br />  that layer instead of &quot;poly2,&quot; for example, <br />          p1p2Out = geomCat(poly1 poly2 metal1 metal2 metal3) </pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1015072"></a>drcAntenna(p1p2Out) */</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1015073"></a>gate(sum(poly1))&#160;&#160; /* Look for total amount of poly1 on each node */</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1015074"></a>antenna(sum(poly2))   /* &quot;antenna&quot; (error) is defined as the sum of the area of
&#160;&#160;&#160;&#160;    the &quot;poly2&quot;. Any node that has &quot;gate&quot; (poly1) and<br />     &quot;antenna&quot; (poly2) on the node - is an error */ </pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1015075"></a>&quot;poly2 shares net with poly1&quot;) ) /* Message that is attached to error flags */<br />)</pre>
<h3>
<a id="pgfId-1021087"></a><a id="54816"></a>drcAntenna<a id="marker-1020082"></a> (new syntax)</h3>
<a id="pgfId-1020084"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
drcAntenna(
 assign ...
 error ...
 create ...
 export ...
 )</pre>
<h4>
<a id="pgfId-1020085"></a>Description</h4>

<p>
<a id="pgfId-1020087"></a>The <em>drcAntenna</em> command is used to detect relationships between shapes on different layers within a net. The most common check is antenna ratio. Antenna ratio is the ratio between the area of specific conducting layers and the area of MOS gates on a net. An antenna check is measured for each net in the circuit.</p>
<p>
<a id="pgfId-1020088"></a>You usually perform antenna checks on a partially fabricated circuit. For example, a check might be required for the ratio of <em>metal1</em> to gate areas prior to fabricating the <em>metal2</em> layer. To achieve this partial connectivity, you must use the antenna check with a <em>geomConnect</em> command, which connects only those layers available at the stage of fabrication you specify. To check the complete connectivity of a circuit, a rule deck may specify multiple pairs of <em>geomConnect</em> and drcAntenna commands, one pair for each stage of the fabrication. The <em>export</em> clause provides a mechanism for data sharing between <em>drcAntenna</em> commands, as is needed by cumulative antenna check requirements.</p>
<p>
<a id="pgfId-1020089"></a>To use the antenna check, all layers involved must be connected or have net numbers derived from connected layers. Normally in Diva verification, the MOS gate layers do not have net numbers because these layers represent devices that are connected to multiple nets. For antenna checking, you must use the <em>geomStamp</em> command to assign net numbers to the gate layers. For normal MOS circuits, the appropriate stamping layer is the polysilicon that was used to define the gate layer and to specify the gate (<em>G</em>) connection in the <em>extractDevice</em> command.</p>

<h4>
<a id="pgfId-1020090"></a>Fields </h4>
<p><strong>
<a id="pgfId-1020092"></a><code>assign</code></strong></p>

<p class="webflare-indent1">
<a id="pgfId-1026090"></a> The assign clause is used to improve the readability of the rule and to optimize the calculation of expressions used more than once. The assign clause is optional and there may be as many used as desired. The format of the assign clause is:</p>
<p class="webflare-indent1">
<a id="pgfId-1020248"></a><code> variable = expression</code></p>
<p class="webflare-indent1">
<a id="pgfId-1020281"></a> The <code>variable</code> is local to the drcAntenna rule it is defined in and does not affect any SKILL variables, but must comply with the SKILL definition of a variable.</p>
<p class="webflare-indent1">
<a id="pgfId-1021221"></a> The <code>expression</code> may use all the procedures available in the generic expression description. Refer to <a href="chap9.html#77361">calculateParameter</a> for the definition of available operators.</p>
<p class="webflare-indent1">
<a id="pgfId-1021217"></a> Where values in the generic expression are allowed, the user may use a constant, a <code>variable</code> defined in a previous <em>assign</em> clause, a <em>measurement</em> procedure, a parameter layer created by an <em>export</em> clause, or the special procedure <em>byShape</em>. A <code>measurement</code> procedure has the form:</p>
<p class="webflare-indent1">
<a id="pgfId-1020314"></a><code> procedure( mode inLayer1 [inLayer2....] )</code></p>
<p class="webflare-indent1">
<a id="pgfId-1020339"></a> The <code>procedure</code> can be <code>area</code>, <code>perimeter</code>, or <code>shapeCount</code> and is applied to all the shapes in the current net, regardless of the layer they are on. A single value for each net is produced. The <code>area</code> procedure calculates the area of each shape on the layers specified. The <code>perimeter</code> procedure calculates the perimeter length of each shape on the layers specified. The <code>shapeCount</code> procedure counts the number of shapes on the layers specified, within the current net.</p>
<p class="webflare-indent1">
<a id="pgfId-1020095"></a> You can specify one of three different modes. If you do not specify the <em>mode</em> keyword, the default is <em>sum</em>. The <code>shapeCount</code> procedure only accepts the sum mode.</p>

<p>
<a id="pgfId-1020109"></a></p>
<table class="webflareTable" id="#id1020096">
<tbody><tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1020098"></a><code>sum</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1020100"></a>For every net, the procedure is applied to each shape on the specified layers (for example, <em>inLayer1</em> and <em>inLayer2</em>) on that net and sums the results into a total value.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1020102"></a><code>min</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1020104"></a>For every net, the procedure is applied to each shape on the specified layers (for example, <em>inLayer1</em> and <em>inLayer2) </em>on that net and chooses the lowest value.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1020106"></a><code>max</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1020108"></a>For every net, the procedure is applied to each shape on the specified layers (for example <em>inLayer1</em> and <em>inLayer2</em>) on that net and chooses the greatest value.</p>
</td>
</tr>
</tbody></table>

<p class="webflare-indent1">
<a id="pgfId-1022003"></a> Expressions may be net based or shape based. Net based expressions are produced by measurement procedures and each value applies to all shapes in the net. Net based expressions are the basis of all relationship measurements in an antenna check. Shape based expressions are produced by references to the output layer of an <em>export</em> clause, or contain the special procedure <em>byShape</em>, and each value applies to a single shape. Shape based expressions allow the accumulation of values on a per shape basis and form the mechanism for detecting accumulated gate damage. The <em>byShape</em> procedure has the following format:</p>
<p class="webflare-indent1">
<a id="pgfId-1022058"></a><code> byShape( expression reflayers )</code></p>
<p class="webflare-indent1">
<a id="pgfId-1022059"></a> The <em>byShape</em> procedure is similar to using an <em>export</em> clause to create a parameter layer, then referencing the parameter layer in a net based expression.</p>

<p><strong>
<a id="pgfId-1022048"></a><code>error</code> </strong></p>

<p class="webflare-indent1">
<a id="pgfId-1026102"></a>The <em>error</em> clause is used to create error markers. The <em>error</em> clause is optional as long as a <em>create</em> or <em>export</em> clause is provided. There may be as many <em>error</em> clauses as desired. The <em>error</em> clause has the following format:</p>
<p class="webflare-indent1">
<a id="pgfId-1020377"></a><code> error(expression reflayers message ratio)</code></p>
<p class="webflare-indent1">
<a id="pgfId-1020112"></a> The <code>expression</code> is the same as an expression in an <em>assign</em> clause, or can be a variable defined by an <em>assign</em> clause. If the value of a net based <code>expression</code> for a net is not zero, the shapes in that net on the <code>reflayers</code> are used to create marker shapes. Within each net, the markers will be the geometric OR of the shapes selected. If the value of a shape based expression for a shape is not zero, the shape on the <code>reflayers</code> is used to create a marker shape. The marker shapes will have a drcWhy property attached based on the content of the <code>message</code> string and the value of the <code>ratio</code> expression for the net.</p>
<p class="webflare-indent1">
<a id="pgfId-1024905"></a> Following the <code>ratio</code> expression, you may include the errorLimit modifier to specify a limit to the number of error markers generated. See the <a href="chap7.html#54053">errorLimit</a> modifier of the drc command for details.</p>

<p><strong>
<a id="pgfId-1022009"></a><code>create</code></strong></p>

<p class="webflare-indent1">
<a id="pgfId-1026111"></a> The <em>create</em> clause is used to generate new derived layers. The <em>create</em> clause is optional as long as an <em>error</em> or <em>export</em> clause is provided. There may be as many <em>create</em> clauses as desired. The <em>create</em> clause has the following format:</p>
<p class="webflare-indent1">
<a id="pgfId-1022010"></a><code> create(outlayer expression reflayers)</code></p>
<p class="webflare-indent1">
<a id="pgfId-1022011"></a> The <code>outlayer</code> is the name of the derived layer to be generated. The <code>outlayer</code> will be considered to be merged by later rules if there is only one <code>reflayer</code> and will be considered to be unmerged if there are multiple <code>reflayers</code>.</p>
<p class="webflare-indent1">
<a id="pgfId-1022012"></a> The <code>expression</code> is the same as an expression in an assign clause, or can be a variable defined by an assign clause. If the value of a net based <code>expression</code> for a net is not zero, the shapes in that net on the <code>reflayers</code> are copied to the <code>outlayer</code>. If the value of a shape based expression for a shape is not zero, that shape from the <code>reflayers</code> is copied to the <code>outlayer</code>.</p>
<p class="webflare-indent1">
<a id="pgfId-1023478"></a> Serial and net numbers are preserved when copied from the <code>reflayers</code> to <code>outlayer</code>.</p>

<p><strong>
<a id="pgfId-1020114"></a><code>export</code> </strong></p>

<p class="webflare-indent1">
<a id="pgfId-1026120"></a>The <em>export</em> clause is used to generate parameter layers to transfer values from one <em>drcAntenna</em> command to another. The <em>export</em> clause is optional as long as an <em>error</em> or <em>create</em> clause is provided. There may be as many <em>export</em> clauses as desired. The <em>export</em> clause has the following format:</p>
<p class="webflare-indent1">
<a id="pgfId-1020115"></a><code> export(outlayer expression ratio reflayers)</code></p>
<p class="webflare-indent1">
<a id="pgfId-1020116"></a> The <code>outlayer</code> is the name of the parameter layer to be generated. The <code>outlayer</code> contains shape/value pairs instead of geometries.</p>
<p class="webflare-indent1">
<a id="pgfId-1022041"></a> The <code>expression</code> is the same as an expression in an assign clause, or can be a variable defined by an assign clause. If the value of a net based <code>expression</code> for a net is not zero, the shapes in that net on the <code>reflayers</code> becomes the shape in the shape/value pair, with one pair created per shape in the net. The value for the same net from the <code>ratio</code> expression provides the value in the shape/value pairs. If the value of a shape based expression is not zero for a shape, that shape on the <code>reflayers</code>, becomes the shape in the shape/value pair, with the value for the same shape from the <code>ratio</code> expression provides the value in the pair.</p>

<h4>
<a id="pgfId-1020463"></a>General Notes Comparing the Old and New Syntax</h4>

<p>
<a id="pgfId-1020476"></a>The old syntax pre-defined the calculation of the antenna ratio and the determination of a net being in error or not. The new syntax leaves both to the user.</p>
<p>
<a id="pgfId-1020482"></a>A number of conditions were defined in the old syntax that precluded a net from being in error. These were gate area of zero, antenna area of zero, the factor is zero, the final ratio is zero. The user must include these conditions in the expression of the create and error clauses.</p>
<p>
<a id="pgfId-1020487"></a>The examples that follow include the old syntax, followed by the equivalent new syntax. Notice that additional terms are included in some expressions to reproduce the behaviors described in the previous paragraph.</p>

<h4>
<a id="pgfId-1020173"></a>Example 1</h4>

<p>
<a id="pgfId-1020174"></a>The following example is the simplest application of this command. It checks the ratio of <em>metal</em> area to <em>ngate</em> area and flags the gates of all nets that have a ratio greater than 200 on the <em>marker error</em> layer.</p>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1020175"></a>drcAntenna( ngate gate( ngate ) antenna(metal ) ignore &lt; 200 )</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1020488"></a>drcAntenna(
&#160;&#160;&#160;&#160;gate = area(sum ngate)
&#160;&#160;&#160;&#160;antenna = area(sum metal)
&#160;&#160;&#160;&#160;ratio = antenna / if(gate gate 1)
&#160;&#160;&#160;&#160;error(ratio &gt;= 200 &amp;&amp; gate ngate &quot;antenna limit 200&quot; ratio)<br />)</pre>
<p>
<a id="pgfId-1020516"></a>The expression in the ratio calculation includes an if procedure to handle the case where a net has antenna area but no gate area. Since the evaluation of the expression will use zero for any missing values, a division by zero would occur when there is no gate area. Therefore, a 1 is provided.</p>
<p>
<a id="pgfId-1020521"></a>The expression in the error clause includes a test for the presence of gate, in addition to testing the ratio against the limit. There is no need to test for the presence of antenna since the ratio for missing antenna would be zero.</p>

<h4>
<a id="pgfId-1020176"></a>Example 2</h4>

<p>
<a id="pgfId-1020177"></a>A more complex example is as follows:</p>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1020178"></a>ngate = geomStamp( ngate poly )<br />pgate = geomStamp( pgate poly )<br />antError = geomcat( ngate pgate metal1 )<br />badAntenna = drcAntenna(</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1020179"></a>antError<br />gate( min( ngate pgate )<br />antenna( sum( metal1 ))<br />factor( ndiff 2.0 pdiff 1.7 <br />ignore &lt; 125<br />&quot;Antenna ratio less than 125&quot;</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1020180"></a>)</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1020536"></a>drcAntenna(
&#160;&#160;&#160;&#160;gate = area(min ngate pgate)
&#160;&#160;&#160;&#160;antenna = area(sum metal1)
&#160;&#160;&#160;&#160;ndiff = shapeCount(ndiff)
&#160;&#160;&#160;&#160;pdiff = shapeCount(pdiff)
&#160;&#160;&#160;&#160;factor = if(ndiff 2.0 if(pdiff 1.7 1.0))
&#160;&#160;&#160;&#160;ratio = (antenna / if(gate gate 1)) / if(factor factor 1)
&#160;&#160;&#160;&#160;create(badAntenna ratio &gt;= 125 &amp;&amp; gate ngate pgate metal1)<br />)</pre>
<p>
<a id="pgfId-1020599"></a>Notice the use of the nested if when calculating the factor to apply to each net. If there is any ndiff we use 2.0 for the factor. If there is no ndiff, we use 1.7 if there is any pdiff. Otherwise, we use 1.0. This is the same behavior as the factor keyword in the old syntax.</p>
<p>
<a id="pgfId-1020604"></a>No factor value is created for a net which does not have ndiff or pdiff in it, since the calculation is only done for nets which have a value in the measurements referenced in the expression. This is why the ratio calculation includes an if to handle the case where factor is zero, since a missing factor value for a net will be replaced with zero.</p>

<h4>
<a id="pgfId-1022090"></a>Example 3</h4>

<p>
<a id="pgfId-1022091"></a>The following example uses the drcAntenna command to check for nodes that have both <em>poly1</em> and <em>poly2</em> attached anywhere on the same node, which might be illegal in some processes.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1022092"></a>saveDerived(drcAntenna(
&#160;&#160;&#160;&#160;poly2
&#160;&#160;&#160;&#160;gate(sum(poly1))
&#160;&#160;&#160;&#160;antenna(sum(poly2))<br />) &quot;poly2 shares net with poly1&quot;)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1022093"></a></pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1022094"></a>drcAntenna(
&#160;&#160;&#160;&#160;create(tmp shapeCount(poly1) &amp;&amp; shapeCount(poly2) poly2)<br />)<br />saveDerived(tmp &quot;poly2 shares net with poly1&quot;)</pre>

<p>
<a id="pgfId-1022095"></a>We use the create clause so the markers have a constant string from the <code>saveDerived</code> command instead of the normal antenna marker string that includes the node number and the ratio value. Instead of measuring the area, we use <code>shapeCount</code> since it is faster than area and we are only concerned with the presence of poly1 and poly2 in the same net.</p>

<h4>
<a id="pgfId-1020181"></a>Example 4</h4>

<p>
<a id="pgfId-1020182"></a>The following example uses three pairs of geomConnect and drcAntenna commands to do cumulative antenna checking for a three metal process. A gate connected to a diffusion diode is assumed to be safe.</p>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1022797"></a>drcExtractRules(

antenna_limit = 500

foreach(layer list(&quot;diff&quot; &quot;poly&quot; &quot;cont&quot; &quot;met1&quot; &quot;via1&quot; &quot;met2&quot; &quot;via2&quot; &quot;met3&quot;)
&#160;&#160;&#160;&#160;evalstring(sprintf(nil &quot;%s = geomOr(\&quot;%s\&quot;)&quot; layer layer))
)

gate = geomAnd(diff poly)
diff = geomAndNot(diff poly)
prod = drc(diff area &gt;= 0.16 fig)
diff = drc(diff area &lt; 0.16 fig)

geomConnect(
&#160;&#160;&#160;&#160;via(cont met1 diff prod poly met1)
)
gate = geomStamp(gate poly)

sprintf(msg &quot;met1 ant &gt; %n&quot; antenna_limit)
drcAntenna(
&#160;&#160;&#160;&#160;gate = area(sum gate)
&#160;&#160;&#160;&#160;antenna = area(sum met1)
&#160;&#160;&#160;&#160;diode = shapeCount(prod)
&#160;&#160;&#160;&#160;ratio = if(diode 0 antenna / if(gate gate 1))
&#160;&#160;&#160;&#160;error(ratio &gt; antenna_limit &amp;&amp; gate gate msg ratio)
&#160;&#160;&#160;&#160;export(cumulative ratio &amp;&amp; ratio &lt;= antenna_limit ratio gate)
&#160;&#160;&#160;&#160;create(good ratio &amp;&amp; ratio &lt;= antenna_limit gate)
)

geomConnect(
&#160;&#160;&#160;&#160;via(cont diff prod poly met1)
&#160;&#160;&#160;&#160;via(via1 met1 met2)
)
gate = geomStamp(gate poly)
good = geomStamp(good gate)

sprintf(msg &quot;met2 cumulative ant &gt; %n&quot; antenna_limit)
drcAntenna(
&#160;&#160;&#160;&#160;gate = area(sum gate)
&#160;&#160;&#160;&#160;antenna = area(sum met2)
&#160;&#160;&#160;&#160;diode = shapeCount(prod)
&#160;&#160;&#160;&#160;ratio = if(diode 0 antenna / if(gate gate 1))
&#160;&#160;&#160;&#160;ratio = cumulative + byShape(ratio gate)
&#160;&#160;&#160;&#160;error(ratio &gt; antenna_limit good msg ratio)
&#160;&#160;&#160;&#160;export(cumulative ratio &amp;&amp; ratio &lt;= antenna_limit ratio good)
&#160;&#160;&#160;&#160;create(good ratio &amp;&amp; ratio &lt;= antenna_limit good)
)

geomConnect(
&#160;&#160;&#160;&#160;via(cont diff prod poly met1)
&#160;&#160;&#160;&#160;via(via1 met1 met2)
&#160;&#160;&#160;&#160;via(via2 met2 met3)
)
gate = geomStamp( gate poly )
good = geomStamp(good gate)

sprintf(msg &quot;met3 cumulative ant &gt; %n&quot; antenna_limit)
drcAntenna(
&#160;&#160;&#160;&#160;gate = area(sum gate)
&#160;&#160;&#160;&#160;antenna = area(sum met8)
&#160;&#160;&#160;&#160;diode = shapeCount(prod)
&#160;&#160;&#160;&#160;ratio = if(diode 0 antenna / if(gate gate 1))
&#160;&#160;&#160;&#160;ratio = cumulative + byShape(ratio gate)
&#160;&#160;&#160;&#160;error(ratio &gt; antenna_limit good msg ratio)<br />)</pre>

<h3>
<a id="pgfId-1021884"></a><a id="30152"></a>drc(c<a id="drc(coverage)"></a>overa<a id="marker-1021883"></a>ge)</h3>
<a id="pgfId-1020940"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
[outLayer] = drc( measure [within] range [window [step]] [selector] [message] [limit] [mode] [keepMorePrecision] [gradient|normalizedGradient] )</pre>
<h4>
<a id="pgfId-1019073"></a>Description</h4>

<p>
<a id="pgfId-1019626"></a>The <em>coverage </em>check of the <em>drc</em> command does a single layer density check, or a two layer density check. In addition to directly measuring the density within a window, the rate of change in density around a window can be checked with the optional <code>gradient</code> and <code>normalizedGradient</code> modifiers.</p>

<h4>
<a id="pgfId-1019627"></a>Fields</h4>
<p><strong>
<a id="pgfId-1019628"></a><code>outLayer</code></strong></p>

<p class="webflare-indent1">
<a id="pgfId-1026130"></a><code>&#160;&#160;&#160;&#160;</code>Optional layer to hold the results of the check. The results are rectangles representing the windows, which meet the <span class="webflare-courier-new" style="white-space:pre"><em>range</em></span> and <span class="webflare-courier-new" style="white-space:pre"><em>selector</em></span> criteria. These rectangles are not merged, even if they overlap.</p>
<p class="webflare-indent1">
<a id="pgfId-1019629"></a> If you do not define <em>outLayer</em>, the tool writes the results of the check written directly to the layout cellview on the error <em>marker</em> layer.</p>

<p><strong>
<a id="pgfId-1019630"></a><code>measure</code></strong></p>

<p class="webflare-indent1">
<a id="pgfId-1026139"></a> Layer for which density is to be measured. It is a derived layer name or an original graphics layer name enclosed in quotes.</p>

<p><strong>
<a id="pgfId-1026144"></a><code>within</code></strong></p>

<p class="webflare-indent1">
<a id="pgfId-1026147"></a> An optional layer that defines the area to measure density within. It is a derived layer name or an original graphics layer name enclosed in quotes. If not given, the measure layer is used.</p>
<p class="webflare-indent1">
<a id="pgfId-1019632"></a> The tool uses the rectangle that bounds the shapes on this layer to define the position and extent of the windows within which density is measured. The density of a window is defined as the area of the <em>measure</em> layer shapes over a window divided by the area of the <em>within</em> layer shapes over the same window.</p>

<p><strong>
<a id="pgfId-1019633"></a><code>range</code> </strong></p>

<p class="webflare-indent1">
<a id="pgfId-1026156"></a>An optional lower limit, the keyword <code>coverage</code>, and an optional upper limit. The limit values may be integers, floating point numbers, or expressions. You must provide at least one limit. The <code>selector</code> modifier determines if a window that meets the <code>range</code> is output or not. The following operators may be used in the limits:</p>
<p class="webflare-indent1">
<a id="pgfId-1020844"></a><code> &lt;
&lt;=
&gt;
&gt;=
==</code></p>

<p><strong>
<a id="pgfId-1019646"></a><code>window</code></strong></p>

<p class="webflare-indent1">
<a id="pgfId-1026165"></a> Specifies the width and height of the windows within which density is measured. By default, the tool uses the width and the height of the <em>within</em> layer bounding box. When <code>window</code> is specified, the width is required. The height is optional and defaults to the width of the window.</p>
<p class="webflare-indent1">
<a id="pgfId-1019647"></a><code> windowSize(10)</code></p>
<p class="webflare-indent1">
<a id="pgfId-1021656"></a><code> windowSize(10 5)</code></p>

<p><strong>
<a id="pgfId-1019648"></a><code>step</code> </strong></p>

<p class="webflare-indent1">
<a id="pgfId-1026174"></a>Horizontal and vertical stepping of the windows within which density is measured. By default, the tool uses the width and the height of <code>window</code>. When you specify <code>step</code>, the horizontal step distance is required. The vertical step distance is optional and defaults to the horizontal value.</p>
<p class="webflare-indent1">
<a id="pgfId-1019650"></a><code> stepSize(2.5)</code></p>
<p class="webflare-indent1">
<a id="pgfId-1021655"></a><code> stepSize(2.5 1)</code></p>
<p class="webflare-indent1">
<a id="pgfId-1020781"></a> The stepping distances must evenly divide into the size of the window.</p>

<p><strong>
<a id="pgfId-1019651"></a><code>selector</code> </strong></p>

<p class="webflare-indent1">
<a id="pgfId-1026183"></a>Controls the disposition of a window that meets the range criteria. The<em> </em><code>keep</code> keyword causes windows that meet the range criteria to be output; the <code>ignore</code> keyword causes windows that do not meet the range criteria to be output. The default is <em>keep</em>.</p>

<p><strong>
<a id="pgfId-1026188"></a><code>message</code></strong></p>

<p class="webflare-indent1">
<a id="pgfId-1026191"></a> Text string, enclosed in quotation marks, that annotates error shapes that are written on the<em> error marker</em> layer with a <code>drcWhy</code> property.</p>
<p class="webflare-indent1">
<a id="pgfId-1019653"></a> The tool attaches two additional properties to the error shapes. The <code>layer</code> property contains the name of the <em>measure</em> layer. The <code>coverage</code> property contains the density value of the window the marker originates from.</p>
<p class="webflare-indent1">
<a id="pgfId-1021662"></a> The special string &lt;PERCENT&gt; may be included in the message string. The first occurance of this string in the message will be replaced with the measured density.</p>

<p><strong>
<a id="pgfId-1024918"></a><code>limit</code></strong></p>

<p class="webflare-indent1">
<a id="pgfId-1026204"></a> Optional modifier <em>errorLimit</em> allows the specification of a limit to the number of error markers which the check will produce. The keyword <em>abort</em> can be used to cause early termination of the entire run if the limit is reached. See <a href="chap7.html#54053">errorLimit</a> in the drc command for details.</p>

<p><strong>
<a id="pgfId-1026209"></a><code>mode</code></strong></p>

<p class="webflare-indent1">
<a id="pgfId-1026212"></a> Optional modifier controlling how the measurement is done. Provided for compatibility with Assura rule syntax. The <em>perWindow</em> mode is supported by the measurement engine and the <em>perTrapazoid</em> mode is not. The default is <em>perWindow</em> unless a <a href="chap5.html#56694">layerDefs</a> command has been seen, in which case <em>perTrapazoid</em> is the default.</p>

<p><strong>
<a id="pgfId-1026217"></a><code>keepMorePrecision</code></strong></p>

<p class="webflare-indent1">
<a id="pgfId-1026220"></a> Optional modifier provided by Assura rule deck compatibility, which is quietly ignored by Diva.</p>

<p><strong>
<a id="pgfId-1026225"></a><code>gradient</code></strong></p>

<p class="webflare-indent1">
<a id="pgfId-1026228"></a> An optional modifier to add a gradient limit to the check. The form is an optional lower limit, the keyword <code>gradient</code>, and an optional upper limit. The limit values may be integers, floating point numbers, or expressions. You must provide at least one limit. The same operators available in the <code>range</code> may be used. May not be used with the <code>normalizedGradient</code> modifier. Both the <code>range</code> and the <code>gradient</code> must be met or the window will not be output.</p>
<p class="webflare-indent1">
<a id="pgfId-1025008"></a> The gradient value is calculated by examining the density value of the eight adjacent windows to find the largest absolute difference in density compared to the window being tested. Adjacent windows which have no measurement, or do not exist due to the window being tested being on the edge of the window array, are considered to have the same density as the window being tested.</p>

<p><strong>
<a id="pgfId-1024978"></a><code>normalizedGradient</code></strong></p>

<p class="webflare-indent1">
<a id="pgfId-1026238"></a> An optional modifier to add a normalized gradient limit to the check. The form is an optional lower limit, the keyword <code>normalizedGradient</code>, and an optional upper limit. The limit values may be integers, floating point numbers, or expressions. You must provide at least one limit. The same operators available in the <code>range</code> may be used. May not be used with the <code>gradient</code> modifier. Both the <code>range</code> and the <code>normalizedGradient</code> must be met or the window will not be output.</p>
<p class="webflare-indent1">
<a id="pgfId-1024997"></a> The normalized gradient value is calculated by examining the density value of the eight adjacent windows to find the largest normalized difference in density compared to the window being tested. The normalized difference is found by dividing the absolute value of the difference by the maximum of the two window density values. Adjacent windows which have no measurement, or do not exist due to the window being tested being on the edge of the window array, are considered to have the same density as the window being tested.</p>

<h4>
<a id="pgfId-1019657"></a>Examples</h4>

<p>
<a id="pgfId-1019658"></a>This example uses two rules to detect windows that have density outside the allowable range of the process.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1019659"></a>drc( m1 coverage &lt; 0.2 keep windowSize(10) stepSize(2)
&#160;&#160;&#160;&#160;&quot;density of &lt;PERCENT&gt;% is below lower limit of 20%&quot; )
drc( m1 coverage &gt; 0.8 keep windowSize(10) stepSize(2)
&#160;&#160;&#160;&#160;&quot;density of &lt;PERCENT&gt;% is above upper limit of 80%&quot; )</pre>

<p>
<a id="pgfId-1025025"></a>This example uses a single rule to detect the same windows as the two rules above.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1025174"></a>drc( m1 0.2 &lt;= coverage &lt;= 0.8 ignore windowSize(10) stepSize(2)
&#160;&#160;&#160;&#160;&quot;density of &lt;PERCENT&gt;% is outside allowed range of 20% to 80%&quot; )</pre>

<p>
<a id="pgfId-1025170"></a>This example shows the use of the gradient and normalizedGradient modifiers. Note the use of the coverage verb despite only being concerned with the gradient value in the first rule.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1025044"></a>drc( m1 coverage &gt;= 0.0 windowSize(10) gradient &gt; 0.1
&#160;&#160;&#160;&#160;&quot;density gradient is greater than the allowed value of 10%&quot; )</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1025048"></a>drc( m1 0.3 &lt;= coverage &lt;= 0.8 ignore windowSize(10) normalizedGradient &gt; 0.1
&#160;&#160;&#160;&#160;&quot;density or normalized gradient outside specification&quot; )</pre>
<h3>
<a id="pgfId-1021516"></a><a id="85775"></a>geom<a id="geomGetCoverage"></a>Get<a id="marker-1023236"></a>Coverage</h3>
<a id="pgfId-1021517"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
[outLayer] = geomGetCoverage( inlayer limit [squareSize] [message] [errlimit] [gradient|normalizedGradient] )</pre>
<h4>
<a id="pgfId-1021518"></a>Description</h4>

<p>
<a id="pgfId-1021519"></a>The <em>geomGetCoverage </em>command applies a filter to the results of a <em>drc(coverage)</em> command.</p>

<h4>
<a id="pgfId-1021520"></a>Fields</h4>
<p><strong>
<a id="pgfId-1021521"></a><code>outLayer</code></strong></p>

<p class="webflare-indent1">
<a id="pgfId-1026248"></a><code>&#160;&#160;&#160;&#160;</code>Optional layer to hold the results of the filtering. The results are rectangles representing the windows, which meet the <span class="webflare-courier-new" style="white-space:pre"><em>limit</em></span> criteria. These rectangles are not merged, even if they overlap.</p>
<p class="webflare-indent1">
<a id="pgfId-1021522"></a> If you do not define <em>outLayer</em>, the tool writes the results of the check written directly to the layout cellview on the error <em>marker</em> layer.</p>

<p><strong>
<a id="pgfId-1021526"></a><code>limit</code></strong></p>

<p class="webflare-indent1">
<a id="pgfId-1026257"></a> An optional lower limit, the keyword <em>keep</em> or <em>ignore</em>, and an optional upper limit. The limit values may be integers, floating point numbers, or expressions. You must provide at least one of the limits. The following operators may be used:</p>
<p class="webflare-indent1">
<a id="pgfId-1021527"></a><code> &lt;
&lt;=
&gt;
&gt;=
==</code></p>

<p><strong>
<a id="pgfId-1021598"></a><code>squareSize</code></strong></p>

<p class="webflare-indent1">
<a id="pgfId-1026266"></a> An optional keyword to define the size of the rectangle centered on any window which satisfies the limit. Without this keyword, the rectangle produced will be defined by the windowSize option of the drc(coverage) command. Use the following format:</p>
<p class="webflare-indent1">
<a id="pgfId-1021609"></a> squareSize = value</p>

<p><strong>
<a id="pgfId-1021534"></a><code>message</code></strong></p>

<p class="webflare-indent1">
<a id="pgfId-1026275"></a> Text string, enclosed in quotation marks, that annotates error shapes that are written on the<em> error marker</em> layer with a <code>drcWhy</code> property.</p>
<p class="webflare-indent1">
<a id="pgfId-1021535"></a> The tool attaches two additional properties to the error shapes. The <code>layer</code> property contains the name of the <em>measure</em> layer from the drc(coverage) rule. The <code>coverage</code> property contains the density value of the window the marker originates from.</p>

<p><strong>
<a id="pgfId-1024930"></a><code>errlimit</code></strong></p>

<p class="webflare-indent1">
<a id="pgfId-1026284"></a> Optional modifer <em>errorLimit</em> allows the specification of a limit to the number of error markers which the check will produce. The keyword <em>abort</em> can be used to cause early termination of the entire run if the limit is reached. See <a href="chap7.html#54053">errorLimit</a> in the drc command for details.</p>

<p><strong>
<a id="pgfId-1026289"></a><code>gradient</code></strong></p>

<p class="webflare-indent1">
<a id="pgfId-1026292"></a> An optional modifier to add a gradient limit to the check. The form is an optional lower limit, the keyword <code>gradient</code>, and an optional upper limit. The limit values may be integers, floating point numbers, or expressions. You must provide at least one limit. The same operators available in the <code>range</code> may be used. May not be used with the <code>normalizedGradient</code> modifier. Both the <code>limit</code> and the <code>gradient</code> must be met or the window will not be output.</p>
<p class="webflare-indent1">
<a id="pgfId-1025061"></a> The gradient value is calculated by examining the density value of the eight adjacent windows to find the largest absolute difference in density compared to the window being tested. Adjacent windows which have no measurement, or do not exist due to the window being tested being on the edge of the window array, are considered to have the same density as the window being tested.</p>

<p><strong>
<a id="pgfId-1025062"></a><code>normalizedGradient</code></strong></p>

<p class="webflare-indent1">
<a id="pgfId-1026301"></a> An optional modifier to add a normalized gradient limit to the check. The form is an optional lower limit, the keyword <code>normalizedGradient</code>, and an optional upper limit. The limit values may be integers, floating point numbers, or expressions. You must provide at least one limit. The same operators available in the <code>range</code> may be used. May not be used with the <code>gradient</code> modifier. Both the <code>limit</code> and the <code>normalizedGradient</code> must be met or the window will not be output.</p>
<p class="webflare-indent1">
<a id="pgfId-1025063"></a> The normalized gradient value is calculated by examining the density value of the eight adjacent windows to find the largest normalized difference in density compared to the window being tested. The normalized difference is found by dividing the absolute value of the difference by the maximum of the two window density values. Adjacent windows which have no measurement, or do not exist due to the window being tested being on the edge of the window array, are considered to have the same density as the window being tested.</p>

<h4>
<a id="pgfId-1021536"></a>Examples</h4>

<p>
<a id="pgfId-1021633"></a>This example produces two different ranges of density:</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1021634"></a>a = drc( m1 coverage &lt;= 1 windowSize(10) stepSize(2))<br />geomGetCoverage(a keep &lt; 0.2 &quot;density too low&quot;)<br />geomGetCoverage(a ignore &lt; 0.8 &quot;density too high&quot;)</pre>

<p>
<a id="pgfId-1025083"></a>This example produces two disjoint ranges of density:</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1025084"></a>a = drc( m1 0.2 &lt; coverage &lt; 0.8 windowSize(10) stepSize(2))<br />oddity = geomGetCoverage(a 0.3 &lt; ignore &lt; 0.7)</pre>

<p>
<a id="pgfId-1025089"></a>This example reports windows outside a density range or with excessive gradient:</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1025090"></a>a = drc( m1 coverage &gt;= 0 ignore windowSize(10) )<br />geomGetCoverage(a 0.2 &lt;= ignore &lt;= 0.8 &quot;densstiy outside allowed range&quot; )<br />geomGetCoverage(a 0.2 &lt;= keep &lt;= 0.9 gradient &gt; 0.1 &quot;density gradient too high&quot; )</pre>
<h3>
<a id="pgfId-1022805"></a><a id="91916"></a>drcDense<a id="drcDenseLineEnd"></a>Line<a id="marker-1023208"></a>End</h3>
<a id="pgfId-1022806"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
[outLayer] = drcDenseLineEnd( inlayer sep endLength legLength [endExt] [legExt] [edge] [message] )</pre>
<h4>
<a id="pgfId-1022807"></a>Description</h4>

<p>
<a id="pgfId-1022808"></a>The <em>drcDenseLineEnd </em>command performs a complex separation check intended for finding line ends which cannot be corrected during OPC processing.</p>
<p>
<a id="pgfId-1023340"></a>Using the inlayer andendLength parameters, qualifying line end edges are found. The line end edges are extended by the endExt value and the sep check performed. Line end edges which fail the check are used to collect the associated legs. Associated legs shorter than legLength are ignored. These legs are truncated to the legLength value and the end in common with the line end edge is extended by the legExt value and the sep check performed. Any line end which fails both the line end spacing check and the leg spacing check are considered to have failed the check.</p>
<p>
<a id="pgfId-1023479"></a>Serial and net numbers are preserved when writing to <code>outLayer</code> with the <code>edge</code> option.</p>

<h4>
<a id="pgfId-1022809"></a>Fields</h4>
<p><strong>
<a id="pgfId-1022810"></a><code>outLayer</code></strong></p>

<p class="webflare-indent1">
<a id="pgfId-1026311"></a><code>&#160;&#160;&#160;&#160;</code>If defined, the results of the check are written to this layer. Without this layer, the results are written to the <em>error marker</em> layer.</p>

<p><strong>
<a id="pgfId-1026316"></a><code>sep</code></strong></p>

<p class="webflare-indent1">
<a id="pgfId-1026319"></a> The check to be performed, consisting of the keyword <code>sep</code> and a dimensional limit specification. The check has one of these two syntax forms:</p>

<p>
<a id="pgfId-1023373"></a></p>
<table class="webflareTable" id="#id1023368">
<tbody><tr>
<td class="webflareTd" colspan="1" rowspan="1">
<blockquote id="#id1023370">
<a id="pgfId-1023370"></a>sep operator upper_limit</blockquote>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<blockquote id="#id1023383">
<a id="pgfId-1023383"></a>lower_limit operator sep operator upper_limit</blockquote>
</td>
</tr>
</tbody></table>

<p class="webflare-indent1">
<a id="pgfId-1023363"></a> The lower and upper dimensional limits can be integers, floating point numbers, or expressions. The upper limit is required; the lower limit is optional. Both limits are defined in user units (for example, microns).</p>
<p class="webflare-indent1">
<a id="pgfId-1023399"></a> You can use the following operators with the <code>sep</code> keyword:</p>

<p>
<a id="pgfId-1023407"></a></p>
<table class="webflareTable" id="#id1023305">
<tbody><tr>
<td class="webflareTd" colspan="1" rowspan="1">
<blockquote id="#id1023307">
<a id="pgfId-1023307"></a>&lt;</blockquote>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<blockquote id="#id1023309">
<a id="pgfId-1023309"></a>&lt;=</blockquote>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<blockquote id="#id1023324">
<a id="pgfId-1023324"></a>==</blockquote>
</td>
</tr>
</tbody></table>

<p class="webflare-indent1">
<a id="pgfId-1023411"></a> The following examples illustrate the check syntax:</p>

<p>
<a id="pgfId-1023417"></a></p>
<table class="webflareTable" id="#id1023412">
<tbody><tr>
<td class="webflareTd" colspan="1" rowspan="1">
<blockquote id="#id1023414">
<a id="pgfId-1023414"></a><code>sep &lt; 5</code></blockquote>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<blockquote id="#id1023416">
<a id="pgfId-1023416"></a><code>1 &lt; sep &lt; 3.5</code></blockquote>
</td>
</tr>
</tbody></table>
<p><strong>
<a id="pgfId-1022977"></a><code>endLength</code></strong></p>

<p class="webflare-indent1">
<a id="pgfId-1026334"></a> A required parameter to define the length which an edge must have to be considered a line end. An optional lower limit may be given in addition to the required upper limit. If the lower limit is not given, the default of zero is used. The limits are inclusive. The <em>endLength</em> parameter has two forms:</p>

<p>
<a id="pgfId-1022983"></a></p>
<table class="webflareTable" id="#id1022978">
<tbody><tr>
<td class="webflareTd" colspan="1" rowspan="1">
<blockquote id="#id1022980">
<a id="pgfId-1022980"></a>endLength(upper_limit)</blockquote>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<blockquote id="#id1022982">
<a id="pgfId-1022982"></a>endLength(lower_limit upper_limit)</blockquote>
</td>
</tr>
</tbody></table>
<p><strong>
<a id="pgfId-1023002"></a><code>legLength</code></strong></p>

<p class="webflare-indent1">
<a id="pgfId-1026341"></a> A required parameter to define the minimum length which an edge must have to be considered an interesting leg of a line end. The <em>legLength</em> parameter has the form:</p>

<p>
<a id="pgfId-1023006"></a></p>
<table class="webflareTable" id="#id1023003">
<tbody><tr>
<td class="webflareTd" colspan="1" rowspan="1">
<blockquote id="#id1023005">
<a id="pgfId-1023005"></a>legLength(lower_limit)</blockquote>
</td>
</tr>
</tbody></table>
<p><strong>
<a id="pgfId-1023010"></a><code>endExt</code></strong></p>

<p class="webflare-indent1">
<a id="pgfId-1026359"></a> An optional parameter to define the value by which a line end edge is extended for the separation check. If not given, the default value of zero is used. The <em>endExt</em> parameter has the form:</p>

<p>
<a id="pgfId-1023014"></a></p>
<table class="webflareTable" id="#id1023011">
<tbody><tr>
<td class="webflareTd" colspan="1" rowspan="1">
<blockquote id="#id1023013">
<a id="pgfId-1023013"></a>endExt(value)</blockquote>
</td>
</tr>
</tbody></table>
<p><strong>
<a id="pgfId-1023030"></a><code>legExt</code></strong></p>

<p class="webflare-indent1">
<a id="pgfId-1026365"></a> An optional parameter to define the value by which a line end leg edge is extended for the separation check. If not given, the default value of zero is used. The <em>legExt</em> parameter has the form:</p>

<p>
<a id="pgfId-1023034"></a></p>
<table class="webflareTable" id="#id1023031">
<tbody><tr>
<td class="webflareTd" colspan="1" rowspan="1">
<blockquote id="#id1023033">
<a id="pgfId-1023033"></a>legExt(value)</blockquote>
</td>
</tr>
</tbody></table>
<p><strong>
<a id="pgfId-1024385"></a><code>edge</code></strong></p>

<p class="webflare-indent1">
<a id="pgfId-1026371"></a> Optional keyword to select the output format. Without this option, the output is a rectangle formed by applying the <em>endExt</em> value to the line end edge and growing the edge by the upper limit of the <em>sep</em> range. With this option, the line end edges that fail the check are the output.</p>

<p><strong>
<a id="pgfId-1026379"></a><code>message</code></strong></p>

<p class="webflare-indent1">
<a id="pgfId-1026382"></a> A text string, enclosed in quotation marks, that annotates error shapes that are written on the<em> error marker</em> layer with a <code>drcWhy</code> property.</p>

<h4>
<a id="pgfId-1022818"></a>Examples</h4>

<p>
<a id="pgfId-1022819"></a>An example that creates markers in the cellview:</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1022820"></a>drcDenseLineEnd(m1 sep &lt; 0.2 endLength(0.18) legLength(0.19) endExt(0.05)
&#160;&#160;&#160;&#160;legExt(0.05) &quot;line end not correctable by OPC&quot;)</pre>

<p>
<a id="pgfId-1023056"></a>An example that outputs the same line ends for further processing:</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1023057"></a>ends = drcDenseLineEnd(m1 sep &lt;= 0.2 endLength(0.18) legLength(0.19) endExt(0.05)
&#160;&#160;&#160;&#160;legExt(0.05))</pre>

<p>
<a id="pgfId-1022823"></a>This example works for old and new releases by testing for the availability of the new command and uses previously existing rules when it is not available:</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1023074"></a>m1DLEsep = 0.20
m1DLEend = 0.18
m1DLEleg = 0.19
m1DLEexe = 0.05
m1DLEexl = 0.05
if( boundp(&#8217;drcDenseLineEnd)
then
&#160;&#160;&#160;&#160;drcDenseLineEnd(m1 sep &lt; m1DLEsep endLength(m1DLEend) legLength(m1DLEleg
&#160;&#160;&#160;&#160; endExt(m1DLEexe) legExt(m1DLEexl) &quot;line end not correctable by OPC&quot;)<br />else
&#160;&#160;&#160;&#160;; run 3X longer, or worse if there are many errors
&#160;&#160;&#160;&#160;le = geomLineEnd(m1 m1DLEend)
&#160;&#160;&#160;&#160;ele = geomStretch(le m1DLEexe)
&#160;&#160;&#160;&#160;fele = drc(ele m1 sep &lt; m1DLEsep oppositeA wholeEdgea)
&#160;&#160;&#160;&#160;a = geomStretch(fele 0.005 - m1DLEexe)
&#160;&#160;&#160;&#160;fleb = geomSize(a -m1DLEleg)
&#160;&#160;&#160;&#160;legs1 = geomGetEdge(m1 inside fleb)
&#160;&#160;&#160;&#160;legs = geomGetLength(legs1 length &gt;= m1DLEleg)
&#160;&#160;&#160;&#160;legs2 = geomGetEdge(geomStretch(legs m1DLEexl) inside
&#160;&#160;&#160;&#160; geomOr(geomSize(a m1DLEexl) fleb))<br /> flegs = drc(legs2 m1 sep &lt; m1DLEsep oppositeA wholeEdgea)<br /> lerr = geomGetAdjacentEdge(le geomAnd(legs flegs))<br /> saveDerived(geomSize(geomStretch(lerr m1DLEexe) m1DLEsep) raw<br />  &quot;line end not correctable by OPC&quot;)<br />)</pre>
<h3>
<a id="pgfId-1020789"></a><a id="51002"></a>drc<a id="drc"></a></h3>
<a id="pgfId-1020797"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
[outLayer] = drc( inLayer1 [inLayer2] check [modifiers] )</pre>
<h4>
<a id="pgfId-1020804"></a>Description</h4>

<p>
<a id="pgfId-1020806"></a>The <em>drc</em> command is used for Design Rule Checking (DRC). The complete range of design rule checking is accomplished by the <em>drc</em> command with different modifiers, qualifiers, and keywords.</p>

<h4>
<a id="pgfId-1019184"></a>Fields</h4>
<p><strong>
<a id="pgfId-1019185"></a><code>outLayer</code></strong></p>

<p class="webflare-indent1">
<a id="pgfId-1026389"></a> If defined, the results of the check are written to this layer. Without this layer, the results are written to the <em>error marker</em> layer. The format of the output is controlled by optional output modifiers.</p>

<p><strong>
<a id="pgfId-1026394"></a><code>inLayer1</code></strong></p>

<p class="webflare-indent1">
<a id="pgfId-1026397"></a> The first or only layer to be processed. It is a derived layer name or an original graphics layer name enclosed in quotes. When this layer is used with a second layer, the order of the layers can be important. The <em>enc</em> check and the various output modifiers give different results if the first and second layers are reversed.</p>

<p><strong>
<a id="pgfId-1026402"></a><code>inLayer2</code></strong></p>

<p class="webflare-indent1">
<a id="pgfId-1026405"></a> The optional second layer to be processed. It is a derived layer name or an original graphics layer name. This layer is only required for those checks performed between two layers.</p>

<p><strong>
<a id="pgfId-1026410"></a><code>check</code></strong></p>

<p class="webflare-indent1">
<a id="pgfId-1026413"></a> The check to be performed, consisting of a check keyword and a dimensional limit specification. The check has one of these three syntax forms:</p>

<p>
<a id="pgfId-1019197"></a></p>
<table class="webflareTable" id="#id1019190">
<tbody><tr>
<td class="webflareTd" colspan="1" rowspan="1">

<ul><li>
<a id="pgfId-1019192"></a>lower_limit operator check_keyword operator upper_limit</li></ul>

</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">

<ul><li>
<a id="pgfId-1019194"></a>check_keyword operator upper_limit</li></ul>

</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">

<ul><li>
<a id="pgfId-1019196"></a>check_keyword operator lower_limit</li></ul>

</td>
</tr>
</tbody></table>

<p class="webflare-indent1">
<a id="pgfId-1019198"></a> The lower and upper dimensional limits can be integers, floating point numbers, or expressions. The upper limit is required for all checks except <em>area</em>; the lower limit is optional. Both limits are defined in user units (for example, microns).</p>
<p class="webflare-indent1">
<a id="pgfId-1019200"></a> You can use the following <a id="marker-1019199"></a>check keywords:</p>
<p class="webflare-indent1">
<a id="pgfId-1019201"></a><code> width
notch
area
sep
sepNotch
enc
ovlp</code></p>
<p class="webflare-indent1">
<a id="pgfId-1019202"></a> You can use the following operators with the keywords:</p>
<p class="webflare-indent1">
<a id="pgfId-1019203"></a><code> &lt;
&lt;=
&gt;
&gt;=
==</code></p>
<p class="webflare-indent1">
<a id="pgfId-1019204"></a> The following examples illustrate <em>drc</em> check syntax:</p>
<p class="webflare-indent1">
<a id="pgfId-1019205"></a><code> sep &lt; 5
1 &lt; enc &lt; 3.5
area &gt; 16</code></p>

<p><strong>
<a id="pgfId-1019206"></a><code>modifiers</code></strong></p>

<p class="webflare-indent1">
<a id="pgfId-1026425"></a> Modifiers are used to restrict the scope of a check or modify the output information. There are four different types of modifiers: check, output, alignment and registration, and other. </p>
<p class="webflare-indent1">
<a id="pgfId-1019207"></a> The different modifiers are listed here by type.</p>

<p>
<a id="pgfId-1019307"></a></p>
<table class="webflareTable webflareTableIndent" id="#id1019208">
<tbody><tr>
<th class="webflareTh" colspan="1" rowspan="1">
<span class="tbl-head" id="#id1019211">
<a id="pgfId-1019211"></a><a id="marker-1019210"></a>Check modifiers</span>
</th>
<th class="webflareTh" colspan="1" rowspan="1">
<span class="tbl-head" id="#id1019214">
<a id="pgfId-1019214"></a><a id="marker-1019213"></a>Output modifiers</span>
</th>
<th class="webflareTh" colspan="1" rowspan="1">
<span class="tbl-head" id="#id1019216">
<a id="pgfId-1019216"></a>Alignment and registration modifiers</span>
</th>
<th class="webflareTh" colspan="1" rowspan="1">
<span class="tbl-head" id="#id1019218">
<a id="pgfId-1019218"></a>Other modifiers</span>
</th>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1019220"></a>with_perp</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1019222"></a>fig</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1019224"></a>normalGrow</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1019226"></a>raw</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1019228"></a>only_perp</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1019230"></a>figa</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1019232"></a>squareGrow</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1019234"></a>message</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1019236"></a>parallel</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1019238"></a>figb</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1019240"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1019242"></a></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1019244"></a>notParallel</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1019246"></a>edge</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1019248"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1019250"></a></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1019252"></a>sameNet</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1019254"></a>edgea</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1019256"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1019258"></a></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1019260"></a>diffNet</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1019262"></a>edgeb</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1019264"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1019266"></a></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1019268"></a>app</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1019270"></a>wholeEdge</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1019272"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1019274"></a></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1019276"></a>opposite</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1019278"></a>wholeEdgea</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1019280"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1019282"></a></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1019284"></a>length</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1019286"></a>wholeEdgeb</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1019288"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1019290"></a></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1019292"></a>lengtha</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1019294"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1019296"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1019298"></a></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1019300"></a>lengthb</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1019302"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1019304"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1019306"></a></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1024475"></a>cornerToCorner</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1024477"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1024479"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1024481"></a></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1024467"></a>cornerToEdge</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1024469"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1024471"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1024473"></a></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1024459"></a>cornerToEdgeA</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1024461"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1024463"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1024465"></a></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1024451"></a>cornerToEdgeb</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1024453"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1024455"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1024457"></a></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1024443"></a>corner</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1024445"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1024447"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1024449"></a></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1024435"></a>cornerA</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1024437"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1024439"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1024441"></a></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1024427"></a>cornerB</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1024429"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1024431"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1024433"></a></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1024419"></a>notCorner</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1024421"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1024423"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1024425"></a></p>
</td>
</tr>
</tbody></table>

<p>
<a id="pgfId-1019308"></a>You can use any number of modifiers in a check providing they are not mutually exclusive, such as <em>sameNet</em> and <em>diffNet</em>.</p>

<h4>
<a id="pgfId-1019309"></a>Examples</h4>

<p>
<a id="pgfId-1019310"></a>The following examples illustrate some of the possible combinations of the drc command. </p>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1019311"></a>drc( &quot;metal&quot; width &lt; 3 )<br />drc( diffn sep &lt; 2 )<br />drc( &quot;poly&quot; pcut enc &lt; 1.3 )</pre>
<p>
<a id="pgfId-1019314"></a>You can use any number of non-exclusive modifiers in a drc command.</p>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1019315"></a>drc( gate cut 1 &lt;= sep &lt; 2.1 opposite parallel edgea )<br />drc( area cut &gt; 16 )</pre>
<p>
<a id="pgfId-1019318"></a><a id="marker-1019317"></a>You can find values from properties listed in the technology file.</p>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1019319"></a>cvId = ivGetCellView()<br />techId = techGetTechFile(cvId)<br />drc( &quot;poly&quot; width &lt; <br />      techGetLayerProp( techId list( &quot;poly&quot; &quot;drawing&quot;) &quot;minWidth&quot; )<br />)</pre>

<h2>
<a id="pgfId-1015081"></a>Checks<a id="Functions"></a></h2>

<p>
<a id="pgfId-1015082"></a>Used with the <em>drc</em> command, DRC checks let you evaluate geometric relationships in a layout. The following checks are available:</p>
<ul><li>
<a id="pgfId-1020919"></a><a href="chap7.html#57558">area</a></li><li>
<a id="pgfId-1020920"></a><a href="chap7.html#57591">enc</a></li><li>
<a id="pgfId-1020921"></a><a href="chap7.html#74647">notch</a></li><li>
<a id="pgfId-1020922"></a><a href="chap7.html#29668">ovlp</a></li><li>
<a id="pgfId-1020923"></a><a href="chap7.html#47812">sep</a></li><li>
<a id="pgfId-1021231"></a><a href="chap7.html#87624">sepNotch</a></li><li>
<a id="pgfId-1020924"></a><a href="chap7.html#31486">width</a></li></ul>






<p>
<a id="pgfId-1020930"></a>While coverage is a check of the drc command, it invokes a separate syntax and is discussed as the drc(coverage) command earlier in this chapter.</p>

<h3>
<a id="pgfId-1015085"></a><a id="57558"></a>ar<a id="marker-1024312"></a>ea<a id="area"></a></h3>
<h4>
<a id="pgfId-1015086"></a>Description</h4>

<p>
<a id="pgfId-1015087"></a>The <em>area </em>check measures the area of individual shapes on a single layer.</p>
<p>
<a id="pgfId-1015088"></a>Specifying upper and lower dimensional limits are optional. The dimensions you specify are in user units.</p>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1015090"></a>area &lt; 16</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1015091"></a>4 &lt; area &lt; 16</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1015092"></a>area &gt; 16</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1015093"></a>area == 16 </pre>
<p>
<a id="pgfId-1015094"></a>You can use the <em>raw</em> modifier to keep the shapes on the input layer separate. Any resultant error shapes are merged on the output layer.</p>
<p>
<a id="pgfId-1021435"></a>Be careful when you specify limits that define an exact area. During calculations in floating point, systems cannot represent numbers exactly. Values such as 30 might be represented as 29.99999. Such values are compared with the limit, in this example 30, and are found to be different.</p>
<p>
<a id="pgfId-1021436"></a>The <em>area</em> check might not give meaningful results in hierarchical, incremental, or by-area modes. These modes select shapes within a defined boundary, and might not select entire shapes if the shapes are made up of abutting or overlapping parts. Parts of the shape outside the defined boundary might not be selected.</p>

<h4>
<a id="pgfId-1015097"></a>Examples</h4>

<p>
<a id="pgfId-1015098"></a>The following example flags all <em>cut</em> shapes whose area is less than 12.</p>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1015099"></a>drc( cut area &lt; 12 )</pre>
<p>
<a id="pgfId-1015100"></a>The following example flags all shapes of <em>bcw</em> whose area falls into the specified range (greater than 3 but less than or equal to 16).</p>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1015101"></a>drc( bcw 3 &lt; area &lt;= 16 )</pre>
<p>
<a id="pgfId-1015102"></a>The following example flags all <em>gate</em> shapes having an area greater than 16.</p>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1015103"></a>drc( gate area &gt; 16 )</pre>

<h3>
<a id="pgfId-1015107"></a><a id="57591"></a>e<a id="marker-1024325"></a>nc<a id="enc"></a></h3>
<h4>
<a id="pgfId-1015108"></a>Description</h4>

<p>
<a id="pgfId-1015111"></a>The <em>enc </em>check measures the enclosure of shapes on the second layer by shapes on the first layer. The enclosure measurement is the distance between inside facing edges of shapes on the first layer to outside facing edges of shapes on the second layer. <a id="marker-1015110"></a></p>
<p>
<a id="pgfId-1015113"></a><a id="marker-1015112"></a>The order of the input layers is important. The program verifies the second layer as enclosed by the first layer. Each shape on one layer is checked against every <a id="marker-1015114"></a>shape on the other layer.</p>
<p>
<a id="pgfId-1015115"></a>You must specify an upper dimensional limit. The dimensions you specify are in user units. You can specify a lower dimensional limit, but it is not required.</p>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1015116"></a>enc &lt; 4</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1015117"></a>0 &lt; enc &lt; 4.2</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1015118"></a>3 &lt;= enc &lt;= 4</pre>
<p>
<a id="pgfId-1015119"></a>The following figure illustrates the meaning of <em>enc</em> in various configurations. The arrows indicate the edge pairs that you can check.</p>

<p>
<a id="pgfId-1016671"></a></p>
<div class="webflare-div-image">
<img width="577" height="193" src="images/chap7-20.gif" /></div>

<p>
<a id="pgfId-1015170"></a>The program checks whether the edges are enclosed, not the shapes. The check does not guarantee that one layer is completely inside another. See <a href="chap7.html#71150">How DRC Performs Checks</a> for more information.</p>

<h4>
<a id="pgfId-1015171"></a>Examples</h4>

<p>
<a id="pgfId-1015172"></a>The following example flags areas of <em>metal</em> that enclose <em>via</em> less than 2.</p>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1015173"></a>drc( &quot;metal&quot; &quot;via&quot; enc &lt; 2 )</pre>
<p>
<a id="pgfId-1015174"></a>The following example flags all <em>poly</em> edges that face an enclosure of <em>bcw</em> of less than 1.5. The resulting <em>poly</em> edge is the same length as the facing <em>bcw</em> edge.</p>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1015175"></a>drc( &quot;poly&quot; bcw enc &lt; 1.5 opposite edgea )</pre>
<p>
<a id="pgfId-1015176"></a>The following example flags all <em>gate</em> edges that face inside edges of <em>implant e</em>nclosing a gate. The range specified flags distances of greater than 1 to less than 3 only where the edges are parallel.</p>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1015177"></a>drc( implant gate 1 &lt; enc &lt; 3 opposite parallel edgeb )</pre>

<h3>
<a id="pgfId-1015180"></a><a id="74647"></a>no<a id="marker-1024332"></a>tch<a id="notch"></a></h3>
<h4>
<a id="pgfId-1015181"></a>Description</h4>

<p>
<a id="pgfId-1015183"></a>The<em> notch </em>check checks the separation of edges forming notches on individual shapes on a single layer. A <em>notch</em> is the distance between outside facing edges of the same shape.</p>
<p>
<a id="pgfId-1015184"></a>You must specify an upper dimensional limit. The dimensions you specify are in user units. You can specify a lower dimensional limit, but it is not required.</p>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1015186"></a>notch &lt; 3</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1015187"></a>1 &lt; notch &lt;= 3</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1015188"></a>drc( metal 0 &lt; notch &lt; 3 )</pre>
<p>
<a id="pgfId-1015189"></a>The following figure illustrates the meaning of <em>notch </em>in various configurations. The arrows indicate the edge pairs that are checked.</p>

<p>
<a id="pgfId-1016672"></a></p>
<div class="webflare-div-image">
<img width="536" height="190" src="images/chap7-21.gif" /></div>

<p>
<a id="pgfId-1015202"></a>Adjacent edge checking is described in the description of the <em>drc</em> command.</p>

<h4>
<a id="pgfId-1015203"></a>Examples</h4>

<p>
<a id="pgfId-1015204"></a>The following example flags all notches of <em>metal</em> whose dimensions are less than 3.</p>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1015205"></a>drc( metal notch &lt; 3 )</pre>
<p>
<a id="pgfId-1015206"></a>The following example flags all notches of<em> poly</em> that fall in the range specified (greater than 0 but less than or equal to 4.5).</p>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1015207"></a>drc( poly 0 &lt; notch &lt;= 4.5 )</pre>
<p>
<a id="pgfId-1015208"></a>The following example outputs all shapes that have notches less than 1.3 user units.</p>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1015209"></a>drc( cut notch &lt; 1.3 fig )</pre>

<h3>
<a id="pgfId-1015212"></a><a id="29668"></a>o<a id="marker-1024339"></a>vlp<a id="ovlp"></a></h3>
<h4>
<a id="pgfId-1015213"></a>Description</h4>

<p>
<a id="pgfId-1015216"></a>The <em>ovlp</em> check measures the overlap of shapes on one layer by shapes on the other layer. Overlap is the distance between an inside facing edge of a shape on one layer to an inside facing edge of a shape on the other layer. </p>
<p>
<a id="pgfId-1015217"></a>The order that you specify the input layers is not important. Each shape on one layer is checked against every <a id="marker-1015218"></a>shape on the other layer.</p>
<p>
<a id="pgfId-1015219"></a>You must specify an upper dimensional limit. The dimensions you specify are in user units. You can specify a lower dimensional limit, but it is not required.</p>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1015220"></a>ovlp &lt; 4<br />0 &lt; ovlp &lt; 4.2<br />3 &lt;= ovlp &lt;= 4</pre>
<p>
<a id="pgfId-1015221"></a>The following figure illustrates the meaning of <em>ovlp</em> in various configurations. The arrows indicate the inside facing edge pairs that are checked.</p>

<p>
<a id="pgfId-1021475"></a></p>
<div class="webflare-div-image">
<img width="577" height="136" src="images/chap7-22.gif" /></div>

<p>
<a id="pgfId-1021476"></a>Although <em>ovlp</em> means overlap, it can check shapes that are fully enclosed. The program checks whether the edges form an overlap relationship, not the shapes.</p>

<h4>
<a id="pgfId-1015249"></a>Examples</h4>

<p>
<a id="pgfId-1015250"></a>The following example flags overlaps of <em>bcw</em> and <em>bcwcut</em> that are less than 2.</p>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1015251"></a>drc( bcw &quot;bcwcut&quot; ovlp &lt; 2 )</pre>
<p>
<a id="pgfId-1015252"></a>The following example flags edges of <em>lapcut</em> that overlap and face <em>metal</em> less than 1.5.</p>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1015253"></a>drc( &quot;metal&quot; lapcut ovlp &lt; 1.5 opposite edgeb )</pre>
<p>
<a id="pgfId-1015254"></a>The following example flags shapes of<em> implant</em> that overlap and are parallel to <em>gate</em> in the range of greater than 1 to less than 3.</p>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1015255"></a>drc( implant gate 1 &lt; ovlp &lt; 3 parallel figa )</pre>

<h3>
<a id="pgfId-1015257"></a><a id="47812"></a>s<a id="marker-1024346"></a>ep<a id="sep"></a></h3>
<h4>
<a id="pgfId-1015258"></a>Description</h4>

<p>
<a id="pgfId-1015261"></a>The <em>sep</em> check measures the separation of different shapes on the same layer or on different layers. Separation is the distance between the outside facing edges of shapes.<a id="marker-1015260"></a></p>
<p>
<a id="pgfId-1015262"></a>If you define only one input layer, each shape on that layer is checked against every other shape on the same layer. If you define two input layers, each shape on one layer is checked against every shape on the other layer. The order of the layers is not important to the program.</p>
<p>
<a id="pgfId-1015263"></a>You must specify an upper dimensional limit. The dimensions you specify are in user units. You can specify a lower dimensional limit, but it is not required.</p>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1015265"></a><a id="marker-1015264"></a>sep &lt; 4</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1015266"></a>0 &lt; sep &lt; 4.2</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1015267"></a>3 &lt;= sep &lt;= 4</pre>
<p>
<a id="pgfId-1015268"></a>The following figure illustrates the meaning of <em>sep</em> in various configurations. The arrows indicate the edge pairs that are checked.</p>

<p>
<a id="pgfId-1016676"></a></p>
<div class="webflare-div-image">
<img width="577" height="190" src="images/chap7-23.gif" /></div>

<p>
<a id="pgfId-1015292"></a>Although the <em>sep</em> keyword is an abbreviation for separation, in some cases <em>sep</em> checks shapes that interact. The program bases its checking on whether the edges have separation, rather than whether the shapes have separation. If parts of your shapes overlap, use the <em>geomOverlap</em> command in addition to the <em>sep </em>check.</p>

<p>
<a id="pgfId-1016682"></a></p>
<div class="webflare-div-image">
<img width="577" height="137" src="images/chap7-24.gif" /></div>
<h4>
<a id="pgfId-1015302"></a>Examples</h4>

<p>
<a id="pgfId-1015303"></a>The following example flags<em> metal </em>to <em>metal</em> spacing violations of less than 2.</p>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1015304"></a>drc( metal sep &lt; 2 )</pre>
<p>
<a id="pgfId-1015305"></a>The following example flags <em>poly </em>to <em>diffn</em> spacing violations only when the edges of the violating region are parallel and the checked shapes are the same net.</p>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1015306"></a>drc( poly diffn sep &lt; 1 parallel sameNet )</pre>
<p>
<a id="pgfId-1015307"></a>The following example flags a range of spacing violations of greater than 1 and less than 2.3 between <em>gate</em> and <em>bcw</em>.</p>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1015308"></a>drc( gate bcw 1 &lt; sep &lt; 2.3 )</pre>

<h3>
<a id="pgfId-1021234"></a><a id="87624"></a>sepNo<a id="marker-1024351"></a>tch<a id="sepNotch"></a></h3>
<h4>
<a id="pgfId-1021235"></a>Description</h4>

<p>
<a id="pgfId-1021238"></a>The <em>sepNotch</em> check measures the separation of different shapes, and the separation of edges forming notches on individual shapes, on a single layer. Separation is the distance between the outside facing edges of different shapes. A notch is the distance between outside facing edges of the same shape.</p>
<p>
<a id="pgfId-1021240"></a>You must specify an upper dimensional limit. The dimensions you specify are in user units. You can specify a lower dimensional limit, but it is not required.</p>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1021242"></a><a id="marker-1021241"></a>sep &lt; 4</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1021243"></a>0 &lt; sep &lt; 4.2</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1021244"></a>3 &lt;= sep &lt;= 4</pre>
<p>
<a id="pgfId-1021245"></a>The following figure illustrates the meaning of <em>sepNotch</em> in various configurations. The arrows indicate the edge pairs that are checked.</p>

<p>
<a id="pgfId-1021269"></a></p>
<div class="webflare-div-image">
<img width="577" height="190" src="images/chap7-25.gif" /></div>

<p>
<a id="pgfId-1021270"></a>The <em>sepNotch</em> check is a combination of the <em>sep</em> and <em>notch</em> checks. As such, it has the same limitations as each of those checks. Please refer to the <em>sep</em> and <em>notch</em> sections of this manual for more information.</p>

<h4>
<a id="pgfId-1021281"></a>Examples</h4>

<p>
<a id="pgfId-1021282"></a>The following example flags<em> metal </em>to <em>metal</em> spacing and notch violations of less than 2.</p>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1021283"></a>drc( metal sepNotch &lt; 2 )</pre>
<p>
<a id="pgfId-1021286"></a>The following example flags a range of spacing and notch violations of greater than 1 and less than 2.3 between <em>gate</em> shapes.</p>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1021287"></a>drc( gate 1 &lt; sepNotch &lt; 2.3 )</pre>

<h3>
<a id="pgfId-1015312"></a><a id="31486"></a>wi<a id="marker-1024360"></a>dth<a id="width"></a></h3>
<h4>
<a id="pgfId-1015313"></a>Description</h4>

<p>
<a id="pgfId-1015316"></a>The <em>width</em> check checks the width of individual shapes on a single layer. Width is the distance between inside facing edges of individual shapes.<a id="marker-1015315"></a></p>
<p>
<a id="pgfId-1015317"></a>You must specify an upper dimensional width limit. You can also specify a lower dimensional limit. The specified dimensions are in <a id="marker-1015318"></a>user units.</p>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1015320"></a>width &lt; 3</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1015321"></a>1 &lt; width &lt;= 3</pre>
<p>
<a id="pgfId-1015322"></a>The functionality of having only a lower dimensional bound (3 &lt; width or in other terms width &gt; 3) can be obtained using layer processing commands. A negative size followed by a positive size of the same amount leaves only those shapes whose width is greater than twice the sized amount. It should be noted that this technique is not entirely reliable for shapes with angled edges.</p>
<p>
<a id="pgfId-1015323"></a>The following figure illustrates the meaning of <em>width </em>in various configurations. The arrows indicate the edge pairs that are checked.</p>
<p>
<a id="pgfId-1019048"></a></p>

<div class="webflare-div-image">
<img width="668" height="180" src="images/chap7-26.gif" /></div>

<p>
<a id="pgfId-1018771"></a>The longest dimension of a rectangle is checked by the <em>width</em> definition in exactly the same way as the shortest dimension. If both widths of a rectangle are shorter than the <em>width </em>check dimension, then two separate errors are written by the program to the output layer.</p>

<h4>
<a id="pgfId-1015355"></a>Examples</h4>

<p>
<a id="pgfId-1015356"></a>The first drc finds metal shapes with a width less than 3. </p>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1015357"></a>drc( metal width &lt; 3 )</pre>
<p>
<a id="pgfId-1015358"></a>This drc finds poly shapes with a width greater than 0 and less than or equal to 4.5. </p>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1015359"></a>drc( poly 0 &lt; width &lt;= 4.5 )</pre>
<p>
<a id="pgfId-1015360"></a>This drc finds cut shapes with a width less than 2.</p>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1015361"></a>drc( cut width &lt; 2 )</pre>
<p>
<a id="pgfId-1015362"></a>The following example identifies all metal shapes whose width is greater than 3 (twice the size of a negative size followed by a positive size).</p>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1015363"></a>geomSize( geomSize( metal -1.5) 1.5 )</pre>

<h2>
<a id="pgfId-1015366"></a>Check Modifiers<a id="Function Modifiers"></a></h2>

<p>
<a id="pgfId-1015367"></a>Check modifiers apply restrictions on the edge relationships for the DRC checks. The following check modifiers are available:</p>
<ul><li>
<a id="pgfId-1020961"></a><a href="chap7.html#19208">app</a></li><li>
<a id="pgfId-1023527"></a><a href="chap7.html#97620">cornerToCorner</a></li><li>
<a id="pgfId-1023528"></a><a href="chap7.html#31016">cornerToEdge, cornerToEdgeA, cornerToEdgeB</a></li><li>
<a id="pgfId-1023529"></a><a href="chap7.html#44249">corner, cornerA, cornerB</a></li><li>
<a id="pgfId-1023560"></a><a href="chap7.html#22339">notCorner</a></li><li>
<a id="pgfId-1023561"></a><a href="chap7.html#23924">diffNet</a></li><li>
<a id="pgfId-1024865"></a><a href="chap7.html#54053">errorLimit</a></li><li>
<a id="pgfId-1023562"></a><a href="chap7.html#14752">length, lengtha, lengthb</a></li><li>
<a id="pgfId-1020966"></a><a href="chap7.html#41851">notParallel</a></li><li>
<a id="pgfId-1020967"></a><a href="chap7.html#70419">only_perp</a></li><li>
<a id="pgfId-1020968"></a><a href="chap7.html#19269">opposite, oppositeA, oppositeB</a></li><li>
<a id="pgfId-1020971"></a><a href="chap7.html#91284">parallel</a></li><li>
<a id="pgfId-1020972"></a><a href="chap7.html#86067">sameNet</a></li><li>
<a id="pgfId-1020973"></a><a href="chap7.html#51877">shielded, shieldedA, shieldedB, shielded(layer)</a></li><li>
<a id="pgfId-1025249"></a><a href="chap7.html#19628">shieldCoin</a></li><li>
<a id="pgfId-1020976"></a><a href="chap7.html#75974">with_perp</a></li></ul>
















<h3>
<a id="pgfId-1015369"></a><a id="19208"></a>app<a id="app"></a></h3>
<h4>
<a id="pgfId-1015370"></a>Description</h4>

<p>
<a id="pgfId-1015372"></a>The<a id="marker-1015371"></a> <em>app</em> modifier is used to check <em>apposition. </em>Apposition is the projection of one edge onto the other. You can specify the limits required for the apposition of <a id="marker-1015373"></a>edges for a check to be made by the program.</p>
<p>
<a id="pgfId-1015422"></a>The following figure illustrates positive and negative apposition.</p>

<p>
<a id="pgfId-1016688"></a></p>
<div class="webflare-div-image">
<img width="586" height="195" src="images/chap7-27.gif" /></div>

<p>
<a id="pgfId-1015423"></a>You can use the following apposition values:</p>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1015424"></a>lower_limit operator <code><em>app</em></code> operator upper_limit</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1015425"></a><code><em>app</em></code> operator lower_limit</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1015426"></a><code><em>app</em></code> operator upper_limit</pre>
<p>
<a id="pgfId-1015427"></a>You can use the following operators:</p>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1015428"></a>&lt;</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1015429"></a>&lt;=</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1015430"></a>&gt;</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1015431"></a>&gt;=</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1015432"></a>==</pre>
<p>
<a id="pgfId-1015433"></a>Keep these points in mind when you use <em>app</em>:</p>
<ul><li>
<a id="pgfId-1015434"></a>When checking two parallel edges, the application and meaning of apposition is clear. If two edges are not parallel to each other, the amount of apposition might depend upon which edge is being used as the reference edge. Also for extreme cases, you might see positive apposition when referencing one edge and negative apposition when referencing the other edge. In this case Diva defaults to the positive apposition.<br /><div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1015435"></a>The scenario for <em>apposition </em>on angled edges are the same as the scenarios for the DRC <em>opposite </em>modifier on angled edges. You can see diagrams of these scenarios in the section, &#8220;<a href="chap7.html#19269">opposite, oppositeA, oppositeB</a>&#8221; later in this chapter. </div></li><li>
<a id="pgfId-1015440"></a>The <a id="marker-1015439"></a>apposition value is independent of the length of the edges checked. </li><li>
<a id="pgfId-1015441"></a>Apposition is measured only within the range of the checking dimension. If angled edges diverge, the apposition is measured only up to the point where the separation equals the upper limit check dimension. </li><li>
<a id="pgfId-1021658"></a>Apposition is tested after shielding has been applied. Only the portion of the edges which remain after shielding are used to measure apposition.</li></ul>





<h4>
<a id="pgfId-1015442"></a>Examples</h4>

<p>
<a id="pgfId-1015443"></a>The following example checks<em> poly</em> to <em>diffn </em>spacing of less than 2 but only flags error regions with an apposition greater than 3.</p>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1015444"></a>drc( poly diffn sep &lt; 2 app &gt; 3 )</pre>
<p>
<a id="pgfId-1015445"></a>The following example flags parallel <em>metal</em> edges that are less than 4 apart with an apposition less than 2.</p>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1015446"></a>drc( metal sep &lt; 4 app &lt; 2 parallel )</pre>
<p>
<a id="pgfId-1015447"></a>The following example flags edges of <em>cut </em>enclosed by<em> metal</em> by less than 2 whose mutual shapes have an apposition greater than 1.</p>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1015448"></a>drc( metal cut enc &lt; 2 app &gt; 1 edgeb )</pre>
<p>
<a id="pgfId-1015449"></a>The following example flags edges of <em>metal</em> that are parallel to<em> poly</em> and less than 2 apart from <em>poly</em>, using an apposition that is greater than 5 but less than 20.</p>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1023688"></a>drc( metal poly sep &lt; 2 5 &lt; app &lt; 20 parallel edgea )</pre>

<h3>
<a id="pgfId-1023694"></a><a id="97620"></a>co<a id="marker-1024074"></a>rnerToCorner</h3>
<h4>
<a id="pgfId-1024054"></a>Description</h4>

<p>
<a id="pgfId-1023795"></a>The <em>cornerToCorner</em> modifier specifies that a check be made only if the two edges being checked are in a corner-to-corner relationship.<a id="marker-1023696"></a></p>
<p>
<a id="pgfId-1023697"></a>Only one corner modifier is allowed in a rule. When used with edge layers, no corner is detected at any endpoint which does not have an adjacent edge, regardless of the configuration in the source polygon.</p>
<p>
<a id="pgfId-1024573"></a>The corner-to-corner relationship requires the following conditions be met. The edges of the corners form right angles, and are parallel and have apposition less than or equal to zero with the opposing edge of the other corner. The vectors, with respect to their corner, of the parallel edges must have opposing direction.</p>
<p>
<a id="pgfId-1024030"></a>A variation of the <em>cornerToCorner</em> modifier can be used to limit the relationship by the angle of the line segment linking the corners. The sign of the angle is ignored and the only value allowed is 45. The following forms require the line segment to form a 45 degree angle and to not form a 45 degree angle, respectively:</p>
<p>
<a id="pgfId-1024036"></a><code>cornerToCorner == 45
cornerToCorner != 45</code></p>
<p>
<a id="pgfId-1024043"></a></p>

<h3>
<a id="pgfId-1024016"></a><a id="31016"></a>cor<a id="marker-1024083"></a>nerToEdge, corn<a id="marker-1024088"></a>erToEdgeA, corn<a id="marker-1024093"></a>erToEdgeB</h3>
<h4>
<a id="pgfId-1023706"></a>Description</h4>

<p>
<a id="pgfId-1023790"></a>The <em>cornerToEdge</em> modifier specifies that a check be made only if the two edges being checked are in a corner-to-edge relationship. In a two layer check, either layer can form the corner or edge. The <a id="marker-1023707"></a>cornerToEdgeA and cornerToEdgeB modifiers are only available in two layer checks. The <em>cornerToEdgeA</em> modifier requires the edge to be on the first layer, the <em>cornerToEdgeB</em> modifier requires the edge to be on the second layer.</p>
<p>
<a id="pgfId-1023708"></a>Only one corner modifier is allowed in a rule. When used with edge layers, no corner is detected at any endpoint which does not have an adjacent edge, regardless of the configuration in the source polygon.</p>
<p>
<a id="pgfId-1024022"></a>The corner-to-edge relationship requires the following conditions be met. The edges may not be parallel or perpendicular. At least one endpoint of either edge must form a right angle whose exterior bisector intersects the other edge between the endpoints, inclusive. An exterior bisector is a line segment starting at the corner point and forming an obtuse angle with the edges of the corner.</p>

<h3>
<a id="pgfId-1023716"></a><a id="44249"></a>cor<a id="marker-1024098"></a>ner, cor<a id="marker-1024103"></a>nerA, cor<a id="marker-1024108"></a>nerB</h3>
<h4>
<a id="pgfId-1023717"></a>Description</h4>

<p>
<a id="pgfId-1023719"></a>The <em>corner</em> modifier specifies that a check be made only if the two edges being checked are in a corner to corner or corner to edge relationship. In a two layer check, either layer can form the corner or edge. The <em>cornerA</em><a id="marker-1023718"></a> and <em>cornerB</em> modifiers are only available for two layer checks and require the corner and edge be on specific input layers for the corner to edge relationship.</p>
<p>
<a id="pgfId-1023783"></a><em>Corner</em> is the same as using <em>cornerToCorner</em> with <em>cornerToEdge</em>. <em>CornerA</em> is the same as using <em>cornerToCorner</em> with <em>cornerToEdgeA</em>. <em>CornerB</em> is the same as using <em>cornerToCorner</em> with <em>cornerToEdgeB</em>.</p>
<p>
<a id="pgfId-1023784"></a>Only one corner modifier is allowed in a rule. When used with edge layers, no corner is detected at any endpoint which does not have an adjacent edge, regardless of the configuration in the source polygon.</p>

<h3>
<a id="pgfId-1023689"></a><a id="22339"></a>not<a id="marker-1024113"></a>Corner</h3>
<h4>
<a id="pgfId-1023690"></a>Description</h4>

<p>
<a id="pgfId-1023671"></a>The <em>notCorner</em> modifier specifies that a check be made only if the two edges being checked are not in either of the <em>cornerToCorner</em><a id="marker-1023670"></a> or <em>cornerToEdge</em> relationships.</p>
<p>
<a id="pgfId-1023781"></a>Only one corner modifier is allowed in a rule. When used with edge layers, no corner is detected at any endpoint which does not have an adjacent edge, regardless of the configuration in the source polygon.</p>

<h3>
<a id="pgfId-1024754"></a><a id="23924"></a>diffNet</h3>
<h4>
<a id="pgfId-1024755"></a>Description</h4>

<p>
<a id="pgfId-1024758"></a>The <a id="marker-1024756"></a><em>diffNet</em> modifier specifies that a check be made only if the two edges being checked come from polygons on different electrical nets. This modifier only applies to two-layer checks or single-layer separation. You can only use the <em>diffNet</em><a id="marker-1024757"></a> modifier if you use <a id="marker-1024759"></a>connected layers.</p>
<p>
<a id="pgfId-1024760"></a>The <em>diffNet</em> modifier is only useful during full flat DRC checking. Incremental and hierarchical checks only verify a portion of the circuit at a time. The connectivity in incremental and hierarchical checking is dependent on which parts of the layout are being analyzed.</p>
<p>
<a id="pgfId-1024761"></a>If a connection between shapes occurs outside the checking area, those shapes appear to be unconnected although they are partially included in the checking area.</p>

<p>
<a id="pgfId-1024786"></a></p>
<div class="webflare-div-image">
<img width="561" height="259" src="images/chap7-28.gif" /></div>
<h4>
<a id="pgfId-1024787"></a>Example</h4>

<p>
<a id="pgfId-1024788"></a>A typical use for the <em>diffNet </em>modifier would be the same as described for <em>sameNet: </em>the separation of polysilicon and diffusion in a MOS technology.</p>
<p>
<a id="pgfId-1024789"></a>If shapes on these layers are electrically connected, the separation ensures that unwanted transistors are not formed. The separation distance you use is greater than the normal separation you need to ensure adequate electrical isolation of unconnected shapes.</p>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1024790"></a>drc( poly diffn sep &lt; 2 diffNet )</pre>

<h3>
<a id="pgfId-1015452"></a><a id="54053"></a>error<a id="marker-1024802"></a>Limit</h3>
<h4>
<a id="pgfId-1015453"></a>Description</h4>

<p>
<a id="pgfId-1015456"></a>The <em>errorLimit</em> modifier specifies the check is to stop when the specified number of error markers have been created. Execution continues withthe next command in the rule deck.</p>
<p>
<a id="pgfId-1024877"></a>The optional keyword <em>abort</em> may be used to stop the run if the limit is reached. With this keyword, the following commands in the rule deck are not processed.</p>
<p>
<a id="pgfId-1024878"></a>Reaching the limit using either syntax form is considered a special case of abnormal termination at the end of the run.</p>
<p>
<a id="pgfId-1024813"></a>You can use the following syntax:</p>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1024814"></a>errorLimit(count)</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1024815"></a>errorLimit(count abort)</pre>
<p>
<a id="pgfId-1024879"></a>The <a href="chap3.html#83468">ivVerify</a> command line has options to specify a per rule error limit and a per run error limit. The DRC and Extract UI forms have fields to specify the same per rule error limit and per run error limit.s These over-ride any limits specified in the rule deck.</p>
<p>
<a id="pgfId-1024882"></a>Error limits are ignored by any command which writes to a derived layer instead of the <em>marker error</em> graphic layer. The use of <em>errorLimit</em> has no effect in the following command:</p>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1024883"></a>tmp2 = drc( poly sep &lt; 0.15 errorLimit(10) )</pre>

<h3>
<a id="pgfId-1015489"></a><a id="14752"></a>len<a id="marker-1024125"></a>gth, len<a id="marker-1024130"></a>gtha, len<a id="marker-1024135"></a>gthb<a id="length, lengtha, lengthb"></a></h3>
<h4>
<a id="pgfId-1015490"></a>Description</h4>

<p>
<a id="pgfId-1015491"></a>The<em> length, lengtha, and lengthb </em>modifiers specify that the check be made only if the lengths of the individual edges involved in the check are within specified limits.</p>
<p>
<a id="pgfId-1015493"></a>Without these modifiers, the <a id="marker-1015492"></a>edge length is not considered in checking.</p>

<h4>
<a id="pgfId-1015494"></a>Modifiers</h4>

<p>
<a id="pgfId-1015495"></a>There are three length modifiers.</p>

<p><strong>
<a id="pgfId-1015496"></a><code>length</code></strong></p>

<p class="webflare-indent1">
<a id="pgfId-1026435"></a> The lengths of edges from <em>both layers </em>in a two-layer check, and the single layer in a single-layer check must be within the modifier limits. </p>

<p><strong>
<a id="pgfId-1026440"></a><code>lengtha</code></strong></p>

<p class="webflare-indent1">
<a id="pgfId-1026443"></a> The length of the edge from the<em> first layer </em>in a two-layer check must be within the modifier limits.</p>

<p><strong>
<a id="pgfId-1026448"></a><code>lengthb</code></strong></p>

<p class="webflare-indent1">
<a id="pgfId-1026451"></a> The length of the edge from the <em>second layer</em> in a two-layer check must be within the modifier limits.</p>
<p>
<a id="pgfId-1015499"></a>You can use the following length syntax:</p>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1015500"></a>lower_limit operator <code><em>length</em></code> operator upper_limit</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1015501"></a><code><em>length</em></code> operator lower_limit</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1015502"></a><code><em>length</em></code> operator upper_limit</pre>
<p>
<a id="pgfId-1015503"></a>You can use the following operators:</p>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1015504"></a>&lt;</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1015505"></a>&lt;=</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1015506"></a>&gt;</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1015507"></a>&gt;=</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1015508"></a>==</pre>
<p>
<a id="pgfId-1015509"></a>A limit is an integer or floating-point number in user units.</p>

<h4>
<a id="pgfId-1015510"></a>Examples</h4>

<p>
<a id="pgfId-1015511"></a>The following example checks spacing of parallel <em>metal</em> to <em>metal</em> lines less than 2 apart, then flags only those regions whose violating edges are greater than 20 in length.</p>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1015512"></a>drc( metal sep &lt; 2 parallel length &gt; 20 )</pre>
<p>
<a id="pgfId-1015513"></a>The following example checks<em> metal</em> to <em>poly</em> spacing of less than 2, then flags only violating regions whose <em>metal</em> edges are less than 15.</p>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1015514"></a>drc( metal poly sep &lt; 2 lengtha &lt; 15 )</pre>
<p>
<a id="pgfId-1015515"></a>The following example checks<em> metal </em>edges parallel to <em>poly</em> edges that are greater than 5 and less than 20 long and are less than 2 apart from <em>metal</em>.</p>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1015516"></a>drc( metal poly sep &lt; 2 5 &lt; lengthb &lt; 20 parallel )</pre>

<h3>
<a id="pgfId-1015519"></a><a id="41851"></a>notP<a id="marker-1024142"></a>arallel<a id="notParallel"></a></h3>
<h4>
<a id="pgfId-1015520"></a>Description</h4>

<p>
<a id="pgfId-1015523"></a>The <em>notParallel</em> modifier restricts checking to edges that are not parallel to each other.<a id="marker-1015522"></a></p>
<p>
<a id="pgfId-1015524"></a>Normally, dimensional checks are applied between all edge configurations other than perpendicular ones. This modifier further limits the checked configurations by only checking edges that are not parallel to each other.</p>
<p>
<a id="pgfId-1015552"></a>The following figure illustrates <em>notParallel</em> modifier checking.</p>

<p>
<a id="pgfId-1016690"></a></p>
<div class="webflare-div-image">
<img width="643" height="170" src="images/chap7-29.gif" /></div>
<h4>
<a id="pgfId-1015553"></a>Example</h4>

<p>
<a id="pgfId-1015554"></a>The following example checks <em>poly </em>to <em>diffn </em>spacing of less than 3 but only flags nonparallel edges of <em>poly</em>.</p>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1015555"></a>drc( &quot;poly&quot; diffn sep &lt; 3 notParallel edgea )</pre>

<h3>
<a id="pgfId-1015559"></a><a id="70419"></a>only_perp<a id="only_perp"></a></h3>
<h4>
<a id="pgfId-1015560"></a>Description</h4>

<p>
<a id="pgfId-1015563"></a>The<a id="marker-1015561"></a> <em>only_perp</em> modifier restricts checking to only edges that are perpendicular to each other.<a id="marker-1015562"></a></p>
<p>
<a id="pgfId-1015564"></a>Normally, dimensional checks are applied between edges in all configurations other than perpendicular to each other. This modifier limits the checked configurations by only checking edges that are perpendicular to each other.</p>
<p>
<a id="pgfId-1015592"></a>The following figure illustrates <em>only_perp</em> modifier checking.</p>

<p>
<a id="pgfId-1016691"></a></p>
<div class="webflare-div-image">
<img width="569" height="172" src="images/chap7-30.gif" /></div>

<p>
<a id="pgfId-1015593"></a>Use of this modifier excludes some other modifiers, such as <em>parallel</em>.</p>

<h4>
<a id="pgfId-1015594"></a>Examples</h4>

<p>
<a id="pgfId-1015595"></a>The following example checks <em>metal</em> enclosure of <em>cut</em> less than 2 but flags only perpendicular error regions.</p>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1015596"></a>drc( &quot;metal&quot; &quot;cut&quot; enc &lt; 2 only_perp )</pre>
<p>
<a id="pgfId-1015597"></a>The following example flags <em>cutedge</em> edges that are perpendicular to <em>gateedge</em> and whose spacing is less than 1.5.</p>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1015598"></a>drc( cutedge gateedge sep &lt; 1.5 only_perp edgea )</pre>

<h3>
<a id="pgfId-1015602"></a><a id="19269"></a>opp<a id="marker-1024149"></a>osite<a id="opposite"></a>, opp<a id="marker-1024154"></a>ositeA, opp<a id="marker-1024159"></a>ositeB</h3>
<h4>
<a id="pgfId-1015603"></a>Description</h4>

<p>
<a id="pgfId-1015606"></a><a id="25171"></a>The <em>opposite </em>modifier restricts checking to only the portion of those edges that are opposite of each other.</p>
<p>
<a id="pgfId-1015623"></a>The following figure illustrates the <em>opposite </em>modifier.</p>

<p>
<a id="pgfId-1016692"></a></p>
<div class="webflare-div-image">
<img width="586" height="142" src="images/chap7-31.gif" /></div>

<p>
<a id="pgfId-1015624"></a>The portion of the edges that gets checked is based on a perpendicular projection of each edge. As the figure shows, the meaning of <em>opposite</em> is clear for parallel edges.</p>

<p>
<a id="pgfId-1016693"></a></p>
<div class="webflare-div-image">
<img width="569" height="164" src="images/chap7-32.gif" /></div>

<p>
<a id="pgfId-1015646"></a>For the previous figures, Diva generates both of the projection error shapes when <em>opposite</em> is used. When <em>oppositeA</em> is used, only A&#8217;s projection to B is generated. When <em>oppositeB</em> is used, only B&#8217;s projection to A is generated.</p>
<b>Note:</b><br />
<a id="pgfId-1019504"></a>
<ul><li>
<a id="pgfId-1019506"></a>The <em>opposite</em> modifier may be used with one-layer and two-layer checks. The <em>oppositeA</em> and <em>oppositeB</em> modifiers may be used only with two-layer checks. </li><li>
<a id="pgfId-1019505"></a>Only one of <em>opposite</em>, <em>oppositeA</em>, or <em>oppositeB</em> may be used in a check.</li><li>
<a id="pgfId-1020903"></a>When non-parallel edges are checked, it is possible for two markers to be output. One for each edge&#8217;s projection onto the other within the check distance. Parallel edges will only generate a single marker.</li></ul>



<h4>
<a id="pgfId-1015671"></a>Examples</h4>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1015674"></a>drc( poly diffn sep &lt; 2 opposite )</pre>

<p>
<a id="pgfId-1019572"></a>Finds<em> poly</em> to <em>diffn</em> spacing less than 2, limiting the marker to the portion that is opposite.</p>
<p>
<a id="pgfId-1015675"></a></p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1015676"></a>drc( metal sep &lt; 4 app &gt; 2 opposite parallel )</pre>

<p>
<a id="pgfId-1019586"></a>Flags regions of parallel <em>metal</em> lines separated less than 4 whose apposition is greater than 2.</p>

<h3>
<a id="pgfId-1015678"></a><a id="91284"></a>par<a id="marker-1024166"></a>allel<a id="parallel"></a></h3>
<h4>
<a id="pgfId-1015679"></a>Description</h4>

<p>
<a id="pgfId-1015682"></a>The <em>parallel</em> modifier restricts checking to edges that are parallel to each other.<a id="marker-1015681"></a></p>
<p>
<a id="pgfId-1015683"></a>Normally, dimensional checks are applied between all configurations other than perpendicular ones. This modifier limits the checked configurations to parallel edges.</p>
<p>
<a id="pgfId-1015710"></a>The following figure illustrates <em>parallel</em> checking.</p>

<p>
<a id="pgfId-1016695"></a></p>
<div class="webflare-div-image">
<img width="660" height="177" src="images/chap7-33.gif" /></div>
<h4>
<a id="pgfId-1015711"></a>Example</h4>

<p>
<a id="pgfId-1015712"></a>You can use the <em>parallel </em>modifier to detect reflection conditions between polysilicon and diffusion in a MOS technology.</p>
<p>
<a id="pgfId-1015713"></a>The following example flags <em>poly</em> edges that are parallel to <em>diffn</em> and less than 2 apart.</p>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1015714"></a>drc( &quot;poly&quot; diffn sep &lt; 2 parallel edgea )</pre>

<h3>
<a id="pgfId-1015717"></a><a id="86067"></a>sam<a id="marker-1024173"></a>eNet<a id="sameNet"></a></h3>
<h4>
<a id="pgfId-1015718"></a>Description</h4>

<p>
<a id="pgfId-1015721"></a>The <em>sameNet</em> modifier specifies that a check is made only if the related edges come from polygons on the same electrical net. This modifier only applies to two-layer checks or single-layer separation. You can use the <em>sameNet</em><a id="marker-1015720"></a> modifier only on connected layers.</p>
<p>
<a id="pgfId-1015722"></a>The <em>sameNet</em> modifier is meaningful only during full flat DRC checking. Incremental and hierarchical checks verify only a portion of the circuit at a time. The connectivity in incremental and hierarchical checking is dependent on which parts of the layout are being analyzed. If a connection between shapes occurs outside the checking area, those shapes appear to be unconnected, even though they are partially included in the checking area.</p>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1016697"></a>drc( metal poly sep &lt;3 samenet )</pre>

<p>
<a id="pgfId-1015745"></a></p>
<div class="webflare-div-image">
<img width="561" height="246" src="images/chap7-34.gif" /></div>
<h4>
<a id="pgfId-1015746"></a>Example</h4>

<p>
<a id="pgfId-1015747"></a>A typical use for the <em>sameNet </em>modifier would be when you check the separation of polysilicon and diffusion in a MOS technology.</p>
<p>
<a id="pgfId-1015748"></a>If shapes on these layers are electrically connected, the separation ensures that unwanted transistors are not formed. The separation distance you use for this kind of situation is different from the normal separation you need to ensure adequate electrical isolation of unconnected shapes.</p>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1015749"></a>drc( poly diffn sep &lt; 1 sameNet )</pre>

<h3>
<a id="pgfId-1015753"></a><a id="51877"></a>shi<a id="marker-1024184"></a>elded, sh<a id="marker-1024193"></a>ieldedA, s<a id="marker-1024198"></a>hieldedB, shi<a id="marker-1024653"></a>elded(layer)</h3>
<h4>
<a id="pgfId-1015754"></a>Description</h4>

<p>
<a id="pgfId-1015756"></a>The <em>shielded </em>modifiers change the way DRC reports errors when edges intervene between the edges being checked (when the error between edges is being shielded).</p>
<p>
<a id="pgfId-1015757"></a>The following figure shows examples of where the <em>shielded </em>modifier affects the result.</p>

<p>
<a id="pgfId-1016700"></a></p>
<div class="webflare-div-image">
<img width="575" height="159" src="images/chap7-35.gif" /></div>

<p>
<a id="pgfId-1015789"></a>The effect of the <em>shielded </em>modifier varies depending on whether you have the <em>opposite</em> modifiers specified also. </p>
<p>
<a id="pgfId-1015791"></a>With the <em>shielded</em> modifiers, an error is created between the edges being checked for each part of the edge pairs that have an unobstructed view of each other.</p>
<p>
<a id="pgfId-1015792"></a>In the examples above, figures 1 and 2 still create no error, but figure 3 generates errors as shown in the following diagram.</p>

<p>
<a id="pgfId-1016701"></a></p>
<div class="webflare-div-image">
<img width="502" height="137" src="images/chap7-36.gif" /></div>

<p>
<a id="pgfId-1015824"></a>With the <em>opposite</em> modifier, the apposition length of the unshielded errors is well defined. It is illustrated in the previous diagram by the segments <em>A </em>and <em>B</em>. These are two separate appositions and are checked independently against any apposition specification.</p>
<p>
<a id="pgfId-1018209"></a>The shieldedA and shieldedB modifiers allow the user to control which layer of a two layer check is used as the shield. Normally, edges from both layers are used as the shield. The shielded(layer) modifier allows a layer other than the check layers to be used as the shield.</p>

<h4>
<a id="pgfId-1015825"></a>Examples</h4>

<p>
<a id="pgfId-1015826"></a>The following example flags<em> poly</em> to <em>diffn</em> spacing less than 2, with both the opposite and shielded modifiers.</p>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1015827"></a>drc( poly diffn sep &lt; 2 opposite shielded )</pre>
<p>
<a id="pgfId-1024736"></a>The following example flags regions between <em>metal</em> lines separated less than 4 with only the shielded modifier.</p>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1024737"></a>drc( metal sep &lt; 4 shielded )</pre>
<p>
<a id="pgfId-1015828"></a>The following example flags regions between <em>metal</em> lines separated less than 4 that are not shielded by poly.</p>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1015829"></a>drc( metal sep &lt; 4 shielded(poly) )</pre>

<h3>
<a id="pgfId-1025256"></a><a id="19628"></a>shieldCoin<a id="marker-1025372"></a></h3>
<h4>
<a id="pgfId-1025257"></a>Description</h4>

<p>
<a id="pgfId-1025258"></a>The <em>shieldCoin </em>modifier changes the way shielding of DRC error markers is done. By default, only edges which are between the edges forming the error are used for shielding. With this modifier, edges which are coincident with the error edges will also be used for shielding.</p>
<p>
<a id="pgfId-1025368"></a>For the purposes of this modifier, the word coincident is used in the general sense of two edges being colinear and overlapping in whole or in part.</p>
<p>
<a id="pgfId-1025365"></a>The <em>shieldCoin</em> modifier implies the <em>shielded</em> modifier, when no other shield modifier is given.</p>

<h4>
<a id="pgfId-1025330"></a>Examples</h4>

<p>
<a id="pgfId-1025331"></a>The following example flags<em> poly</em> to <em>diffn</em> spacing less than 2, with both the opposite and shielded modifiers, allowing coincident edges to shield.</p>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1025332"></a>drc( poly diffn sep &lt; 2 opposite shielded shieldCoin )</pre>

<h3>
<a id="pgfId-1015832"></a><a id="75974"></a>with<a id="marker-1024207"></a>_perp<a id="with_perp"></a></h3>
<h4>
<a id="pgfId-1015833"></a>Description</h4>

<p>
<a id="pgfId-1015836"></a>The <em>with_perp</em> modifier checks perpendicular edges in addition to all other meaningful edge relationships. <a id="marker-1015835"></a></p>
<p>
<a id="pgfId-1015837"></a>Normally, dimensional checks between edges are not applied when those edges are perpendicular to each other. This is because any check violations are found with the adjacent edges (those edges preceding or following the perpendicular edges in the polygon). In some cases it is desirable to include the perpendicular edge configuration in the checking. </p>
<p>
<a id="pgfId-1015868"></a>The following figure illustrates <em>with_perp</em> checking.</p>

<p>
<a id="pgfId-1016702"></a></p>
<div class="webflare-div-image">
<img width="605" height="177" src="images/chap7-37.gif" /></div>

<p>
<a id="pgfId-1015869"></a>You can use this modifier when you want to</p>
<ul><li>
<a id="pgfId-1015870"></a>Check disjoint edges from other checks that do not include non-perpendicular edges </li><li>
<a id="pgfId-1015871"></a>Have perpendicular edges in the output</li></ul>

<p>
<a id="pgfId-1015872"></a>When this modifier is used, your check run time increases. For regular polygon checking, the <em>with_perp</em> modifier doubles the number of checks performed by the program.</p>

<h4>
<a id="pgfId-1015873"></a>Examples</h4>

<p>
<a id="pgfId-1015874"></a>The following example includes perpendicular checks and flags all<em> metal</em> enclosures of <em>cut</em> less than 2 user units.</p>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1015875"></a>drc( &quot;metal&quot; &quot;cut&quot; enc &lt; 2 with_perp )</pre>
<p>
<a id="pgfId-1015876"></a>The following example includes perpendicular checks and flags edges of <em>cutedge</em> that are spaced less than 1.5 from <em>gateedge</em>.</p>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1015877"></a>drc( cutedge gateedge sep &lt; 1.5 with_perp edgea )</pre>

<h2>
<a id="pgfId-1015881"></a>Output Modifiers<a id="Output Modifiers"></a></h2>

<p>
<a id="pgfId-1019686"></a>Output modifiers let you change the format of the output for a DRC check. The following output modifiers are available:</p>
<ul><li>
<a id="pgfId-1020987"></a><a href="chap7.html#56048">edge, edgea, edgeb</a></li><li>
<a id="pgfId-1020990"></a><a href="chap7.html#28075">fig, figa, figb</a></li><li>
<a id="pgfId-1023547"></a><a href="chap7.html#29140">wholeEdge, wholeEdgea, wholeEdgeb</a></li></ul>



<h3>
<a id="pgfId-1019762"></a><a id="56048"></a>edg<a id="marker-1024216"></a>e, edg<a id="marker-1024221"></a>ea, edg<a id="marker-1024226"></a>eb<a id="edge, edgea, edgeb"></a></h3>
<h4>
<a id="pgfId-1019763"></a>Description</h4>

<p>
<a id="pgfId-1019764"></a>The <em>edge, edgea, </em>and<em> edgeb</em> modifiers specify that the portion of the edges forming the error region become the output of the check rather than the error region between the edges, or the figures themselves. Without these <em>edge</em>, <em><a href="chap7.html#fig, figa, figb">fig</a></em>, or <em><a href="chap7.html#wholeEdge, wholeEdgea, wholeEdgeb">wholeEdge</a></em> modifiers, Diva will generate the error region between the edges as the output. </p>
<p>
<a id="pgfId-1019765"></a>A variation of the <em>edge</em> modifiers can be used to extend or reduce the length of the edge segments generated. This variation has the following form:</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1019766"></a>edge[a,b] == value</pre>

<p>
<a id="pgfId-1019767"></a>The value can be any positive or negative, fixed or floating point number in user units. If you specify a value, each end of the edges output by this <em>edge</em> modifier are extended by the specified value. But, this extension is only up to the endpoints of the original edges. If you specify a positive value, the <em>edge</em> modifier stretches the edges. If you specify a negative value, the <em>edge</em> modifier shrinks the edges. The program discards any resultant edge length of zero or less.</p>

<h4>
<a id="pgfId-1019768"></a>Modifiers</h4>

<p>
<a id="pgfId-1019769"></a>The three edge modifiers and their outputs are as follows:</p>

<p><strong>
<a id="pgfId-1019770"></a><code>edge</code></strong></p>

<p class="webflare-indent1">
<a id="pgfId-1026458"></a> Outputs the error segments of the edges of <em>both layers</em> in a two-layer check, or outputs the error segments of the edges of the single layer in a single-layer check. </p>

<p><strong>
<a id="pgfId-1026463"></a><code>edgea</code></strong></p>

<p class="webflare-indent1">
<a id="pgfId-1026466"></a> Outputs the error segment of the edge of the <em>first layer</em> in a two-layer check. Not available in a single-layer check.</p>

<p><strong>
<a id="pgfId-1026471"></a><code>edgeb</code></strong></p>

<p class="webflare-indent1">
<a id="pgfId-1026474"></a> Outputs the error segment of the edge of the <em>second layer</em> in a two-layer check. Not available in a single-layer check.</p>
<p>
<a id="pgfId-1019773"></a>The following example illustrates these modifiers.</p>

<p>
<a id="pgfId-1019793"></a></p>
<div class="webflare-div-image">
<img width="610" height="191" src="images/chap7-38.gif" /></div>
<h4>
<a id="pgfId-1019806"></a>Examples</h4>

<p>
<a id="pgfId-1019807"></a>The following example flags cut edges less than 2.</p>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1019808"></a>drc( cut sep &lt; 2 edge )</pre>
<p>
<a id="pgfId-1019809"></a>The following example flags cut edges enclosed by <em>metal</em> less than 2.</p>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1019810"></a>drc( metal cut encl &lt; 2 edgeb )</pre>
<p>
<a id="pgfId-1019811"></a>The following example flags parallel <em>via</em> and<em> gate</em> edges with spacing less than 2.</p>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1019812"></a>drc( via gate sep &lt; 2 parallel edge )</pre>
<p>
<a id="pgfId-1019813"></a>The following example flags those portions of the edges of<em> metal </em>shapes that are parallel and are separated by less than 2 from <em>poly </em>shapes.</p>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1019814"></a>drc( metal poly sep &lt; 2 opposite parallel edgea )</pre>
<p>
<a id="pgfId-1019815"></a>The following example is similar to the previous example except that the resultant edges are stretched by 2 at each end.</p>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1019816"></a>drc( metal poly sep &lt; 2 opposite parallel edgea == 2 )</pre>
<p>
<a id="pgfId-1019817"></a>The following example illustrates how you can use the extension of an error segment. The increased separation of metal must extend by 2 on either side of the contact.</p>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1019818"></a>x= drc( metal contact enc &lt; 1 opposite edgea == 2)</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1019819"></a>drc( x metal sep &lt; 1.5 opposite)</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1019820"></a>drc( metal sep &lt; 1&gt;</pre>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1019857"></a></pre>
<div class="webflare-div-image">
<img width="643" height="311" src="images/chap7-39.gif" /></div>
<h3>
<a id="pgfId-1015971"></a><a id="28075"></a>fi<a id="marker-1024233"></a>g, fi<a id="marker-1024238"></a>ga, fi<a id="marker-1024243"></a>gb<a id="fig, figa, figb"></a></h3>
<h4>
<a id="pgfId-1015972"></a>Description</h4>

<p>
<a id="pgfId-1015974"></a><a id="marker-1015973"></a>The <em>fig, figa, </em>and<em> figb</em> modifiers specify that the output of the check is the figure from which the edges originated, rather than the edges themselves or an error region between the edges. Without these <em>fig</em>, <em><a href="chap7.html#edge, edgea, edgeb">edge</a></em> , or <em><a href="chap7.html#wholeEdge, wholeEdgea, wholeEdgeb">wholeEdge</a></em> modifiers, the tool generates the error region between the edges as the output.</p>

<h4>
<a id="pgfId-1015975"></a>Modifiers</h4>

<p>
<a id="pgfId-1015976"></a>There are three <em>fig</em> modifiers and their outputs.</p>

<p><strong>
<a id="pgfId-1015977"></a><code>fig</code></strong></p>

<p class="webflare-indent1">
<a id="pgfId-1026481"></a> Outputs the figures of <em>both layers</em> in a two-layer check, or outputs the figures of the single layer in a single-layer check. </p>

<p><strong>
<a id="pgfId-1026486"></a><code>figa</code></strong></p>

<p class="webflare-indent1">
<a id="pgfId-1026489"></a> Outputs the figure of the<em> first layer</em> in a two-layer check. Not available in a single-layer check.</p>

<p><strong>
<a id="pgfId-1026494"></a><code>figb</code></strong></p>

<p class="webflare-indent1">
<a id="pgfId-1026497"></a> Outputs the figure of the <em>second layer</em> in a two-layer check. Not available in a single-layer check.</p>
<p>
<a id="pgfId-1016001"></a>The following figure illustrates these modifiers.</p>

<p>
<a id="pgfId-1016708"></a></p>
<div class="webflare-div-image">
<img width="610" height="209" src="images/chap7-40.gif" /></div>
<h4>
<a id="pgfId-1016002"></a>Examples</h4>

<p>
<a id="pgfId-1016003"></a>The following example outputs <em>cut</em> shapes violating spacing of less than 2.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1016004"></a>drc( cut sep &lt; 2 fig )</pre>

<p>
<a id="pgfId-1016005"></a>The following example outputs<em> cut</em> shapes enclosed by <em>metal</em> less than 2.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1016006"></a>drc( metal cut enc &lt; 2 figb )</pre>

<p>
<a id="pgfId-1016007"></a>The following example outputs <em>via</em> and <em>gate </em>shapes whose edges are parallel and whose spacing is less than 2.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1016008"></a>drc( via gate sep &lt; 2 parallel fig )</pre>

<p>
<a id="pgfId-1016009"></a>The following example outputs <em>metal</em> shapes parallel to<em> poly</em> shapes that violate spacing by less than 2. The<em> metal </em>shapes are then trimmed to positive apposition.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1016010"></a>drc( metal poly sep &lt; 2 opposite parallel figa )</pre>
<h3>
<a id="pgfId-1020022"></a><a id="29140"></a>whole<a id="marker-1024250"></a>Edge, whole<a id="marker-1024259"></a>Edgea, <a id="wholeEdge, wholeEdgea, wholeEdgeb"></a>whole<a id="marker-1024264"></a>Edgeb</h3>
<h4>
<a id="pgfId-1020023"></a>Description</h4>

<p>
<a id="pgfId-1020024"></a>The <em>wholeEdge, wholeEdgea, </em>and<em> wholeEdgeb</em> modifiers specify that the edges in error become the output of the check rather than the error region between the edges, the portion of the edges forming the error region, or the figures themselves. Without these <em>wholeEdge</em>, <em><a href="chap7.html#fig, figa, figb">fig</a></em>, or <em><a href="chap7.html#edge, edgea, edgeb">edge</a></em> modifiers, the tool will generate the error region between the edges as the output. </p>

<h4>
<a id="pgfId-1020027"></a>Modifiers</h4>

<p>
<a id="pgfId-1020028"></a>The three edge modifiers and their outputs are as follows:</p>

<p><strong>
<a id="pgfId-1020029"></a><code>wholeEdge</code></strong></p>

<p class="webflare-indent1">
<a id="pgfId-1026504"></a> Outputs the edges of <em>both layers</em> in a two-layer check, or outputs the edges of the single layer in a single-layer check. </p>

<p><strong>
<a id="pgfId-1026509"></a><code>wholeEdgea</code></strong></p>

<p class="webflare-indent1">
<a id="pgfId-1026512"></a> Outputs the edge of the <em>first layer</em> in a two-layer check. Not available in a single-layer check.</p>

<p><strong>
<a id="pgfId-1026517"></a><code>wholeEdgeb</code></strong></p>

<p class="webflare-indent1">
<a id="pgfId-1026520"></a> Outputs the edge of the <em>second layer</em> in a two-layer check. Not available in a single-layer check.</p>

<h4>
<a id="pgfId-1020032"></a>Examples</h4>

<p>
<a id="pgfId-1020033"></a>The following example flags cut edges less than 2.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1020034"></a>drc( cut sep &lt; 2 wholeEdge )</pre>

<p>
<a id="pgfId-1020035"></a>The following example flags cut edges enclosed by <em>metal</em> less than 2.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1020036"></a>drc( metal cut encl &lt; 2 wholeEdgeb )</pre>

<p>
<a id="pgfId-1020037"></a>The following example flags parallel <em>via</em> and<em> gate</em> edges with spacing less than 2.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1020038"></a>drc( via gate sep &lt; 2 parallel wholeEdge )</pre>

<p>
<a id="pgfId-1020039"></a>The following example flags those portions of the edges of<em> metal </em>shapes that are parallel and separated by less than 2 from the <em>poly </em>shapes.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1020047"></a>drc( metal poly sep &lt; 2 opposite parallel wholeEdgea )</pre>
<h2>
<a id="pgfId-1016011"></a>Alignment and Registration Modifiers</h2>

<p>
<a id="pgfId-1016622"></a>The alignment and registration modifiers allow you to simulate the effects of alignment and registration errors in the fabrication process. The following alignment and registration modifiers are available:</p>
<ul><li>
<a id="pgfId-1016623"></a><a href="chap7.html#65555">normalGrow</a></li><li>
<a id="pgfId-1016624"></a><a href="chap7.html#83204">squareGrow</a></li></ul>


<h3>
<a id="pgfId-1016013"></a><a id="marker-1024269"></a><a id="65555"></a>nor<a id="marker-1024276"></a>malGrow</h3>
<h4>
<a id="pgfId-1016014"></a>Description</h4>

<p>
<a id="pgfId-1016015"></a>Specify the <em>normalGrow</em> modifier when you want to simulate the effect of mask misalignment during a DRC dimensional check.<a id="marker-1016016"></a></p>
<p>
<a id="pgfId-1016017"></a>The modifier only affects the manner in which corner to corner and corner to edge dimensional checks are made.</p>
<p>
<a id="pgfId-1016018"></a>The effect of this modifier is the same as if the shape whose spacing you want to check is grown by the dimensional value you specified with this modifier before the normal spacing check is applied. The shape is not actually grown but the effect of the checking is the same as if it had been.</p>
<p>
<a id="pgfId-1016019"></a>The form of the grow applied by this modifier is the same as the grow applied by the <em>geomSize</em> command.</p>
<p>
<a id="pgfId-1016020"></a>You can use this modifier in conjunction with the normal DRC checks, such as <em>sep </em>and the registration modifier <em>squareGrow</em>. When you use <em>normalGrow</em> in conjunction with <em>squareGrow</em>, the order in which you specify the modifiers defines the order in which the original shape is grown.</p>
<p>
<a id="pgfId-1016024"></a>Refer to the &#8220;<a href="chap7.html#71150">How DRC Performs Checks</a>&#8221; section for more information.</p>

<h4>
<a id="pgfId-1016025"></a>Example</h4>

<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1016026"></a>drc( layer1 layer2 sep &lt; 5 normalGrow = 0.8 squareGrow = 1.0 )</pre>
<p>
<a id="pgfId-1016027"></a>In this example, the effect can be described by</p>
<ul><li>
<a id="pgfId-1016028"></a>Applying a <em>normalGrow</em> of 0.8 to both of the shapes involved in the spacing check.</li><li>
<a id="pgfId-1016029"></a>Applying a <em>squareGrow</em> of 1.0 to the two shapes generated by the previous step.</li><li>
<a id="pgfId-1016030"></a>Applying a normal separation check of 1.4 to the two shapes generated by the two previous steps. The value of 1.4 is calculated from the original value of 5 minus the sum of both grow values on both shapes, for example, 0.8 + 0.8 + 1.0 + 1.0.</li></ul>



<h3>
<a id="pgfId-1016032"></a><a id="83204"></a>square<a id="marker-1024283"></a>Grow</h3>
<h4>
<a id="pgfId-1016033"></a>Description</h4>

<p>
<a id="pgfId-1016035"></a>Specify the <em>squareGrow</em> modifier when you want to simulate the effect of mask registration displacement during a DRC dimensional check. The modifier only affects the manner in which corner to corner and corner to edge dimensional checks are made.<a id="marker-1016034"></a></p>
<p>
<a id="pgfId-1016036"></a>The effect of this modifier is the same as if the shape whose spacing you want to check is grown by the dimensional value you specified with this modifier before the normal spacing check is applied. The shape is not actually grown but the affect of the checking is the same as if it had been. The form of the grow is not the conventional grow used by the <em>geomSize</em> command.</p>
<p>
<a id="pgfId-1016037"></a>You can visualize the grow effect of this modifier by drawing a square whose side dimension is equal to the dimension specified in this modifier. You trace the square around the outside of the shape you want to check while keeping the edges of the square parallel to the circuit axes. The area encompassed by the trace defines the dimensional bounds of the check.</p>
<p>
<a id="pgfId-1016038"></a>You can use this modifier in conjunction with the normal DRC checks, such as <em>sep</em> and the alignment modifier <em>normalGrow</em>. When you use it in conjunction with <em>normalGrow</em>, the order in which you specify the modifiers defines the order in which the original shape is grown prior to the spacing check.</p>
<p>
<a id="pgfId-1021072"></a>Refer to the <a href="chap7.html#71150">&#8220;How DRC Performs Checks&#8221;</a>. </p>
<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1021073"></a>You can use the <em>squareGrow </em>modifier in DRC for all checks, but the grow direction is appropriate to the check being used. For example, </div>
<ul><li>
<a id="pgfId-1019594"></a><em>width</em> is an inside edge to an inside edge checking of the same polygon, and <em>ovlp</em> is an inside edge to an inside edge checking of different polygons. In the case of both <em>width</em> and <em>ovlp</em>, the grow direction is towards the inside. </li><li>
<a id="pgfId-1019595"></a><em>sep</em> (separation) rule is an outside-to-outside edge spacing check of separate polygons. In the case of <em>sep</em>, the grow direction is towards the outside.</li></ul>


<h4>
<a id="pgfId-1016043"></a>Example</h4>

<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1016621"></a>drc( layer1 layer2 sep &lt; 5 normalGrow = 0.8 squareGrow = 1.0 )</pre>
<p>
<a id="pgfId-1016045"></a>In this example, the effect can be described by</p>
<ul><li>
<a id="pgfId-1016046"></a>Applying a <em>normalGrow</em> of 0.8 to both of the shapes involved in the spacing check.</li><li>
<a id="pgfId-1016047"></a>Applying a <em>squareGrow</em> of 1.0 to the two shapes generated by the previous shape.</li><li>
<a id="pgfId-1016048"></a>Applying a normal separation check of 1.4 to the two shapes generated by the two previous steps. The value of 1.4 is calculated from the original value of 5 minus the sum of both grow values on both shapes., for example, 0.8 + 0.8 + 1.0 + 1.0.</li></ul>



<h2>
<a id="pgfId-1019898"></a>Other Modifiers<a id="Output Modifiers"></a></h2>

<p>
<a id="pgfId-1019899"></a><em>Other</em> modifiers let you change the format of the input for a DRC check and the message associated with the DRC error flag.</p>
<ul><li>
<a id="pgfId-1023651"></a><a href="chap7.html#91487">message</a></li><li>
<a id="pgfId-1023656"></a><a href="chap7.html#75040">raw</a></li></ul>

<p>
<a id="pgfId-1023646"></a></p>

<h3>
<a id="pgfId-1016055"></a><a id="91487"></a>mes<a id="marker-1024290"></a>sage<a id="message"></a></h3>
<h4>
<a id="pgfId-1016056"></a>Description</h4>

<p>
<a id="pgfId-1016059"></a>The <em>message</em> modifier is a text string enclosed in quotes that annotates an error result from a check. The <em>message</em><a id="marker-1016058"></a> modifier does not limit the conditions of the check.</p>
<p>
<a id="pgfId-1016061"></a>Each <a id="marker-1016060"></a>error has a property associated with it that contains a text string. The <em>Markers &#8211; Explain</em> command in the Verify menu displays this text string when requested. Without the <em>message</em> modifier, the text string is the check itself. </p>

<h4>
<a id="pgfId-1016062"></a>Examples</h4>

<p>
<a id="pgfId-1016063"></a>This example flags the separation of <em>metal</em> to <em>metal</em> regions, then fixes a message on it.</p>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1016064"></a>drc( metal sep &lt; 3 &quot;metal separation of 3. Rule 3.1.5 &quot; )</pre>
<p>
<a id="pgfId-1016065"></a>This example flags parallel <em>poly</em> to<em> metal</em> spacings less than 2 and fixes a message to it.</p>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1024298"></a>drc( metal poly sep &lt; 2 opposite parallel <br /> &quot;reflection condition&quot; )</pre>

<h3>
<a id="pgfId-1024302"></a><a id="75040"></a>ra<a id="marker-1024307"></a>w<a id="raw"></a></h3>
<h4>
<a id="pgfId-1024303"></a>Description</h4>

<p>
<a id="pgfId-1016073"></a>Specify the <em>raw </em>modifier when you want the layers checked to remain unmerged during checking. Overlapping and butting figures are not combined into a single figure prior to performing the check. The <em>raw </em><a id="marker-1016072"></a>modifier only applies to original graphics layers and derived layers output by commands that produce unmerged shapes.If an input layer is merged when processed by the command, no error is produced, and the command acts as if the data were raw but does not have any overlapping or butting shapes.</p>

<h4>
<a id="pgfId-1016074"></a>Examples</h4>

<p>
<a id="pgfId-1016075"></a>This example inputs <em>metal</em> data unmerged and checks it for spacing violations of less than 3.</p>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1016076"></a>drc( &quot;metal&quot; sep &lt; 3 raw )</pre>
<p>
<a id="pgfId-1016077"></a>This example inputs <em>poly</em> and <em>cut</em> data unmerged and checks for <em>poly</em> enclosure of <em>cut</em> less than 2.</p>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1016078"></a>drc( &quot;poly&quot; &quot;cut&quot; enc &lt; 2 opposite raw )</pre>

<br /><a href="#pagetop">Return to top</a><br /></div>
<!-- Begin Buttons --><!-- End Buttons -->
<footer><nav class="navigation"><b><em><a href="chap6.html" id="prev" title="Connectivity Extraction Concepts">Connectivity Extraction Concep ...</a></em></b><b><em><a href="chap8.html" id="nex" title="Models of Device Extraction">Models of Device Extraction</a></em></b></nav><div>
            For further assistance, contact <a href="https://support.cadence.com">Cadence Online Support</a>. Copyright &#169; 2023, <a href="https://www.cadence.com">Cadence Design Systems, Inc.</a> All rights reserved. 
          </div></footer>
 

 <div id="cad_image_modal" style="background-color: rgba(0, 0, 0, 0.6);"><center id="cad_image_modal_center">&#160;⠀ </center><span style="margin-right:50px;margin-top:100px;font-weight:bold;font-size:20px;background:#e5e5e5;border:1px solid #e5e5e5;border-radius:25px;height:30px;width:20px;padding-left:6px;padding-top:2px;color: black;" onclick="document.querySelector('#cad_image_modal').classList.remove('opac');">X</span></div> 

</body></html>