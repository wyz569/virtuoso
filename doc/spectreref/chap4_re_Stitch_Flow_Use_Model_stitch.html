
<html><head><title>Stitch Flow Use Model (stitch)</title><meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="Approver" content="Technical Publications" />
<meta name="Author" content="rrohit" />
<meta name="CreateDate" content="2023-08-31" />
<meta name="CreateTime" content="1693484715" />
<meta name="DataType" content="Manuals" />
<meta name="Description" content="Provides reference information on the Spectre circuit simulator." />
<meta name="DocTitle" content="Spectre Circuit Simulator Reference" />
<meta name="DocType" content="Reference" />
<meta name="FileTitle" content="Stitch Flow Use Model (stitch)" />
<meta name="FileType" content="Chapter" />
<meta name="FMWikiRelease" content="FM-Wiki-4.0.0" />
<meta name="Keyword" content="spectreref" />
<meta name="Language" content="English" />
<meta name="ModifiedDate" content="2023-08-31" />
<meta name="ModifiedTime" content="1693484715" />
<meta name="NextFile" content="chap4_re_Subcircuit_Definitions_subckt.html" />
<meta name="Order" content="2" />
<meta name="Group" content="Spectre Simulator" />
<meta name="Platform" content="Custom IC Design" />
<meta name="PrevFile" content="chap4_re_SpectreRF_Summary_spectrerf.html" />
<meta name="c_product" content="Spectre" />
<meta name="Product" content="Spectre" />
<meta name="ProductFamily" content="Spectre" />
<meta name="ProductVersion" content="23.1" />
<meta name="RightsManagement" content="Copyright 2023 Cadence Design Systems Inc." />
<meta name="Title" content="Spectre Circuit Simulator Reference -- Stitch Flow Use Model (stitch)" />
<meta name="Keywords" content="" />
<meta name="topic_type" content="" />
<meta name="reference_type" content="" />
<meta name="prod_feature" content="" />
<meta name="prod_subfeature" content="" />
<meta name="new_topic" content="No" />
<meta name="spotlight_topic" content="0" />
<meta name="Version" content="23.1" />
<meta name="SpaceKey" content="spectreref231" />
<meta name="webflare-version" content="2.5" />
<link rel="stylesheet" href="styles/webflare.css" type="text/css" />


  <script>/*<![CDATA[*/
 document.addEventListener("DOMContentLoaded", function(event) {  document.querySelectorAll("img").forEach((img, index) => {
if (img.hasAttribute("usemap")){return;}else{img.classList.add("cursorclass");} img.addEventListener("click", (e) => {if(img.hasAttribute("usemap")){            img.setAttribute("style","cursor:none;");return;};document.querySelector("#cad_image_modal").classList.add("opac");document.querySelector("#cad_image_modal_center").innerHTML = `<img style="position:absolute;top:0;bottom:0;left:0;right:0;margin: auto;max-height:95%;"  src="${e.target.src}">`;});});});
/*]]>*/</script> 




 <style>/*<![CDATA[*/
.cursorclass{cursor:pointer;}#cad_image_modal{position:fixed;left:0;top:0;width:100%;background:#00000099;overflow:hidden;height:0;opacity:0;transition: height 0ms 1s, opacity 1s 0ms;}#cad_image_modal.opac{height: 100%;opacity: 1;transition: height 0ms 0ms, opacity 1s 0ms;}#cad_image_modal span{position:fixed;right:10px;top:10px;cursor:pointer;color:#fff;}
/*]]>*/</style> 
</head><body style="background-color: #FFFFFF;"><a name="pagetop"></a>
<!-- Begin Buttons -->
<header><div class="docHeadr">Product Documentation<img src="icons/Cadence-Logo.jpg" /></div><nav class="blueHead"><ul><li><a class="content" href="spectrerefTOC.html">Contents</a></li><li><a class="prev" href="chap4_re_SpectreRF_Summary_spectrerf.html" title="SpectreRF Summary (spectrerf)">SpectreRF Summary (spectrerf)</a></li><li style="float: right;"><a class="viewPrint" href="spectreref.pdf">View/Print PDF</a></li><li style="float: right;margin-right: 25px;"><a class="nextd" href="chap4_re_Subcircuit_Definitions_subckt.html" title="Subcircuit Definitions (subckt)">Subcircuit Definitions (subckt ...</a></li></ul></nav></header>
<!-- End Buttons -->
<h5><center>Spectre Circuit Simulator Reference<br />Product Version 23.1, September 2023</center></h5><div id="main-content" style="min-height: 50vh; margin-left: 5%; margin-right: 2%;"><a name="#firstpage"></a>

<a id="Filename:re_Stitch_Flow_Use_Model_stitch" title="Stitch Flow Use Model (stitch)"></a><h2>
<a id="pgfId-1049005"></a><a id="94713"></a>Stitch Flow Use Model (stitch)<a id="marker-1049004"></a></h2>
<h4>
<a id="pgfId-1049007"></a>Description<a id="marker-1049006"></a></h4>

<p>
<a id="pgfId-1049008"></a>Stitching enables Spectre APS to plug in the parasitic elements while simulation is running. Compared to the flat RC netlist and the hierarchical RC netlist approaches, the Stitching flow has the following advantages:</p>
<ul><li>
<a id="pgfId-1049009"></a>Reuse of the pre-layout simulation test-bench. There is no need to change the probe and the measure statements.</li><li>
<a id="pgfId-1049010"></a>What-if analysis powered by selective stitching.</li></ul>

<p>
<a id="pgfId-1049011"></a>Spectre APS stitching is enabled by options.</p>

<h4>
<a id="pgfId-1049013"></a>Parasitic File Loading Parameters</h4>

<ul><li>
<a id="pgfId-1049014"></a><code>spf</code><br />
<a id="pgfId-1049015"></a>This option specifies the to-be-stitched DSPF file and its stitching scope. The syntax is <code>spf=&quot;scope filename&quot;</code>. The scope can be a subcircuit or an instance. When a subcircuit is specified as the scope, the DSPF file is stitched to all the instances of that subcircuit. When an instance is specified as the scope, the DSPF file is stitched to that instance only. Multiple DSPF files can be specified for stitching by using the option multiple times.<br />
<a id="pgfId-1049016"></a>Example:<pre class="webflare-pre-block webflare-courier-new" id="#id1049017">
<a id="pgfId-1049017"></a>spf=&quot;mem mem.dspf&quot;</pre></li><li>
<a id="pgfId-1049018"></a><code>dpf</code><br />
<a id="pgfId-1049019"></a>This option specifies the to-be-stitched DPF file and its stitching scope. The syntax is <code>dpf=&quot;scope filename&quot;</code>. The scope can be a subcircuit or an instance. When a subcircuit is specified as the scope, the DPF file is stitched to all the instances of that subcircuit. When an instance is specified as the scope, the DPF file is stitched to that instance only. Multiple DPF files can be specified for stitching by using the option multiple times.<br />
<a id="pgfId-1049020"></a>Example:<pre class="webflare-pre-block webflare-courier-new" id="#id1049021">
<a id="pgfId-1049021"></a>dpf=&quot;X1.XPLL PLL.dpf&quot; dpf=&quot;X1.XMEM mem.dpf&quot;</pre>
<a id="pgfId-1049022"></a>This means that the <code>PLL.dpf</code> file needs to be stitched to the <code>X1.XPLL</code> instance and the <code>mem.dpf</code> file needs to be stitched to the<code> X1.XMEM</code> instance.</li><li>
<a id="pgfId-1049023"></a><code>spef</code><br />
<a id="pgfId-1049024"></a>This option specifies the to-be-stitched SPEF file and its stitching scope. The syntax is <code>spef=&quot;scope filename&quot;</code>. The scope can be a subcircuit or an instance. When a subcircuit is specified as the scope, the SPEF file is stitched to all the instances of that subcircuit. When an instance is specified as the scope, the SPEF file is stitched to that instance only. Multiple SPEF files can be specified for stitching by using the option multiple times.<br />
<a id="pgfId-1049025"></a>Example:<pre class="webflare-pre-block webflare-courier-new" id="#id1049026">
<a id="pgfId-1049026"></a>spef=&quot;adc a.spef&quot;</pre></li></ul>













<h4>
<a id="pgfId-1049027"></a>Stitching Parsing Options</h4>

<ul><li>
<a id="pgfId-1067008"></a><code>spfscale</code><br />
<a id="pgfId-1067009"></a>This option specifies the scaling factor of all the elements in the parasitic files (DSPF/SPEF/DPF). For example, consider that the width of a device in the DSPF file is w=2. If spfscale=1.0e-6 is used, the actual width will be w=2.0e-6.</li><li>
<a id="pgfId-1080370"></a><code>spfscalec</code><br />
<a id="pgfId-1080392"></a>This option specifies the scaling factor of all the capacitors in the parasitic files (DSPF/SPEF/DPF). Example, suppose a capacitor&#39;s value in the DSPF file is 2. If <code>spfscalec=1.0e-15</code> is used, the actual capacitor value will be 2.0e-15.</li><li>
<a id="pgfId-1080426"></a><code>spfscaler</code><br />
<a id="pgfId-1080427"></a>This option specifies the scaling factor of all the resistors in the parasitic files (DSPF/SPEF/DPF). Example, suppose a resistor&#8217;s value in the DSPF file is 2. If <code>spfscaler=1.0e-3</code> is used, the actual capacitor value will be <code>w=2.0e-3</code>.</li><li>
<a id="pgfId-1060136"></a><code>spfswapterm</code><br />
<a id="pgfId-1060137"></a>This option specifies the swappable terminals of a subcircuit macro-model. The syntax is <code>spfswapterm=&quot;terminal1 terminal2 subcktname&quot;</code>.<br />
<a id="pgfId-1049030"></a>Example:<pre class="webflare-pre-block webflare-courier-new" id="#id1049031">
<a id="pgfId-1049031"></a>spfswapterm=&quot;n1 n2 nch_mac&quot;</pre>
<a id="pgfId-1049032"></a>This indicates that terminals <code>n1</code> and <code>n2</code> of <code>subckt nch_mac</code> are swappable. In general, this is applicable to devices that are modeled by subcircuits. Multiple <code>spfswapterm</code> statements are supported.</li><li>
<a id="pgfId-1049033"></a><code>spfxtorprefix</code><br />
<a id="pgfId-1049034"></a>This option specifies the prefix in the names (devices and nets) in the DSPF/SPEF/DPF file. The device names in the prelayout netlist and the DSPF/SPEF file often do not match. The <code>spfxtorprefix</code> option can be used to help match the device names. The syntax is <code>spfxtorprefix=&quot;&lt;substring&gt; [&lt;replace_substring&gt;]&quot;</code>.<br />
<a id="pgfId-1049035"></a>Example:<pre class="webflare-pre-block webflare-courier-new" id="#id1049036">
<a id="pgfId-1049036"></a>spfxtorprefix=&quot;XM X&quot;</pre>
<a id="pgfId-1049037"></a><code>XX1</code>/<code>XM1</code> exists in the prelayout netlist but the corresponding device name in the DSPF file is <code>XMX1</code>/<code>XM1</code>. This option will change <code>XM</code> to <code>X</code>.</li><li>
<a id="pgfId-1049038"></a><code>spfaliasterm</code><br />
<a id="pgfId-1049039"></a>Sometimes the terminal names of devices in DSPF/SPEF/DPF files are different from those in the simulation model library. This happens often in the technology nodes that uses subcircuits to model devices. The syntax is <code>spfaliasterm=&quot;&lt;model|subckt&gt;</code> <code>&lt;prelayout_term1&gt;=&lt;spf_alias1&gt; &lt;prelayout_term2&gt;=&lt;spf_alias2&gt;</code>... <code>&lt;prelayout_termN&gt;=&lt;spf_aliasN&gt;&quot;</code>. Multiple statements are supported.<br />
<a id="pgfId-1049040"></a>Example:<pre class="webflare-pre-block webflare-courier-new" id="#id1049041">
<a id="pgfId-1049041"></a>spfaliasterm=&quot;nfet_mac n1=D n2=G n3=S n4=B&quot;</pre>
<a id="pgfId-1049042"></a>This means that in subckt <code>nfet_mac</code>, terminal <code>n1</code> corresponds to terminal <code>D</code> in the DSPF file, <code>n1</code> corresponds to terminal <code>G</code>, <code>n3</code> corresponds to terminal <code>S</code> and <code>n4</code> corresponds to terminal <code>B</code>.</li><li>
<a id="pgfId-1049043"></a><code>speftriplet</code><br />
<a id="pgfId-1049044"></a>This option specifies the value that should be used for stitching in the SPEF file. This is effective only when the values in the SPEF file are represented by triplets (for instance, <code>0.325:0.41:0.495</code>). Default value is 2. Possible values are 1, 2 and 3.</li><li>
<a id="pgfId-1080471"></a><code>spfinstancesection</code><br />
<a id="pgfId-1080472"></a>This option controls the backannotation of device parameters in the instance section of the DSPF file. If <code>spfinstancesection</code> is turned off, the instance section is ignored (that is, the device parameters are not changed during stitching). Default is on.</li><li>
<a id="pgfId-1080473"></a><code>spfbusdelim = busdelim_schematic [busdelim_parasitic]</code><br />
<a id="pgfId-1080474"></a>This option maps the bus delimiter between schematic netlist and parasitic file (i.e. DSPF, SPEF, or DPF). The option defines the bus delimiter in the schematic netlist, and optionally the bus delimiter in the parasitic file. By default, the bus delimiter of the parasitic file is taken from the parasitic file header (i.e. <code>*|BUSBIT []</code>, <code>*|BUS_BIT []</code>, or <code>*|BUS_DELIMITER []</code>). If the bus delimiter is not defined in the parasitic file header, you need to specify it by using the <code>spfbusdelim</code> option in schematic netlist.<br />
<a id="pgfId-1080475"></a>Example:<ul><li>
<a id="pgfId-1080476"></a><code>spfbusdelim=&lt;&gt;</code> - <code>A&lt;1&gt;</code> in the schematic netlist is mapped to <code>A_1</code> in the DSPF file, if the bus delimiter header in the DSPF file is &quot;<code>_</code>&quot;.</li><li>
<a id="pgfId-1080477"></a>s<code>pfbusdelim=@ []</code> - <code>A@1</code> in the schematic netlist is mapped to to <code>A[1]</code> in the DSPF file (the bus delimiter in DSPF header will be ignored).</li></ul></li><li>
<a id="pgfId-1080478"></a><code>spfinstarraydelim</code><br />
<a id="pgfId-1080479"></a>This option specifies the supplemental bus delimiter, if more than one bus delimiter is used in the pre-layout netlist (usually for instance array indexing). This option is similar to <code>spfbusdelim</code>.</li></ul>
































<h4>
<a id="pgfId-1049045"></a>Selective Stitching Options</h4>

<ul><li>
<a id="pgfId-1049046"></a><code>spfcnet</code><br />
<a id="pgfId-1049047"></a>This option specifies the net that has its total capacitance stitched. All other parasitic components, say parasitic resistors, associated with this net are ignored. The full hierarchical names are required. Multiple statements are supported. Wildcards are supported.<br />
<a id="pgfId-1049048"></a>Example:<pre class="webflare-pre-block webflare-courier-new" id="#id1049049">
<a id="pgfId-1049049"></a>spfcnet=X1.netA</pre></li><li>
<a id="pgfId-1049050"></a><code>spfcnetfile</code><br />
<a id="pgfId-1049051"></a>This option has the same functionality as <code>spfcent</code>.However, it accepts a text file in which all the C-only stitched nets are listed. Only one file can be specified. The syntax is <code>spfcnetfile=&quot;filename&quot;</code>. The format in the file is one line per net.<br />
<a id="pgfId-1049052"></a>Example:<pre class="webflare-pre-block webflare-courier-new" id="#id1049053">
<a id="pgfId-1049053"></a>spfcnetfile=&quot;nets.tex&quot;</pre>
<a id="pgfId-1049054"></a>The format in the nets.tex is:<pre class="webflare-pre-block webflare-courier-new" id="#id1049055">
<a id="pgfId-1049055"></a>netA</pre><pre class="webflare-pre-block webflare-courier-new" id="#id1049056">
<a id="pgfId-1049056"></a>netB</pre><pre class="webflare-pre-block webflare-courier-new" id="#id1049057">
<a id="pgfId-1049057"></a>netC</pre></li><li>
<a id="pgfId-1049058"></a><code>spfrcnet</code><br />
<a id="pgfId-1049059"></a>This option specifies the name of the net to be stitched with parasitic resistors and capacitors. The other nets are stitched with lumped total capacitances. Multiple statements are supported. Wildcards are supported and you can specify multiple nets. Full hierarchical names are required.<br />
<a id="pgfId-1049060"></a>Example:<pre class="webflare-pre-block webflare-courier-new" id="#id1049061">
<a id="pgfId-1049061"></a>spfrcnet=netA</pre></li><li>
<a id="pgfId-1049062"></a><code>spfrcnetfile</code><br />
<a id="pgfId-1049063"></a>This option has the same functionality as <code>spfrcnet</code>. However, it accepts a text file in which all the RC stitched nets are specified. Only one file can be specified. The syntax is <code>spfrcnetfile=&quot;filename&quot;</code>. The format in the file is one line per net.<br />
<a id="pgfId-1060397"></a>Example:<pre class="webflare-pre-block webflare-courier-new" id="#id1060398">
<a id="pgfId-1060398"></a>spfrcnetfile=&quot;nets.tex&quot;</pre>
<a id="pgfId-1060399"></a>The format in the nets.tex is:<pre class="webflare-pre-block webflare-courier-new" id="#id1060400">
<a id="pgfId-1060400"></a>netA</pre><pre class="webflare-pre-block webflare-courier-new" id="#id1049068">
<a id="pgfId-1049068"></a>netB</pre><pre class="webflare-pre-block webflare-courier-new" id="#id1049069">
<a id="pgfId-1049069"></a>netC</pre></li><li>
<a id="pgfId-1049070"></a><code>spfnetcmin</code><br />
<a id="pgfId-1049071"></a>This option allows you to select the net for stitching by the value of its total node capacitance. If a net&#8217;s total node capacitance exceeds <code>spfnetcmin</code>, all parasitics associated with the net are stitched correctly; otherwise, only the total capacitance is added to the net node.<br />
<a id="pgfId-1049072"></a>Example:<pre class="webflare-pre-block webflare-courier-new" id="#id1049073">
<a id="pgfId-1049073"></a>spfnetcmin=1.0e-6</pre></li><li>
<a id="pgfId-1049074"></a><code>spfskipnet</code><br />
<a id="pgfId-1049075"></a>This option specifies the net to be skipped for stitching, that is, all parasitic components of the net are not stitched. Wildcards and multiple statements are supported.<br />
<a id="pgfId-1049076"></a>Example:<pre class="webflare-pre-block webflare-courier-new" id="#id1049077">
<a id="pgfId-1049077"></a>spfskipnet=X1.nodeA</pre></li><li>
<a id="pgfId-1049078"></a><code>spfskipnetfile</code><br />
<a id="pgfId-1049079"></a>This option allows you to specify the nets to be skipped as a list in the text file called <code>file_name</code>. The syntax is <code>spfskipnetfile=&quot;filename&quot;</code>. Only one file can be specified. The format in the file is one line per net.<br />
<a id="pgfId-1049080"></a>Example:<pre class="webflare-pre-block webflare-courier-new" id="#id1049081">
<a id="pgfId-1049081"></a>spfskipnetfile=&quot;nets.tex&quot;</pre>
<a id="pgfId-1049082"></a><code>nets.tex</code> file format is:<pre class="webflare-pre-block webflare-courier-new" id="#id1049083">
<a id="pgfId-1049083"></a>netA</pre><pre class="webflare-pre-block webflare-courier-new" id="#id1049084">
<a id="pgfId-1049084"></a>netB</pre><pre class="webflare-pre-block webflare-courier-new" id="#id1049085">
<a id="pgfId-1049085"></a>netC</pre></li></ul>








































<h4>
<a id="pgfId-1049086"></a>Stitching Message Control Option</h4>

<ul><li>
<a id="pgfId-1049087"></a><code>spfmsglimit</code><br />
<a id="pgfId-1049088"></a>This option specifies the maximum number of messages to be printed in the <code>spfrpt</code> file. The messages in the <code>spfrpt</code> file are categorized by their ID number (STITCH-ID). This option specifies the maximum number of messages for a particular type of messages by using their STITCH-ID. The syntax is <code>spfmsglimit=&quot;number STITCH-ID_1 STITCH-ID_2&quot;</code>. When STITCH-ID is not specified, the tool assigns the maximum message number limit to all messages categories (STITCH-IDs).<br />
<a id="pgfId-1049089"></a>Example:<pre class="webflare-pre-block webflare-courier-new" id="#id1049090">
<a id="pgfId-1049090"></a>spfmsglimit=&quot;10 STITCH-0010&quot;</pre>
<a id="pgfId-1049091"></a>This tells the tool to print not more than 10 messages for the STITCH-0010 message category, in the meantime, for the other message categories, the default maximum limit of 50 messages will apply.</li></ul>




<p>
<a id="pgfId-1086353"></a>For additional information, see <em><a actuate="user" class="URL" href="../spectreuser/chap13.html#stitching_support" show="replace" xml:link="simple">Parasitic Backannotation of DPSF/SPEF/DPF Files</a></em> in the <em>Spectre Classic Simulator, Spectre APS, Spectre X, and Spectre XPS User Guide</em>.</p>

<br /><a href="#pagetop">Return to top</a><br /></div>
<!-- Begin Buttons --><!-- End Buttons -->
<footer><nav class="navigation"><b><em><a href="chap4_re_SpectreRF_Summary_spectrerf.html" id="prev" title="SpectreRF Summary (spectrerf)">SpectreRF Summary (spectrerf)</a></em></b><b><em><a href="chap4_re_Subcircuit_Definitions_subckt.html" id="nex" title="Subcircuit Definitions (subckt)">Subcircuit Definitions (subckt ...</a></em></b></nav><div>
            For further assistance, contact <a href="https://support.cadence.com">Cadence Online Support</a>. Copyright &#169; 2023, <a href="https://www.cadence.com">Cadence Design Systems, Inc.</a> All rights reserved. 
          </div></footer>
 

 <div id="cad_image_modal" style="background-color: rgba(0, 0, 0, 0.6);"><center id="cad_image_modal_center">&#160;⠀ </center><span style="margin-right:50px;margin-top:100px;font-weight:bold;font-size:20px;background:#e5e5e5;border:1px solid #e5e5e5;border-radius:25px;height:30px;width:20px;padding-left:6px;padding-top:2px;color: black;" onclick="document.querySelector('#cad_image_modal').classList.remove('opac');">X</span></div> 

</body></html>