
<html><head><title>The Structural if-statement (if)</title><meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="Approver" content="Technical Publications" />
<meta name="Author" content="rrohit" />
<meta name="CreateDate" content="2023-08-31" />
<meta name="CreateTime" content="1693484713" />
<meta name="DataType" content="Manuals" />
<meta name="Description" content="Provides reference information on the Spectre circuit simulator." />
<meta name="DocTitle" content="Spectre Circuit Simulator Reference" />
<meta name="DocType" content="Reference" />
<meta name="FileTitle" content="The Structural if-statement (if)" />
<meta name="FileType" content="Chapter" />
<meta name="FMWikiRelease" content="FM-Wiki-4.0.0" />
<meta name="Keyword" content="spectreref" />
<meta name="Language" content="English" />
<meta name="ModifiedDate" content="2023-08-31" />
<meta name="ModifiedTime" content="1693484713" />
<meta name="NextFile" content="chap4_re_Include_File_include.html" />
<meta name="Order" content="2" />
<meta name="Group" content="Spectre Simulator" />
<meta name="Platform" content="Custom IC Design" />
<meta name="PrevFile" content="chap4_re_Initial_Conditions_ic.html" />
<meta name="c_product" content="Spectre" />
<meta name="Product" content="Spectre" />
<meta name="ProductFamily" content="Spectre" />
<meta name="ProductVersion" content="23.1" />
<meta name="RightsManagement" content="Copyright 2023 Cadence Design Systems Inc." />
<meta name="Title" content="Spectre Circuit Simulator Reference -- The Structural if-statement (if)" />
<meta name="Keywords" content="" />
<meta name="topic_type" content="" />
<meta name="reference_type" content="" />
<meta name="prod_feature" content="" />
<meta name="prod_subfeature" content="" />
<meta name="new_topic" content="No" />
<meta name="spotlight_topic" content="0" />
<meta name="Version" content="23.1" />
<meta name="SpaceKey" content="spectreref231" />
<meta name="webflare-version" content="2.5" />
<link rel="stylesheet" href="styles/webflare.css" type="text/css" />


  <script>/*<![CDATA[*/
 document.addEventListener("DOMContentLoaded", function(event) {  document.querySelectorAll("img").forEach((img, index) => {
if (img.hasAttribute("usemap")){return;}else{img.classList.add("cursorclass");} img.addEventListener("click", (e) => {if(img.hasAttribute("usemap")){            img.setAttribute("style","cursor:none;");return;};document.querySelector("#cad_image_modal").classList.add("opac");document.querySelector("#cad_image_modal_center").innerHTML = `<img style="position:absolute;top:0;bottom:0;left:0;right:0;margin: auto;max-height:95%;"  src="${e.target.src}">`;});});});
/*]]>*/</script> 




 <style>/*<![CDATA[*/
.cursorclass{cursor:pointer;}#cad_image_modal{position:fixed;left:0;top:0;width:100%;background:#00000099;overflow:hidden;height:0;opacity:0;transition: height 0ms 1s, opacity 1s 0ms;}#cad_image_modal.opac{height: 100%;opacity: 1;transition: height 0ms 0ms, opacity 1s 0ms;}#cad_image_modal span{position:fixed;right:10px;top:10px;cursor:pointer;color:#fff;}
/*]]>*/</style> 
</head><body style="background-color: #FFFFFF;"><a name="pagetop"></a>
<!-- Begin Buttons -->
<header><div class="docHeadr">Product Documentation<img src="icons/Cadence-Logo.jpg" /></div><nav class="blueHead"><ul><li><a class="content" href="spectrerefTOC.html">Contents</a></li><li><a class="prev" href="chap4_re_Initial_Conditions_ic.html" title="Initial Conditions (ic)">Initial Conditions (ic)</a></li><li style="float: right;"><a class="viewPrint" href="spectreref.pdf">View/Print PDF</a></li><li style="float: right;margin-right: 25px;"><a class="nextd" href="chap4_re_Include_File_include.html" title="Include File (include)">Include File (include)</a></li></ul></nav></header>
<!-- End Buttons -->
<h5><center>Spectre Circuit Simulator Reference<br />Product Version 23.1, September 2023</center></h5><div id="main-content" style="min-height: 50vh; margin-left: 5%; margin-right: 2%;"><a name="#firstpage"></a>

<a id="Filename:re_The_Structural_if-statement_if" title="The Structural if-statement (if)"></a><h2>
<a id="pgfId-1048420"></a><a id="94036"></a>The Structural if-statement (if)<a id="marker-1048419"></a></h2>
<h4>
<a id="pgfId-1048422"></a>Description<a id="marker-1048421"></a></h4>

<p>
<a id="pgfId-1048423"></a>The structural if-statement can be used to conditionally instantiate other instance statements.</p>

<h4>
<a id="pgfId-1068600"></a>Definition<a id="marker-1068599"></a></h4>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1068601"></a>if &lt;condition&gt; &lt;statement1&gt; [ else &lt;statement2&gt; ]</pre>

<p>
<a id="pgfId-1068603"></a>The condition is a Boolean expression based on the comparisons of various arithmetic expressions that are evaluated during circuit hierarchy flattening. The statement1 and statement2 fields can be ordinary instance statements, if-statements, or a list of these within braces ({}). The ordinary instance statements need a newline to terminate them. The <code>else</code> part is optional. When if-statements are nested without braces, an <code>else</code> matches the closest previous unmatched <code>if</code> at the same level.</p>
<p>
<a id="pgfId-1048428"></a>It is possible to have duplicate instance names within the if statement under strict topological conditions. These conditions are as follows:</p>
<ul><li>
<a id="pgfId-1048429"></a>References to an instance with duplicate names is possible only within a structural if statement that has both an &quot;if&quot; part and an &quot;else&quot; part. </li><li>
<a id="pgfId-1048431"></a>Both the &quot;if&quot; part and the &quot;else&quot; part must be a simple one-statement block, or another structural if statement to which these same rules apply.</li><li>
<a id="pgfId-1048434"></a>The duplicate instances must have the same number of terminals and be bound to the same list of nodes.</li><li>
<a id="pgfId-1048436"></a>The duplicate instances must refer to the same primitive or model.</li><li>
<a id="pgfId-1048437"></a>Where duplicate instances refer to a model, the underlying primitive must be the same.</li></ul>




<p>
<a id="pgfId-1048439"></a>This feature allows automatic model selection based on any netlist or subcircuit parameter. As an example, consider using Spectre&#8217;s inline subcircuits and structural if statement to implement automatic model selection based on bipolar device area. Here, the duplicate instances are the inline components.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1048440"></a>model npn_default bjt is=3.2e-16 va=59.8</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1048441"></a>model npn10x10 bjt is=3.5e-16 va=61.5</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1048442"></a>model npn20x20 bjt is=3.77e-16 va=60.5</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1048443"></a>// npn_mod chooses scaled models binned on area!</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1048444"></a>// if ( area &lt; 100e-12 ) use model npn10x10</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1048445"></a>// else if ( area &lt;&#160;&#160;400e-12 ) use model npn20x20</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1048446"></a>// else use model npn_default</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1048447"></a>inline subckt npn_mod (c b e s) </pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1048448"></a>  parameters area=5e-12</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1048449"></a>  if ( area &lt; 100e-12 ) {</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1048450"></a>      npn_mod (c b e s) npn10x10  // 10u * 10u, inline device</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1048451"></a>  } else if ( area &lt; 400e-12 ) {</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1048452"></a>      npn_mod (c b e s) npn20x20  // 20u * 20u, inline device</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1048453"></a>  } else {</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1048454"></a>      npn_mod (c b e s) npn_default       // 5u * 5u, inline device</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1048455"></a>  }</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1048456"></a>ends npn_mod</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1048457"></a>q1 (1 2 0 0) npn_mod area=350e-12&#160;&#160;       // gets 20x20 model </pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1048458"></a>q2 (1 3 0 0) npn_mod area=25e-12&#160;&#160;        // gets 10x10 model </pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1048459"></a>q3 (1 3 0 0) npn_mod area=1000e-12&#160;&#160;      // gets default model </pre>

<p>
<a id="pgfId-1086091"></a>For additional information, refer to the <em><a actuate="user" class="URL" href="../spectreuser/chap5.html#con_inst" show="replace" xml:link="simple">Conditional Instances</a></em> section in the <em>Spectre Classic Simulator, Spectre APS, Spectre X, and Spectre XPS User Guide</em>.</p>

<br /><a href="#pagetop">Return to top</a><br /></div>
<!-- Begin Buttons --><!-- End Buttons -->
<footer><nav class="navigation"><b><em><a href="chap4_re_Initial_Conditions_ic.html" id="prev" title="Initial Conditions (ic)">Initial Conditions (ic)</a></em></b><b><em><a href="chap4_re_Include_File_include.html" id="nex" title="Include File (include)">Include File (include)</a></em></b></nav><div>
            For further assistance, contact <a href="https://support.cadence.com">Cadence Online Support</a>. Copyright &#169; 2023, <a href="https://www.cadence.com">Cadence Design Systems, Inc.</a> All rights reserved. 
          </div></footer>
 

 <div id="cad_image_modal" style="background-color: rgba(0, 0, 0, 0.6);"><center id="cad_image_modal_center">&#160;â € </center><span style="margin-right:50px;margin-top:100px;font-weight:bold;font-size:20px;background:#e5e5e5;border:1px solid #e5e5e5;border-radius:25px;height:30px;width:20px;padding-left:6px;padding-top:2px;color: black;" onclick="document.querySelector('#cad_image_modal').classList.remove('opac');">X</span></div> 

</body></html>