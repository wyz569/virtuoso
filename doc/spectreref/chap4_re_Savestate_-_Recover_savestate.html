
<html><head><title>Savestate - Recover (savestate)</title><meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="Approver" content="Technical Publications" />
<meta name="Author" content="rrohit" />
<meta name="CreateDate" content="2023-08-31" />
<meta name="CreateTime" content="1693484714" />
<meta name="DataType" content="Manuals" />
<meta name="Description" content="Provides reference information on the Spectre circuit simulator." />
<meta name="DocTitle" content="Spectre Circuit Simulator Reference" />
<meta name="DocType" content="Reference" />
<meta name="FileTitle" content="Savestate - Recover (savestate)" />
<meta name="FileType" content="Chapter" />
<meta name="FMWikiRelease" content="FM-Wiki-4.0.0" />
<meta name="Keyword" content="spectreref" />
<meta name="Language" content="English" />
<meta name="ModifiedDate" content="2023-08-31" />
<meta name="ModifiedTime" content="1693484714" />
<meta name="NextFile" content="chap4_re_Sensitivity_Analyses_sens.html" />
<meta name="Order" content="2" />
<meta name="Group" content="Spectre Simulator" />
<meta name="Platform" content="Custom IC Design" />
<meta name="PrevFile" content="chap4_re_Output_Selections_save.html" />
<meta name="c_product" content="Spectre" />
<meta name="Product" content="Spectre" />
<meta name="ProductFamily" content="Spectre" />
<meta name="ProductVersion" content="23.1" />
<meta name="RightsManagement" content="Copyright 2023 Cadence Design Systems Inc." />
<meta name="Title" content="Spectre Circuit Simulator Reference -- Savestate - Recover (savestate)" />
<meta name="Keywords" content="" />
<meta name="topic_type" content="" />
<meta name="reference_type" content="" />
<meta name="prod_feature" content="" />
<meta name="prod_subfeature" content="" />
<meta name="new_topic" content="No" />
<meta name="spotlight_topic" content="0" />
<meta name="Version" content="23.1" />
<meta name="SpaceKey" content="spectreref231" />
<meta name="webflare-version" content="2.5" />
<link rel="stylesheet" href="styles/webflare.css" type="text/css" />


  <script>/*<![CDATA[*/
 document.addEventListener("DOMContentLoaded", function(event) {  document.querySelectorAll("img").forEach((img, index) => {
if (img.hasAttribute("usemap")){return;}else{img.classList.add("cursorclass");} img.addEventListener("click", (e) => {if(img.hasAttribute("usemap")){            img.setAttribute("style","cursor:none;");return;};document.querySelector("#cad_image_modal").classList.add("opac");document.querySelector("#cad_image_modal_center").innerHTML = `<img style="position:absolute;top:0;bottom:0;left:0;right:0;margin: auto;max-height:95%;"  src="${e.target.src}">`;});});});
/*]]>*/</script> 




 <style>/*<![CDATA[*/
.cursorclass{cursor:pointer;}#cad_image_modal{position:fixed;left:0;top:0;width:100%;background:#00000099;overflow:hidden;height:0;opacity:0;transition: height 0ms 1s, opacity 1s 0ms;}#cad_image_modal.opac{height: 100%;opacity: 1;transition: height 0ms 0ms, opacity 1s 0ms;}#cad_image_modal span{position:fixed;right:10px;top:10px;cursor:pointer;color:#fff;}
/*]]>*/</style> 
</head><body style="background-color: #FFFFFF;"><a name="pagetop"></a>
<!-- Begin Buttons -->
<header><div class="docHeadr">Product Documentation<img src="icons/Cadence-Logo.jpg" /></div><nav class="blueHead"><ul><li><a class="content" href="spectrerefTOC.html">Contents</a></li><li><a class="prev" href="chap4_re_Output_Selections_save.html" title="Output Selections (save)">Output Selections (save)</a></li><li style="float: right;"><a class="viewPrint" href="spectreref.pdf">View/Print PDF</a></li><li style="float: right;margin-right: 25px;"><a class="nextd" href="chap4_re_Sensitivity_Analyses_sens.html" title="Sensitivity Analyses (sens)">Sensitivity Analyses (sens)</a></li></ul></nav></header>
<!-- End Buttons -->
<h5><center>Spectre Circuit Simulator Reference<br />Product Version 23.1, September 2023</center></h5><div id="main-content" style="min-height: 50vh; margin-left: 5%; margin-right: 2%;"><a name="#firstpage"></a>

<a id="Filename:re_Savestate_-_Recover_savestate" title="Savestate - Recover (savestate)"></a><h2>
<a id="pgfId-1048877"></a><a id="21543"></a>Savestate - Recover (savestate)<a id="marker-1048876"></a></h2>
<h4>
<a id="pgfId-1048879"></a>Description<a id="marker-1048878"></a></h4>

<p>
<a id="pgfId-1048880"></a>Savestate-Recover is a transient analysis feature. It is a replacement for Checkpoint-Restart capability. </p>
<p>
<a id="pgfId-1048881"></a>The Checkpoint-Restart capability saves only the circuit solution for the timepoint at which the simulation is interrupted. Because there is no history information saved for the circuit, glitches, convergence issues, and inaccuracies can result when the simulation is resumed. The Savestate-Recover feature saves the complete state of the circuit, avoiding these issues.</p>
<p>
<a id="pgfId-1048882"></a>Savestate-Recover provides the following functions: </p>
<ul><li>
<a id="pgfId-1048883"></a>You have the option to save circuit information at set intervals or at multiple points during transient analysis. If the simulation halts unexpectedly, you can restart transient analysis from any saved timepoint. </li><li>
<a id="pgfId-1048884"></a>You can experiment with different accuracy settings over different transient time periods to obtain the optimal speed/accuracy trade-off. </li></ul>


<h4>
<a id="pgfId-1059366"></a>Requirements for Savestate-Recover</h4>

<p>
<a id="pgfId-1059397"></a>When the simulation is restarted: </p>
<ul><li>
<a id="pgfId-1059398"></a>Netlist topology must not be changed. Topology changes or the removal/addition of nodes in the restore file causes a fatal error.</li><li>
<a id="pgfId-1059393"></a>You may edit any netlist parameter as long as the circuit topology remains the same.</li><li>
<a id="pgfId-1059394"></a>The stop time of Transient analysis must be larger than the timepoint corresponding to the savestate file.</li><li>
<a id="pgfId-1059376"></a>Saved state file is binary and platform dependent.</li><li>
<a id="pgfId-1059377"></a>Savestate-Recover works only for transient analysis and the transient analysis must not be within a Sweep or Monte Carlo analysis.</li></ul>





<h4>
<a id="pgfId-1048892"></a>Use Model</h4>

<ul><li>
<a id="pgfId-1048893"></a>Savestate<br />
<a id="pgfId-1048894"></a>Savestate is enabled/disabled by using the <code>spectre</code> command, as follows.<pre class="webflare-pre-block webflare-courier-new" id="#id1048895">
<a id="pgfId-1048895"></a>spectre [+savestate ] [-savestate ] ...</pre>
<a id="pgfId-1048896"></a>where: <ul><li>
<a id="pgfId-1048897"></a><code>+savestate</code> - Enables Savestate. You may use <code>+ss</code> as an abbreviation for <code>+savestate</code>.</li><li>
<a id="pgfId-1048899"></a><code>-savestate</code> - Disables Savestate. You may use <code>-ss</code> as an abbreviation for -<code>savestate</code>.</li></ul><br />
<a id="pgfId-1048901"></a>By default, savestate is on, and checkpoint is off. </li><li>
<a id="pgfId-1048902"></a>Define saved time points and state file in the <code>tran</code> statement. For example: <br /><pre class="webflare-pre-block webflare-courier-new" id="#id1048904">
<a id="pgfId-1048904"></a>DoTran tran stop=stoptime [ [saveperiod=time] | [saveclock=clock_time] | [savetime=[time1 time2...]]   [savefile=file.srf]</pre>
<a id="pgfId-1048905"></a>where:<ul><li>
<a id="pgfId-1048906"></a><code>saveperiod</code>, <code>saveclock</code>, and <code>savetime</code> define the time points to save the states.<ul><li>
<a id="pgfId-1059604"></a>If <code>saveperiod</code> is given, Spectre generates a saved state file periodically based on the transient simulation time. Only the last saved state file is kept.</li><li>
<a id="pgfId-1059605"></a>If <code>saveclock</code> is given, Spectre generates a saved state file periodically based on real time (wall clock time). Its default value is 1800 seconds (30 minutes).  </li><li>
<a id="pgfId-1059606"></a>If <code>savetime</code> is given, Spectre generates a saved state file on each specified time point.</li></ul></li><li>
<a id="pgfId-1048908"></a><code>savefile</code> defines where the saved states are written.<ul><li>
<a id="pgfId-1048918"></a>If <code>savefile</code> is not defined, the default file name is <code>%C.%A.srf</code>.<br />
<a id="pgfId-1059569"></a>Where <code>%C</code> is the input circuit file name, and <code>%A</code> is the analysis name.</li></ul></li></ul><br />
<a id="pgfId-1048920"></a>If multiple save time points are given, That is, <pre class="webflare-pre-block webflare-courier-new" id="#id1048921">
<a id="pgfId-1048921"></a>analysisName tran stop=stoptime savetime=[time1 time2 ...] savefile=filename </pre>
<a id="pgfId-1048922"></a>the saved state file is <code>filename_at_time1</code>, <code>filename_at_time2</code>, and so on. <br />
<a id="pgfId-1064838"></a>Besides saving the state based on saveperiod or saveclock or savetime, if savestate is enabled, Spectre automatically saves the states to a file when an interrupt signal like <code>QUIT</code>, <code>TERM</code>, <code>INT</code>, or <code>HUP</code> is received for the first time. If interrupt signals are received more than once, Spectre quits immediately.<br />
<a id="pgfId-1064839"></a>The <code>saveclock</code>, <code>saveperiod</code>, and <code>savetime</code> parameters should not be specified at the same time.<br />
<a id="pgfId-1048928"></a>If more than one parameter is specified, Spectre reads them in the following order:<pre class="webflare-pre-block webflare-courier-new" id="#id1048930">
<a id="pgfId-1048930"></a>saveperiod </pre><pre class="webflare-pre-block webflare-courier-new" id="#id1048931">
<a id="pgfId-1048931"></a>savetime </pre><pre class="webflare-pre-block webflare-courier-new" id="#id1048932">
<a id="pgfId-1048932"></a>saveclock </pre></li><li>
<a id="pgfId-1048933"></a>Recover <br />
<a id="pgfId-1048934"></a>There are two ways to recover the simulation from the saved state file. The first is to define the recover file using the <code>spectre</code> command. The second is to define the recover file in a <code>tran</code> statement.<br />
<a id="pgfId-1048937"></a>Defining the recover file in the <code>tran</code> statement is strongly recommended, especially if there are multiple analyses statements in the netlist. </li><li>
<a id="pgfId-1048939"></a>Recover from command line <br /><pre class="webflare-pre-block webflare-courier-new" id="#id1048940">
<a id="pgfId-1048940"></a>spectre [+recover[=filename]]  [-recover] ... </pre>
<a id="pgfId-1048941"></a>where: <ul><li>
<a id="pgfId-1048942"></a><code>+recover</code> - Enables recover. You may use <code>+rec</code> as an abbreviation for <code>+recover</code>. </li><li>
<a id="pgfId-1048944"></a><code>-recover</code> - Disables recover. You may use <code>-rec</code> as an abbreviation for <code>-recover</code>.</li></ul></li><li>
<a id="pgfId-1048946"></a>Recover from the <code>tran</code> statement <br /><pre class="webflare-pre-block webflare-courier-new" id="#id1048947">
<a id="pgfId-1048947"></a>analysisName tran  recover=filename ... </pre>
<a id="pgfId-1048948"></a>By default, recover is disabled.</li><li>
<a id="pgfId-1048949"></a>Output Directory on Recovering<br />
<a id="pgfId-1048950"></a>When recovering from a saved state in a Spectre run by using <code>+recover=state_file</code> in a command-line option, a new raw directory is created to avoid overwriting the previous simulation results. However, if <code>recover=state_file</code> is given in a <code>tran</code> statement, the default raw directory is used.<br />
<a id="pgfId-1048955"></a>When defining <code>recover=state_file</code> in a <code>tran</code> statement, use a different tran name to avoid previous simulation results to be overwritten by the recovered results.<br />
<a id="pgfId-1048958"></a>When a new raw directory is created, the raw directory name is the same as the default raw directory, except that an index (starting from 0) is suffixed to raw, such as <code>*.raw#</code>, where <code>#</code> is 0, 1, 2, and so on.<br />
<a id="pgfId-1048961"></a>For example, in the first run, enter:<pre class="webflare-pre-block webflare-courier-new" id="#id1048962">
<a id="pgfId-1048962"></a>spectre input.scs </pre>
<a id="pgfId-1048963"></a>Spectre saves the simulation state in a file on a time point. By default, <code>input.raw</code> directory is created.<br />
<a id="pgfId-1048965"></a>When Spectre runs in recover mode:<pre class="webflare-pre-block webflare-courier-new" id="#id1048966">
<a id="pgfId-1048966"></a>spectre +recover=saved_state_file input.scs</pre>
<a id="pgfId-1048967"></a>a new raw directory named <code>input.raw0</code> is created. The index of the raw directory is increased by one at each successive recover run. Another use model is that you define multiple transient-analysis runs in a netlist. In the first transient-analysis run, Spectre saves the simulation state on a time point. <br />
<a id="pgfId-1048971"></a>In the next transient analysis run, simulation is continued from the saved time point. For example: <pre class="webflare-pre-block webflare-courier-new" id="#id1048973">
<a id="pgfId-1048973"></a>tran1 tran step=1ps stop=200ns savetime=[50ns] savefile=tran1_save</pre><pre class="webflare-pre-block webflare-courier-new" id="#id1048974">
<a id="pgfId-1048974"></a>tran2 tran step=1p stop=400ns  recover=tran1_save_at_50.00ns</pre>
<a id="pgfId-1048975"></a>In this case, the default raw directory is used.</li></ul>




















































<p>
<a id="pgfId-1086315"></a>For more information, see <em><a actuate="user" class="URL" href="../spectreuser/chap10.html#save-restart" show="replace" xml:link="simple">Recovering From Transient Analysis Terminations</a></em> section in the <em>Spectre Classic Simulator, Spectre APS, Spectre X, and Spectre XPS User Guide</em>.</p>

<br /><a href="#pagetop">Return to top</a><br /></div>
<!-- Begin Buttons --><!-- End Buttons -->
<footer><nav class="navigation"><b><em><a href="chap4_re_Output_Selections_save.html" id="prev" title="Output Selections (save)">Output Selections (save)</a></em></b><b><em><a href="chap4_re_Sensitivity_Analyses_sens.html" id="nex" title="Sensitivity Analyses (sens)">Sensitivity Analyses (sens)</a></em></b></nav><div>
            For further assistance, contact <a href="https://support.cadence.com">Cadence Online Support</a>. Copyright &#169; 2023, <a href="https://www.cadence.com">Cadence Design Systems, Inc.</a> All rights reserved. 
          </div></footer>
 

 <div id="cad_image_modal" style="background-color: rgba(0, 0, 0, 0.6);"><center id="cad_image_modal_center">&#160;⠀ </center><span style="margin-right:50px;margin-top:100px;font-weight:bold;font-size:20px;background:#e5e5e5;border:1px solid #e5e5e5;border-radius:25px;height:30px;width:20px;padding-left:6px;padding-top:2px;color: black;" onclick="document.querySelector('#cad_image_modal').classList.remove('opac');">X</span></div> 

</body></html>